(function(e){function t(t){for(var n,a,s=t[0],c=t[1],l=t[2],p=0,d=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},i=[];function a(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d215c9e":"63aad8dc"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,r[1](l)}o[e]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/graph-editor/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},1:function(e,t){},"10b3":function(e,t,r){},"11e3":function(e,t,r){"use strict";var n=r("10b3"),o=r.n(n);o.a},1925:function(e,t,r){},"1f34":function(e,t,r){"use strict";var n=r("3276"),o=r.n(n);o.a},"314b":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return test}));var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c0b6"),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4795"),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_2__);function test(context,vector){context.commit("showTests");var log=console.log.bind(console);function start(){setTimeout((function(){if(!window.mocha)return start();window.mocha.setup({reporter:"json-stream",ui:"bdd"}),window.mocha.checkLeaks();try{eval(vector.template.tests)}catch(err){context.commit("raiseError",new Error(err))}window.mocha.run()}),10)}console.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=[].concat(t)[0];"["===n[0]&&context.commit("addTestOutput",JSON.parse(n)),log.apply(void 0,t)},start()}},3276:function(e,t,r){},3997:function(e,t,r){},"3cf4":function(e,t,r){"use strict";var n=r("fc5a"),o=r.n(n);o.a},"5d48":function(e,t,r){},7097:function(e,t,r){"use strict";var n=r("d17a"),o=r.n(n);o.a},7410:function(e,t,r){"use strict";var n=r("1925"),o=r.n(n);o.a},7554:function(e,t,r){},"84cc":function(e,t,r){"use strict";var n=r("9dc3"),o=r.n(n);o.a},"8eb7":function(e,t,r){"use strict";var n=r("cd3e"),o=r.n(n);o.a},9169:function(e,t,r){"use strict";var n=r("a067"),o=r.n(n);o.a},"9dc3":function(e,t,r){},a067:function(e,t,r){},b2fe:function(e,t,r){"use strict";var n=r("5d48"),o=r.n(n);o.a},b384:function(e,t,r){"use strict";var n=r("cc73"),o=r.n(n);o.a},c11c:function(e,t,r){"use strict";var n=r("7554"),o=r.n(n);o.a},cc73:function(e,t,r){},cd3e:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),o=r("ce5b"),i=r.n(o);r("bf40"),r("d5e8"),r("5363");n["default"].use(i.a);var a=new i.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}}),s=(r("7db0"),r("4160"),r("ac1f"),r("5319"),r("159b"),r("5530")),c=(r("99af"),r("baa5"),r("6eba"),r("0d03"),r("b0c0"),r("b64b"),r("d3b7"),r("25f0"),r("1276"),r("4795"),r("96cf"),r("1da1")),l=(r("a4d3"),r("e01a"),r("4de4"),r("c975"),r("d81d"),r("a434"),r("ddb0"),r("2909")),p=r("6e8d"),u=(r("caad"),r("1b6d")),d=r.n(u),h=16,v=91,f=17,m=32;function g(e,t){var r=e.presentation||e.locked,n=t.event.ctrlKey||t.event.metaKey,o=t.event.shiftKey,i=e.preferences.snapToGrid&&!o?e.preferences.gridSize:1,a=o||n,s=!!e.translating.mouse&&(Math.abs(t.x-e.translating.mouse.x)>2||Math.abs(t.y-e.translating.mouse.y)>2);function c(t){var r=0,n=[];t.filter((function(e){return!!e})).forEach((function(e){n.push.apply(n,Object(l["a"])(e.properties.groups))})),e.graph.vectors.forEach((function(e){e.properties.groups.find((function(e){return n.includes(e)}))&&-1===t.indexOf(e)&&(r+=1,t.push(e))})),r>0&&c(t)}function p(t){return e.graph.vectors.filter((function(e){return t.find((function(t){return e.id===t.id}))}))}function d(){return e.graph.vectors.find((function(t){return e.hoveredVector.id===t.id}))}var g=(t.x-e.view.x)/e.view.k,b=(t.y-e.view.y)/e.view.k,y=5,w=Object.keys(e.luts).map((function(t){return{output:e.luts[t].output,input:e.luts[t].input,vector:e.luts[t].vector,connector:e.luts[t].connector,table:e.luts[t].lut}}));if(!e.hoveredPort||e.mouse.lmb||!t.lmb||e.movingConnector||"output"!==e.hoveredPort.type||r||(e.addingConnector=e.hoveredPort,e.addingConnector.connector={id:re(),vectorId:null,field:null,graphId:null,version:null}),e.hoveredConnector&&!e.mouse.lmb&&t.lmb&&s&&!r&&(e.movingConnector=e.hoveredConnector),e.selectionRect.visible||!e.hoveredConnector&&!e.movingConnector&&s&&!e.hoveredVector&&!e.hoveredPort&&!e.addingConnector&&!e.keys[m]&&0===e.movingVectors.length)if(t.lmb&&e.translating.mouse){e.selectionRect.visible=!0;var x=e.translating.mouse.x-t.x,S=e.translating.mouse.y-t.y;e.selectionRect.x=(Math.min(e.translating.mouse.x,e.translating.mouse.x-x)-e.view.x)/e.view.k,e.selectionRect.y=(Math.min(e.translating.mouse.y,e.translating.mouse.y-S)-e.view.y)/e.view.k,e.selectionRect.width=Math.abs(x)/e.view.k,e.selectionRect.height=Math.abs(S)/e.view.k,e.selectionRect.right=e.selectionRect.x+e.selectionRect.width,e.selectionRect.bottom=e.selectionRect.y+e.selectionRect.height}else e.selectionRect.visible&&(e.selectionRect={visible:!1,x:0,y:0,height:0,width:0,right:0,bottom:0});e.selectionRect.visible&&!a&&e.mouse.lmb&&(e.selectedConnectors=[],e.selectedVectors=[]),e.connectorWarn=null,e.hoveredConnector=null;for(var k=0;k<w.length;k+=1)for(var _=w[k].table,C=w[k].connector,O=w[k].vector,V=w[k].input,P=w[k].output,T=0;T<_.length;T+=1)if(_[T].x<g&&_[T].x+y>g&&_[T].y<b&&_[T].y+y>b||_[T].x>=e.selectionRect.x&&_[T].x<=e.selectionRect.x+e.selectionRect.width&&_[T].y>=e.selectionRect.y&&_[T].y<=e.selectionRect.y+e.selectionRect.height){(t.lmb&&!e.mouse.lmb||e.selectionRect.visible)&&(e.keys[h]||e.keys[v]||e.keys[f]||e.selectionRect.visible||(e.selectedConnectors=[]),-1===e.selectedConnectors.indexOf(C)&&e.selectedConnectors.push(C)),e.movingConnector||e.selectionRect.visible||(e.hoveredConnector={vector:O,connector:C,input:V,output:P});break}if(e.hoveredPort&&e.movingConnector&&!e.addingConnector&&"input"===e.hoveredPort.type){var I=e.graphSnapshot.vectors.find((function(t){return t.id===e.movingConnector.output.vector.id})),E=I.edges.find((function(t){return t.field===e.movingConnector.output.field.name})),j=E.connectors.find((function(t){return t.id===e.movingConnector.connector.id})),R=e.movingConnector.field.type,L=e.hoveredPort.field.type,G=R===L||"Object"===R||"Object"===L,N="Cannot connect "+R+" to "+L;G||(e.connectorWarn=N),!t.lmb&&e.mouse.lmb&&(G?(j.vectorId=e.hoveredPort.vector.id,j.field=e.hoveredPort.field.name,te(e,"Move Connector"),e.movingConnector=null):(e.showError=!0,e.error=N))}if(e.hoveredPort&&e.addingConnector&&"input"===e.hoveredPort.type){var D=e.graphSnapshot.vectors.find((function(t){return t.id===e.addingConnector.vector.id})),M=D.edges.find((function(t){return t.field===e.addingConnector.field.name})),B=e.addingConnector.connector,W=e.addingConnector.field.type,H=e.hoveredPort.field.type,U=W===H||"Object"===W||"Object"===H,$="Cannot connect "+W+" to "+H;U||(e.connectorWarn=$),!t.lmb&&e.mouse.lmb&&(U?(B.field=e.hoveredPort.field.name,B.vectorId=e.hoveredPort.vector.id,B.graphId=e.hoveredPort.vector.graphId,B.version=e.hoveredPort.vector.version,M.connectors.push(B),D.linkedGraph&&Object(u["linkInnerVectorEdges"])(D,e.scheduler.instance),te(e,"Add Connector"),e.addingConnector=null):(e.showError=!0,e.error="Cannot connect "+W+" to "+H))}if(!t.lmb&&e.mouse.lmb&&(e.movingVectors=[],te(e,"Move Vectors"),e.movingConnector=null,e.addingConnector=null,e.translating={}),t.lmb||!e.mouse.lmb||e.hoveredVector||s||e.hoveredConnector||a||(e.selectedConnectors=[],e.selectedVectors=[],e.primaryGroup=null,e.selectedVector=null),!e.mouse.lmb&&t.lmb&&e.hoveredVector&&0===e.movingVectors.length&&!r){var A=p(e.selectedVectors);A.find((function(t){return t.id===e.hoveredVector.id}))?e.movingVectors=Object(l["a"])(A):e.movingVectors=[d()],e.groupVectors=Object(l["a"])(e.movingVectors),c(e.movingVectors)}else if(!t.lmb&&e.mouse.lmb&&!s&&0===e.movingVectors.length){if(a&&e.hoveredVector||(e.selectedVectors=[],e.selectedGroups=[]),e.hoveredVector){var z=e.graph.vectors.find((function(t){return t.id===e.hoveredVector.id}));-1===e.selectedVectors.map((function(e){return e.id})).indexOf(z.id)&&e.selectedVectors.push(z),e.selectedVector=z}e.selectedVectors.length>0&&(e.groupVectors=Object(l["a"])(e.selectedVectors),c(e.selectedVectors))}if(e.selectionRect.visible&&(e.graph.vectors.forEach((function(t){var r=document.getElementById("vector-"+t.id);if(r){var n=r.getBoundingClientRect(),o={x:(n.x-e.view.x)/e.view.k,y:(n.y-e.view.y)/e.view.k,bottom:(n.y-e.view.y)/e.view.k+n.height/e.view.k,right:(n.x-e.view.x)/e.view.k+n.width/e.view.k},i=e.selectionRect;o.x<i.right&&o.right>i.x&&o.y<i.bottom&&o.bottom>i.y&&(-1===e.selectedVectors.map((function(e){return e.id})).indexOf(t.id)&&e.selectedVectors.push(t),e.selectedVector=t)}})),c(e.selectedVectors)),1===e.groupVectors.length&&(c(e.groupVectors),e.selectedGroups=e.groupVectors,1!==e.groupVectors.length&&(e.primaryGroup=e.groupVectors[0].properties.groups[0])),(e.keys[m]&&t.lmb||t.mmb)&&(t.event.preventDefault(),e.view.x=e.translating.view.x+(t.x-e.translating.mouse.x),e.view.y=e.translating.view.y+(t.y-e.translating.mouse.y)),e.movingVectors.length>0&&!r&&e.movingVectors.forEach((function(r){var n=e.graphSnapshot.vectors.find((function(e){return r.id===e.id})),o=e.translating.vectors.find((function(e){return r.id===e.id})),a=o.properties.x+(t.x-e.translating.mouse.x)/e.view.k,s=o.properties.y+(t.y-e.translating.mouse.y)/e.view.k;n.properties.x=Math.floor(a/i)*i,n.properties.y=Math.floor(s/i)*i})),e.selectedVectors.length>0){var J=p(e.selectedVectors),F=Math.min.apply(null,J.map((function(e){return e.properties.x}))),K=Math.max.apply(null,J.map((function(e){var t=document.getElementById("vector-"+e.id);return t?e.properties.x+t.offsetWidth:e.properties.x}))),q=Math.min.apply(null,J.map((function(e){return e.properties.y}))),Y=Math.max.apply(null,J.map((function(e){var t=document.getElementById("vector-"+e.id);return t?e.properties.y+t.offsetHeight:e.properties.y})));e.groupBounds={minX:F,maxX:K,minY:q,maxY:Y},e.boundingRect={x:e.groupBounds.minX,y:e.groupBounds.minY,width:e.groupBounds.maxX-e.groupBounds.minX,height:e.groupBounds.maxY-e.groupBounds.minY,right:e.groupBounds.minX+e.groupBounds.maxX-e.groupBounds.minX,bottom:e.groupBounds.minY+e.groupBounds.maxY-e.groupBounds.minY}}else e.boundingRect={x:0,y:0,height:0,width:0,bottom:0,right:0,visible:!1};e.mouse=t,e.mouseMovements.push({time:Date.now(),mouse:t})}var b=46,y=68,w=71,x=90,S=219,k=221,_=38,C=40,O=37,V=39,P=189,T=187,I=220,E=192,j=9;function R(e,t,r){var n=r.ctrlKey||r.metaKey,o=r.shiftKey,i=r.altKey,a=e.presentation||e.locked;t[E]&&i&&ft(e),a||(t[T]&&n&&(r.preventDefault(),ce(e,.1),t[T]=!1),t[P]&&n&&(r.preventDefault(),ce(e,-.1),t[P]=!1),t[I]&&Ot(e),t[_]&&oe(e,o?50:10),t[C]&&ie(e,o?50:10),t[O]&&ae(e,o?50:10),t[V]&&se(e,o?50:10),t[k]&&n&&o?be(e):t[k]&&n&&me(e),t[S]&&n&&o?ye(e):t[S]&&n&&ge(e),t[b]&&Ve(e),t[w]&&n&&o?_e(e):t[w]&&n&&ke(e),t[x]&&n&&o?(he(e),e.keys[x]=!1):t[x]&&n&&(de(e),e.keys[x]=!1),t[y]&&n&&o&&(r.preventDefault(),ve(e)),t[j]&&(r.preventDefault(),xt(e)))}function L(e,t){e.keys[t.keyCode]=!1,R(e,e.keys,t)}function G(e,t){e.keys[t.keyCode]=!0,R(e,e.keys,t)}var N='<template>\n    <v-card style="width: 500px;" class="pa-2">\n        <v-card-title>\n            THIS IS A NEW VECTOR\n        </v-card-title>\n        <v-card-subtitle>\n            There are many like it, but this one is yours\n        </v-card-subtitle>\n        <v-card-subtitle>\n            <ul>\n                <li>\n                    After selecting your vector, click\n                    <v-icon>\n                        mdi-vector-point\n                    </v-icon>\n                    on the left to show vector properties.  From\n                    there you can change this message.\n                </li>\n                <li>\n                    Click\n                    <v-icon>\n                        mdi-help-circle-outline\n                    </v-icon>\n                    in the upper right corner to show contextual help\n                </li>\n            </ul>\n        </v-card-subtitle>\n        <v-card-text class="pa-2">\n            <v-icon class="ma-2">\n                mdi-vector-point\n            </v-icon>\n            Properties for this vector\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-video-input-component\n            </v-icon>\n            Connectors for this vector\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-vuejs\n            </v-icon>\n            This vector\'s appearnce (change this message)\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-lambda\n            </v-icon>\n            Set what happens when this vector is invoked\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-graph-outline\n            </v-icon>\n            to see properties for the whole graph\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-history\n            </v-icon>\n            Undo history\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-library\n            </v-icon>\n            Local and public library of vectors you can import here\n            <v-spacer class="pa-2"></v-spacer>\n            <v-icon class="ma-2">\n                mdi-cogs\n            </v-icon>\n            Graph editor properties\n            <v-spacer class="pa-2"></v-spacer>\n            Check out this source of this button to see how to invoke the vector\n            <v-btn class="ma-2" @click="buttonClick">\n                <v-icon>\n                    mdi-play\n                </v-icon>\n                Example invocation\n            </v-btn>\n            <v-spacer class="pa-2"></v-spacer>\n            <v-alert \n                border="left"\n                colored-border\n                color="deep-purple accent-4"\n                elevation="2"\n                class="ma-2">\nVectors are the buliding blocks of the graph.\n<v-spacer class="ma-4"></v-spacer>\nVectors can do anything your host can do.\nif your host is a browser, you can use graphics, audio and other multimedia\nas well as presentation mode <v-icon small>mdi-presentation</v-icon> to show off your graph creations.\n<v-spacer class="ma-4"></v-spacer>\nIf you\'re running your graph on a server you have access to all the powerful\nAPIs your server has access to.  When on a server your graph is a living API.\n<v-spacer class="ma-4"></v-spacer>\nThe same graph can be run on the server and on the browser at the same time.\nWhen on the server, the graph can emit runtime telemetry just like when on the browser.\n<v-spacer class="ma-4"></v-spacer>\nThis runtime telelmetry data can be picked up by the Graph Editor (this program) to show execution\ninformation in real time.\n            </v-alert>\n            <v-spacer class="pa-2"></v-spacer>\n            To stop this tutorial vector from appearing each time you create a new blank vector\n            click on <v-icon>mdi-cogs</v-icon> and under "Graph" select: turn off "Show Help Messages".\n        </v-card-text>\n    </v-card>\n</template>\n<script>\nexport default {\n    methods: {\n      buttonClick() {\n        this.$emit("set", `Hello World from vector ${this.vector.id}`);\n      },\n    },\n    props: {\n        vector: Object,\n        state: Object,\n    }\n}\n<\/script>\n<style>\n</style>\n',D="console.info(value);\nalert(value);\n",M={template:N,set:D},B=r("81b4"),W=r.n(B),H=console.log;function U(e,t){e.testOutput.push(t)}function $(e){e.testsVisible=!0}function A(e){e.testsVisible=!1,e.testOutput=[],console.log=H}function z(e){e.pendingEvents={},e.resyncRequired=!1}function J(e,t){e.graph=t,e.queuedEvent=null}function F(e,t){e.eventQueue.push(t)}function K(e,t){t&&t.error&&t.response.err?/CRC/.test(t.response.err)?(e.resyncRequired=!0,e.queuedEvent=e.pendingEvents[t.response.eventId],e.queuedEvent||Me(e,new Error("Out of sync with server.  Last event could not be replayed.  Try refreshing your browser.")),n["default"]["delete"](e.pendingEvents,e.pendingEvents),console.warn("CRC error.  Resync from origin.")):Me(e,t.response.err):t&&t.response&&t.response.event&&n["default"]["delete"](e.pendingEvents,t.response.event.id),0===Object.keys(e.pendingEvents).length&&e.eventQueue.length>0&&(e.queuedEvent=e.eventQueue.shift())}function q(e,t){e.ownEvents.push(t),n["default"].set(e.pendingEvents,t.id,t)}function Y(e,t){var r=t.movements[0].time;t.movements.forEach((function(o){setTimeout((function(){n["default"].set(e.graphUserMouse,t.workstationId,Object(s["a"])({workstationId:t.workstationId,avatar:t.avatar,userName:t.userName},o))}),o.time-r)}))}function Z(e){n["default"].set(e,"mouseMovements",[])}function X(e,t){e.graphUsers[t.workstationId]&&e.graphUsers[t.workstationId].timeout&&clearTimeout(e.graphUsers[t.workstationId].timeout),n["default"].set(e.graphUsers,t.workstationId,t),e.graphUsers[t.workstationId].timeout=setTimeout((function(){n["default"]["delete"](e.graphUsers,t.workstationId)}),e.heartBeatInterval+1e3)}function Q(e,t){var r=e.ownEvents.map((function(e){return e.id})),n=e.remoteEvents.map((function(e){return e.id})),o=JSON.parse(JSON.stringify(e.graph));-1===r.indexOf(t.id)&&-1===n.indexOf(t.id)&&t.changes.forEach((function(e){Object(p["applyChange"])(o,!0,e)}));var i=Object(p["diff"])(e.graph,o);if(i){var a=W.a.CRC32(JSON.stringify(o,ee));a!==t.crc&&(e.resyncRequired=!0,console.warn("CRC error.  Resync from origin.")),e.remoteEvents.push(t),e.graph=o,it(e,0)}}function ee(e,t){if("__contextId"!==e)return t}function te(e,t){e.events.length!==e.historyPosition&&e.events.splice(e.historyPosition,e.events.length-e.historyPosition);var r=Object(p["diff"])(e.graph,e.graphSnapshot);r&&(e.events.push({name:t,changes:r,time:Date.now()}),r.forEach((function(t){Object(p["applyChange"])(e.graph,!0,t)})),e.historyPosition+=1,e.graphSnapshot=JSON.parse(JSON.stringify(e.graph)))}function re(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)}))}function ne(e,t,r){e.selectedVectors.forEach((function(n){var o=e.graphSnapshot.vectors.find((function(e){return n.id===e.id}));o.properties.x+=t,o.properties.y+=r})),te(e,"Nudge")}function oe(e,t){ne(e,0,-t)}function ie(e,t){ne(e,0,t)}function ae(e,t){ne(e,-t,0)}function se(e,t){ne(e,t,0)}function ce(e,t){e.view.k=Math.min(4,Math.max(e.view.k+t,.1))}function le(e,t){var r=e.historyPosition+t;if(!(r>e.events.length||r<0)){while(e.historyPosition!==r)if(e.historyPosition>r){e.historyPosition-=1;var n=e.events[e.historyPosition].changes;n.forEach((function(t){Object(p["revertChange"])(e.graphSnapshot,!0,t)}))}else if(e.historyPosition<r){var o=e.events[e.historyPosition].changes;o.forEach((function(t){Object(p["applyChange"])(e.graphSnapshot,!0,t)})),e.historyPosition+=1}e.graph=e.graphSnapshot,e.graphSnapshot=JSON.parse(JSON.stringify(e.graph))}}function pe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Paste",n={};t.forEach((function(t){n[t.id]=n[t.id]||re(),t.id===t.url?(t.id=n[t.id],t.url=t.id):t.id=n[t.id],t.graphId=e.graph.id,t.version=e.graph.version;for(var r=0;r<t.properties.groups.length;r+=1){var o=t.properties.groups[r];n[o]=n[o]||re(),t.properties.groups[r]=n[o]}t.edges.forEach((function(t){t.connectors.forEach((function(t){n[t.id]=n[t.id]||re(),t.id=n[t.id],n[t.vectorId]=n[t.vectorId]||re(),t.vectorId=n[t.vectorId],t.graphId=e.graph.id,t.version=e.graph.version}))}))})),e.graphSnapshot.vectors=[].concat(Object(l["a"])(e.graphSnapshot.vectors),Object(l["a"])(t)),e.selectedVectors=t,te(e,r)}function ue(e,t){e.selectedVectors=[e.graph.vectors.find((function(e){return e.id===t}))],e.selectedVector=e.selectedVectors[0]}function de(e){le(e,-1)}function he(e){le(e,1)}function ve(e){e.selectedVectors.length>0&&pe(e,JSON.parse(JSON.stringify(e.selectedVectors)),"Duplicate")}function fe(e,t,r){var n=t.selectedVectors.map((function(e){return e.id}));t.graphSnapshot.vectors.forEach((function(t){-1!==n.indexOf(t.id)&&(t.properties.z+=e)})),te(t,r)}function me(e){fe(1,e,"Send Forward")}function ge(e){fe(-1,e,"Send Backward")}function be(e){var t=Math.max.apply(null,e.graph.vectors.map((function(e){return e.properties.z}))),r=e.selectedVectors.map((function(e){return e.id}));e.graphSnapshot.vectors.forEach((function(e){-1!==r.indexOf(e.id)&&(e.properties.z=t+1)})),te(e,"Bring to Front")}function ye(e){var t=Math.min.apply(null,e.graph.vectors.map((function(e){return e.properties.z}))),r=e.selectedVectors.map((function(e){return e.id}));e.graphSnapshot.vectors.forEach((function(e){-1!==r.indexOf(e.id)&&(e.properties.z=t-1)})),te(e,"Send to Back")}function we(e,t){var r={x:(t.x-e.view.x)/e.view.k,y:(t.y-e.view.y)/e.view.k};r.x=10*Math.floor(r.x/10),r.y=10*Math.floor(r.y/10);var n={},o={},i=t.item;i.vectors.forEach((function(e){e.properties.inputs.forEach((function(t){t.external&&(n[t.name]={id:e.id,field:t.name,type:t.type,external:!1})})),e.properties.outputs.forEach((function(t){t.external&&(o[t.name]={id:e.id,field:t.name,type:t.type,external:!1})}))}));var a=re(),s={id:a,__contextId:null,edges:[],version:e.graphSnapshot.version,graphId:e.graphSnapshot.id,artifact:t.url||"artifacts/"+t.id+"."+t.version,url:a,data:null,linkedGraph:{id:t.id,version:t.version,data:{},loaded:!0,graph:i,properties:{},fields:{inputs:n,outputs:o}},properties:{inputs:[],outputs:[],groups:[],name:t.name,description:t.description,tags:[],icon:"mdi-lan",positionAbsolute:!1,appearsInPresentation:!1,appearsInExport:!1,x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z,presentation:{x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z}},template:{set:"const hostVector = value.context.getters.getVectorById(value.hostVector.id);\nconst vect = hostVector.linkedGraph.graph.vectors.find(v => v.id === value.vector.id);\nscheduler.url.call(scheduler,\n    vect.url,\n    value.event,\n    '$url',\n    hostVector,\n    hostVector.linkedGraph.graph);",vue:""}};Object.keys(n).forEach((function(e){var t=n[e];s.properties.inputs.push({name:t.field,external:!1,type:t.type})})),Object.keys(o).forEach((function(e){var t=o[e];s.properties.outputs.push({name:t.field,external:!1}),s.edges.push({field:t.field,connectors:[],type:t.type})})),e.graphSnapshot.vectors.push(s),te(e,"Import New Graph")}function xe(e,t){var r={x:(t.x-e.view.x)/e.view.k,y:(t.y-e.view.y)/e.view.k};r.x=10*Math.floor(r.x/10),r.y=10*Math.floor(r.y/10);var n=re();t.item.id=n,t.item.url=n,t.item.version=e.graphSnapshot.version,t.item.graphId=e.graphSnapshot.id,t.item.properties.x=r.x,t.item.properties.y=r.y,t.item.properties.z=0+e.preferences.newVectorOffset.z,t.item.edges.forEach((function(e){e.connectors=[]})),e.graphSnapshot.vectors.push(t.item),te(e,"Drop New Item")}function Se(e,t){var r={x:(t.x-e.view.x)/e.view.k,y:(t.y-e.view.y)/e.view.k};r.x=10*Math.floor(r.x/10),r.y=10*Math.floor(r.y/10);var n=re();t.item.loaded=!0,t.item.edges.forEach((function(e){e.connectors=[]}));var o={id:n,linkedVector:t.item,edges:t.item.edges,version:e.graphSnapshot.version,graphId:e.graphSnapshot.id,artifact:t.url||"artifacts/"+t.id+"."+t.version,url:n,data:t.item.data,properties:{inputs:t.item.properties.inputs,outputs:t.item.properties.outputs,groups:[],name:t.name,description:t.description,tags:t.item.properties.tags,icon:t.item.properties.icon,positionAbsolute:!1,appearsInPresentation:!1,appearsInExport:!1,x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z,presentation:{x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z}},template:{set:t.item.template.set,vue:t.item.template.vue}};e.graphSnapshot.vectors.push(o),te(e,"Import New Vector")}function ke(e){var t=re(),r=e.selectedVectors.map((function(e){return e.id}));e.graphSnapshot.vectors.forEach((function(e){-1!==r.indexOf(e.id)&&-1===e.properties.groups.indexOf(t)&&e.properties.groups.push(t)})),te(e,"Group")}function _e(e){var t=e.selectedVectors.map((function(e){return e.id}));e.graphSnapshot.vectors.forEach((function(r){-1!==t.indexOf(r.id)&&r.properties.groups.splice(r.properties.groups.indexOf(e.primaryGroup),1)})),te(e,"Ungroup")}function Ce(e){return function(t){e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(e){e.connectors.forEach((function(r,n){r.vectorId===t&&e.connectors.splice(n,1)}))}))})),e.graphSnapshot.vectors.forEach((function(r,n){t===r.id&&e.graphSnapshot.vectors.splice(n,1)}))}}function Oe(e){var t;return function(r){e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(n){n.connectors.forEach((function(o,i){r===o.id&&(n.connectors.splice(i,1),t=e)}))})),t&&e.linkedGraph&&t.id===e.id&&e.linkedGraph.graph&&e.linkedGraph.graph.vectors.forEach((function(e){e.edges.forEach((function(e){e.connectors.forEach((function(t,n){r===t.id&&e.connectors.splice(n,1)}))}))}))}))}}function Ve(e){var t=e.selectedVectors.map((function(e){return e.id})),r=e.selectedConnectors.map((function(e){return e.id}));e.selectedVectors=[],e.selectedConnectors=[],e.selectedGroups=[],e.groupVectors=[],e.hoveredConnector=null,e.hoveredVector=null,t.forEach(Ce(e)),r.forEach(Oe(e)),te(e,"Delete")}function Pe(e,t){e.preferences=t}function Te(e,t){e.hoveredConnector=t}function Ie(e,t){e.keys.event&&(e.keys.event.shiftKey||e.keys.event.ctrlKey||e.keys.event.metaKey)?-1===e.selectedConnectors.map((function(e){return e.id})).indexOf(t.id)&&e.selectedConnectors.push(t):e.selectedConnectors=[t]}function Ee(e,t){e.movingVectors.length>0||(e.hoveredVector=t)}function je(e,t){e.hoveredPort=t}function Re(e,t){e.graphSnapshot=t,te(e,"Write to Graph")}function Le(e,t){e.luts[t.connector.id]=Object(s["a"])({},t)}function Ge(e,t){e.view=t}function Ne(e,t){e.translating=t}function De(e){e.error=null,e.showError=!1}function Me(e,t){console.error(t),e.error=t,e.showError=!0}function Be(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.id}));if(!r)return Me(e,new Error("Cannot find vector to write to."));r.template[t.key]=t.value,te(e,"Update Template")}function We(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));var n=r.properties.inputs.find((function(e){return e.name===t.name}));if(!n)return Me(e,new Error("Cannot find a property to update."));var o=r.properties.inputs.indexOf(n);r.properties.inputs.splice(o,1),r.properties.inputs.splice(o+("down"===t.direction?1:-1),0,n),te(e,"Change Input Order")}function He(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));var n=r.properties.outputs.find((function(e){return e.name===t.name}));if(!n)return Me(e,new Error("Cannot find a property to update."));var o=r.properties.outputs.indexOf(n),i=r.edges.find((function(e){return e.field===t.name})),a=r.edges.indexOf(i);r.properties.outputs.splice(o,1),r.properties.outputs.splice(o+("down"===t.direction?1:-1),0,n),r.edges.splice(a,1),r.edges.splice(a+("down"===t.direction?1:-1),0,i),te(e,"Change Output Order")}function Ue(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));r.properties.inputs.push({name:t.name,type:t.type||"Object",external:void 0!==t.external&&t.external}),te(e,"Add Input")}function $e(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));r.properties.outputs.push({name:t.name,type:t.type||"Object",external:void 0!==t.external&&t.external}),r.edges.push({field:t.name,connectors:[]}),te(e,"Add Output")}function Ae(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));var n=r.properties.inputs.find((function(e){return e.name===t.name}));r.properties.inputs.splice(r.properties.inputs.indexOf(n),1),e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(e){var r=e.connectors.filter((function(e){return e.vectorId===t.vectorId&&e.field===t.name}));r.length>0&&r.forEach((function(t){e.connectors.splice(e.connectors.indexOf(t),1)}))}))})),te(e,"Remove Input")}function ze(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));var n=r.properties.outputs.find((function(e){return e.name===t.name})),o=r.edges.find((function(e){return e.field===t.name}));r.edges.splice(r.edges.indexOf(o),1),r.properties.outputs.splice(r.properties.outputs.indexOf(n),1),te(e,"Remove Output")}function Je(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));if(!r)return Me(e,new Error("Cannot find vector to update."));r.properties=t.properties,te(e,"Update Vector Properties")}function Fe(e,t){e.graphSnapshot.properties=t,te(e,"Update Graph Properties")}function Ke(e,t){var r={x:(t.x-e.view.x)/e.view.k,y:(t.y-e.view.y)/e.view.k};r.x=10*Math.floor(r.x/10),r.y=10*Math.floor(r.y/10);var n=re(),o={id:n,edges:[],version:e.graphSnapshot.version,graphId:e.graphSnapshot.id,artifact:null,url:n,data:null,properties:{inputs:[],outputs:[],groups:[],name:"",description:"",tags:[],icon:"mdi-vector-rectangle",positionAbsolute:!1,appearsInPresentation:!1,appearsInExport:!1,x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z,presentation:{x:r.x,y:r.y,z:0+e.preferences.newVectorOffset.z}},template:{set:e.preferences.newVectorHelp?M.set:e.preferences.defaultNewSetTemplate,vue:e.preferences.newVectorHelp?M.template:e.preferences.defaultNewVueTemplate}};e.graphSnapshot.vectors.push(o),te(e,"Create New Vector")}function qe(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vector.id}));if(!r)return Me(e,new Error("Cannot find vector to update."));Object(p["observableDiff"])(r,t.vector,(function(n){if("properties"===n.path[0]&&"outputs"===n.path[1]&&!isNaN(n.path[2])&&("name"===n.path[3]||"external"===n.path[3]||"type"===n.path[3])&&(Object(p["applyChange"])(r,t.vector,n),"name"===n.path[3])){var o=r.edges.find((function(e){return e.field===n.lhs}));o.field=n.rhs}"properties"!==n.path[0]||"inputs"!==n.path[1]||isNaN(n.path[2])||"name"!==n.path[3]&&"external"!==n.path[3]&&"type"!==n.path[3]||(Object(p["applyChange"])(r,t.vector,n),"name"===n.path[3]&&e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(e){e.connectors.forEach((function(e){e.field===n.lhs&&e.vectorId===t.vector.id&&(e.field=n.rhs)}))}))})))})),te(e,"Rename IO")}function Ye(e,t){e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(e){e.connectors.forEach((function(r,n){t.id===r.id&&e.connectors.splice(n,1)}))}))})),te(e,"Delete Connector")}function Ze(e,t){e.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(r){r.connectors.forEach((function(n,o){t.connectorId===n.id&&e.id===t.vectorId&&(r.connectors.splice(o,1),r.connectors.splice(o+("down"===t.direction?1:-1),0,n))}))}))})),te(e,"Reorder Connectors")}function Xe(e,t){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=function(e){e.forEach((function(e){e.__contextId=re(),e.linkedGraph&&n(e.linkedGraph.graph.vectors)}))},t.graph=r,n(t.graph.vectors),t.graphSnapshot=JSON.parse(JSON.stringify(r)),t.remoteSnapshot=JSON.parse(JSON.stringify(r));case 5:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function et(e,t){Object.keys(t).forEach((function(r){n["default"].set(e.dataProviders,r,t[r])}))}function tt(e,t){n["default"].set(e.loading,t.type,e.loading[t.type]||{}),n["default"].set(e.loading[t.type],t.key,e.loading[t.type][t.key]||[]),e.loading[t.type][t.key].push({loading:t.loading,event:t.event,time:Date.now()})}function rt(e,t){e.log.push(Object(s["a"])({_t:Date.now()},t))}function nt(e,t){e.remoteSnapshot=t}function ot(e,t){e.preferences=t}function it(e,t){e.dataProviders.graph.asyncUpdate||(e.graph.version=t,e.graph.vectors.forEach((function(e){e.version=t,e.edges.forEach((function(e){e.connectors.forEach((function(e){e.version=t}))}))}))),e.graphSnapshot=JSON.parse(JSON.stringify(e.graph)),e.remoteSnapshot=JSON.parse(JSON.stringify(e.graph))}function at(e,t){e.toc=t}function st(e,t){e.presentation=t}function ct(e,t){e.locked=t}function lt(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));r.url=t.url,te(e,"Change Vector URL")}function pt(e,t){e.log=e.log.filter((function(e){return e.eventName!==t}))}function ut(e,t){n["default"].set(e.activityConnectors,t.key,t)}function dt(e,t){e.scheduler.errors[t.key]=e.scheduler.errors[t.key].filter((function(e){return e!==t.item}))}function ht(e,t){n["default"].set(e.scheduler.errors,t.key,[])}function vt(e,t){n["default"].set(e.scheduler.errors,t.key,e.scheduler.errors[t.key]||[]),e.scheduler.errors[t.key].push(t.error)}function ft(e){e.presentation=!e.presentation}function mt(e,t){e.scheduler.instance=t}function gt(e,t){e.artifacts[t.key]=t.value}function bt(e,t){var r=e.graphSnapshot.vectors.find((function(e){return e.id===t.vectorId}));r.data=t.data,te(e,"Update Vector Data")}function yt(e,t){var r=t.parent;delete t.parent,n["default"].set(r,"_item",t)}function wt(e,t){n["default"].set(e.registry,t.url,t)}function xt(e){e.panelVisibility=!e.panelVisibility}function St(e,t){e.scheduler.state=t}function kt(e){e.preferences.showLabels=!e.preferences.showLabels,ot(e,e.preferences)}function _t(e){e.showHelp=!e.showHelp}function Ct(e,t){e.helpTopics[t.topic]=t}function Ot(e){e.selectedVectors.forEach((function(t){var r=e.graphSnapshot.vectors.find((function(e){return t.id===e.id}));r.properties.appearsInPresentation=!r.properties.appearsInPresentation})),te(e,"Toggle Vector Presentation")}function Vt(e,t){e.graph=t,e.createdGraphId=t.id,e.remoteSnapshot={},e.graphSnapshot=null}function Pt(e,t){e.graphReferences=Object(s["a"])(Object(s["a"])({},e.graphReferences),t)}function Tt(e,t){e.connectionState=t}var It,Et={addTestOutput:U,hideTests:A,showTests:$,clearResync:z,dequeueEvent:J,queueEvent:F,clearPendingMessage:K,setPendingEvent:q,updateGraphMouse:Y,resetMouseTelemetry:Z,updateGraphUsers:X,newId:re,setConnectionState:Tt,resetLoadedState:Vt,addDroppedItem:xe,setGraphReferences:Pt,remoteChangeEvents:Q,addHelpTopic:Ct,toggleHelp:_t,toggleLabels:kt,togglePanelVisibility:xt,setRegistryItem:yt,setRegistry:wt,setSchedulerState:St,updateVectorData:bt,setArtifact:gt,togglePresentation:ft,selectVector:ue,addSchedulerError:vt,clearSchedulerErrorItem:dt,clearSchedulerError:ht,connectorActivity:ut,clearLog:pt,setScheduler:mt,addLogItem:rt,updateVectorUrl:lt,setLock:ct,setPresentation:st,addGraphItem:we,setGraphVersion:it,addVectorItem:Se,setPreferences:ot,setRemoteSnapshot:nt,setToc:at,setLoadingStatus:tt,open:Xe,setDataProviders:et,changeConnectorOrder:Ze,deleteConnector:Ye,selectConnector:Ie,updateVectorFields:qe,createNewVector:Ke,updateGraphProperties:Fe,updateVectorProperties:Je,changeInputOrder:We,changeOutputOrder:He,addInput:Ue,addOutput:$e,removeInput:Ae,removeOutput:ze,updateTemplate:Be,clearError:De,raiseError:Me,undo:de,redo:he,moveHistoryPosition:le,duplicateSelection:ve,pasteVectors:pe,bringForward:me,sendBackward:ge,bringToFront:be,sendToBack:ye,groupSelected:ke,ungroupSelected:_e,deleteSelected:Ve,preferences:Pe,hoveredConnector:Te,hoveredVector:Ee,hoveredPort:je,mouse:g,graph:Re,lut:Le,view:Ge,keyup:L,keydown:G,translating:Ne},jt=(r("fb6a"),r("d4ec")),Rt=r("bee2"),Lt="preferences",Gt="toc.json",Nt="events/",Dt="artifacts/",Mt=function(){function e(){Object(jt["a"])(this,e),this.asyncUpdate=!1}return Object(Rt["a"])(e,[{key:"updateToc",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(Gt);case 2:if(n=e.sent,n){e.next=7;break}o={},e.next=14;break;case 7:e.prev=7,o=JSON.parse(n),e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](7),new Error("Cannot parse toc");case 14:return o[t]=r,e.next=17,localStorage.setItem(Gt,JSON.stringify(o));case 17:case"end":return e.stop()}}),e,null,[[7,11]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=-1,o=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var o,i,a,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("toc.json"!==t){e.next=17;break}return e.next=3,localStorage.getItem(Gt);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0="";case 6:o=e.t0,e.prev=7,i=JSON.parse(o),e.next=14;break;case 11:throw e.prev=11,e.t1=e["catch"](7),new Error("Cannot parse TOC. Error: "+e.t1.toString());case 14:r({type:"toc",toc:i}),e.next=53;break;case 17:if("preferences"!==t){e.next=34;break}return e.next=20,localStorage.getItem(Lt);case 20:if(e.t2=e.sent,e.t2){e.next=23;break}e.t2="";case 23:a=e.t2,e.prev=24,s=JSON.parse(a),e.next=31;break;case 28:throw e.prev=28,e.t3=e["catch"](24),new Error("Cannot parse preferences. Error: "+e.t3.toString());case 31:r({type:"preferences",preferences:s}),e.next=53;break;case 34:return e.next=36,localStorage.getItem(Nt+t);case 36:if(e.t4=e.sent,e.t4){e.next=39;break}e.t4="";case 39:if(c=e.t4,c){e.next=44;break}l=[],e.next=52;break;case 44:if(!c){e.next=52;break}e.prev=45,l=JSON.parse(c),e.next=52;break;case 49:throw e.prev=49,e.t5=e["catch"](45),new Error("Cannot parse events. Error: "+e.t5.toString());case 52:n!==l.length&&(-1!==n&&r({type:"events",events:l.slice(n)}),n=l.length);case 53:case"end":return e.stop()}}),e,null,[[7,11],[24,28],[45,49]])})));return function(){return e.apply(this,arguments)}}(),window.addEventListener("storage",o),t!==Gt&&t!==Lt&&o();case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"get",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:if(r=e.t0,r){e.next=8;break}throw new Error("Resource not found."+t);case 8:e.prev=8,n=JSON.parse(r),e.next=15;break;case 12:throw e.prev=12,e.t1=e["catch"](8),new Error("Cannot parse resource."+e.t1.toString());case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,null,[[8,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"set",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],o={},!("preferences"in r)){e.next=7;break}return e.next=5,localStorage.setItem(t,JSON.stringify(r.preferences));case 5:e.next=53;break;case 7:if(!("changes"in r)){e.next=38;break}return e.next=10,localStorage.getItem(Nt+t);case 10:if(i=e.sent,i){e.next=15;break}n=[],e.next=23;break;case 15:if(!i){e.next=23;break}e.prev=16,n=JSON.parse(i),e.next=23;break;case 20:throw e.prev=20,e.t0=e["catch"](16),new Error("Cannot parse events. Error: "+e.t0.toString());case 23:if(r.time=Date.now(),n.push(r),n.forEach((function(e){e.changes.forEach((function(e){Object(p["applyChange"])(o,!0,e)}))})),a=W.a.CRC32(JSON.stringify(o)),a===r.crc){e.next=30;break}throw console.log("state",r,JSON.parse(JSON.stringify(o))),new Error("CRC Mismatch.  Expected ".concat(a," got ").concat(r.crc));case 30:return e.next=32,localStorage.setItem(Nt+t,JSON.stringify(n));case 32:return e.next=34,localStorage.setItem(t,JSON.stringify(o));case 34:return e.next=36,this.updateToc(t,{id:o.id,lastUpdate:Date.now(),type:"graph",icon:o.properties.icon,description:o.properties.description,name:o.properties.name,version:o.version});case 36:e.next=53;break;case 38:if(!("vector"in r)){e.next=45;break}return s=Dt+t+"."+r.vector.version,localStorage.setItem(s,JSON.stringify(r.vector)),e.next=43,this.updateToc(s,{id:r.vector.id,lastUpdate:Date.now(),type:"publishedVector",description:r.vector.properties.description,icon:r.vector.properties.icon,name:r.vector.properties.name,version:r.vector.version});case 43:e.next=53;break;case 45:if(!("graph"in r)){e.next=52;break}return c=Dt+t+"."+r.graph.version,localStorage.setItem(Dt+t+"."+r.graph.version,JSON.stringify(r.graph)),e.next=50,this.updateToc(c,{id:r.graph.id,lastUpdate:Date.now(),type:"publishedGraph",icon:r.graph.properties.icon,description:r.graph.properties.description,name:r.graph.properties.name,version:r.graph.version});case 50:e.next=53;break;case 52:throw new Error("Set called without a recognized type");case 53:case"end":return e.stop()}}),e,this,[[16,20]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem(Gt);case 2:if(r=e.sent,r){e.next=7;break}throw new Error("Cannot find TOC.");case 7:e.prev=7,n=JSON.parse(r),e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](7),new Error("Cannot parse toc");case 14:return delete n[t],e.next=17,localStorage.setItem(Gt,JSON.stringify(n));case 17:return null!==localStorage.getItem(Nt+t)&&localStorage.removeItem(Nt+t),e.next=20,localStorage.removeItem(t);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,null,[[7,11]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Bt=function(){function e(t,r,n,o){if(Object(jt["a"])(this,e),!t)throw new Error("No url was passed to WSSDataProvider");this.asyncUpdate=!0,this.events={},this.messages=[],this.keepOpen=!0,this.url=t,this.message=r,this.open=n,this.close=o,this.subscriptions=[],this.state="connecting",this.keepOpen=!0,this.webSocket=new WebSocket(this.url),this.connect()}return Object(Rt["a"])(e,[{key:"send",value:function(e){if("open"!==this.state)return this.messages.push(e);var t=JSON.stringify(e);this.webSocket.send(t)}},{key:"connect",value:function(){var e=this;"closed"===this.state&&(this.state="connecting",this.webSocket=new WebSocket(this.url)),this.webSocket.addEventListener("open",(function(){e.state="open",e.open();while(e.messages.length>0)e.send(e.messages.shift());e.subscriptions.forEach((function(t){e.subscribe(t,null)}))})),this.webSocket.addEventListener("close",(function(){e.state="closed",e.close(),e.keepOpen&&e.connect()})),this.webSocket.addEventListener("message",(function(t){var r=JSON.parse(t.data);e.messageHandler(r)}))}},{key:"messageHandler",value:function(e){if(e.unsubscribed){var t=this.subscriptions.indexOf(e.unsubscribed);-1!==t&&this.subscriptions.splice(t,1)}e.messageId&&"function"===typeof this.events[e.messageId]&&this.events[e.messageId](e.response),e.subscribed&&-1===this.subscriptions.indexOf(e.subscribed)&&this.subscriptions.push(e.subscribed),e.channelId&&this.events[e.channelId]&&this.events[e.channelId].forEach((function(t){t(e.response)})),this.message(e)}},{key:"disconnect",value:function(){this.keepOpen=!1,this.webSocket.close()}},{key:"subscribe",value:function(e,t){t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t)),this.send({action:"subscribe",channelId:e})}},{key:"unsubscribe",value:function(e,t){if(this.events[e]){var r=this.events[e].indexOf(t);-1!==r&&(this.events[e].splice(r,1),this.send({action:"unsubscribe",channelId:e}))}}},{key:"listSubscribers",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n={messageId:re(),action:"listSubscribers",channelId:t};r.send(n),r.events[n.messageId]=e})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"listSubscriptions",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n={messageId:re(),action:"listSubscriptions",connectionId:t};r.send(n),r.events[n.messageId]=e})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendToAll",value:function(e){this.send({action:"sendToAll",value:e})}},{key:"sendToChannel",value:function(e,t){this.send({action:"sendToChannel",value:t.value,channelId:t.channelId})}},{key:"sendToConnection",value:function(e,t){this.send({action:"sendToConnection",value:t.value,connectionId:t.connectionId})}},{key:"get",value:function(e){var t=this;return new Promise((function(r){var n={action:"getGraph",id:e,version:"latest",messageId:re()};t.send(n),t.events[n.messageId]=function(e){r(e)}}))}},{key:"delete",value:function(e){this.send({action:"deleteGraph",id:e})}},{key:"set",value:function(e,t){"changes"in t?this.send({action:"addEvent",event:t}):"vector"in t?this.send({action:"publishVector",graphId:t.vector.graphId,vectorId:t.vector.id,version:t.vector.version,messageId:re()}):"graph"in t&&this.send({action:"publishGraph",id:t.graph.id,version:t.graph.version,messageId:re()})}}]),e}(),Wt=function(){function e(t){if(Object(jt["a"])(this,e),!t)throw new Error("No base url was passed to HTTPDataProvider");this.baseUrl=t+("/"===t[t.length-1]?"":"/")}return Object(Rt["a"])(e,[{key:"set",value:function(e,t){console.log("httpDataProvider",e,t)}},{key:"get",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.baseUrl+t);case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Ht=r("314b"),Ut="artifacts/",$t=500,At={logger:function(e){return{log:function(t){e.commit("addLogItem",{eventName:"log",event:t})},info:function(t){/Executing vector at URL/.test(t.toString())&&!e.state.preferences.debug||e.commit("addLogItem",{eventName:"info",event:t})},debug:function(t){e.state.preferences.debug&&e.commit("addLogItem",{eventName:"debug",event:t})},error:function(t){e.commit("addLogItem",{eventName:"logError",event:t}),e.commit("raiseError",t.err)},warn:function(t){e.commit("addLogItem",{eventName:"warn",event:t})}}},begin:function(e,t){e.commit("setLoadingStatus",{key:e.state.graph.id,type:"graphUrl",loading:!0}),e.commit("addLogItem",{eventName:"begin",event:t})},end:function(e,t){e.commit("setLoadingStatus",{key:e.state.graph.id,type:"graphUrl",loading:!1}),e.commit("addLogItem",{eventName:"end",event:t})},beginconnector:function(e,t){e.commit("connectorActivity",{key:t.connector.id,start:Date.now(),event:t}),e.state.preferences.debug&&(e.commit("setLoadingStatus",{key:t.connector.id,type:"connector",loading:!0,event:t}),e.commit("addLogItem",{eventName:"connector",event:t}))},endconnector:function(e,t){var r=Date.now(),n=e.state.activityConnectors[t.connector.id],o=n?r-n.start:"";e.commit("connectorActivity",{key:t.connector.id,end:Date.now(),duration:o,event:t}),e.state.preferences.debug&&(e.commit("setLoadingStatus",{key:t.connector.id,type:"connector",loading:!1}),e.commit("addLogItem",{eventName:"connector",event:t}))},set:function(e,t){if(t.vectorInterface){var r=e.getters.getGraphReference(t.vectorInterface.vector.__contextId);t.setContext({props:r.vectorProps[r.vector.__contextId],component:r})}},afterSet:function(e,t){e.state.preferences.debug&&e.commit("addLogItem",{eventName:"set",event:t})},error:function(e,t){if("err"in t&&t.err){e.commit("addSchedulerError",{key:t.vectorId,error:t.err}),e.commit("addLogItem",{eventName:"error",event:t});var r=t.message||t.err.message;e.commit("raiseError",new Error("Graph Scheduler Error: "+r))}},warning:function(e,t){"message"in t&&(e.commit("addLogItem",{eventName:"warning",event:t}),e.commit("raiseError",new Error("Graph Scheduler Warning: "+t.message)))},load:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!("setValue"in t)){r.next=12;break}if(n=t.url.split("/"),o=n[2].split(".")[0],i=n[2].split(".")[1],a=n[1],e.commit("addLogItem",{eventName:"load",event:t}),"graph"!==a||o!==e.state.graph.id){r.next=8;break}return r.abrupt("return",t.setValue(e.state.graph));case 8:return r.next=10,e.state.dataProviders.publish.get(Ut+o+"."+i);case 10:s=r.sent,t.setValue(s);case 12:case"end":return r.stop()}}),r)})))()}},zt={runVectorTest:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object(Ht["a"])(e,t);case 1:case"end":return r.stop()}}),r)})))()},setupDataProvider:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=new Mt,t.prev=1,n=localStorage.getItem("preferences"),null!==n){t.next=5;break}throw"not found";case 5:n=JSON.parse(n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),/not found/.test(t.t0.toString())&&(console.warn("No preferences found, writing defaults."),localStorage.setItem("preferences",JSON.stringify(e.state.originalPreferences)),n=JSON.parse(JSON.stringify(e.state.originalPreferences)));case 11:!1!==n.useLocalStorage&&!0!==n.useLocalStorage&&(n.useLocalStorage=!0),e.commit("setPreferences",n),n.useLocalStorage?e.dispatch("setDataProviders",{toc:r,publish:r,notification:r,graph:r,preferences:r}):(o=function(){e.dispatch("setConnectionState",{state:"open"})},i=function(){e.dispatch("setConnectionState",{state:"closed"})},a=function(t){if(e.commit("clearPendingMessage",t),e.state.queuedEvent){var r=JSON.parse(JSON.stringify(e.state.graph));e.state.queuedEvent.changes.forEach((function(e){Object(p["applyChange"])(r,!0,e)})),e.commit("dequeueEvent",r),e.dispatch("save")}e.state.resyncRequired&&(e.commit("clearResync"),console.warn("Resyncing due to remote state mismatch."),e.dispatch("open",{graphId:e.state.graph.id}))},s=new Bt(n.graphWSSServer,a,o,i),c=new Wt(n.graphHTTPServer),e.dispatch("setDataProviders",{toc:c,publish:s,notification:s,graph:s,preferences:r}));case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},subscribeToGraphEvents:function(e,t){var r="graph-event-"+t.graphId,n="graph-users-"+t.graphId,o="graph-mouse-"+t.graphId,i="graph-chat-"+t.graphId,a="graph-notify-"+t.graphId;e.state.dataProviders.graph.subscribe(r,(function(t){t.forEach((function(t){e.commit("remoteChangeEvents",t)}))})),e.state.dataProviders.graph.subscribe(n,(function(t){e.commit("updateGraphUsers",t)})),e.state.dataProviders.graph.subscribe(a,(function(t){if(t.eventType){if("error"===t.eventType&&(t.err=new Error(t.message)),"log"===t.eventType)return At.logger(e)[t.level](t);if(!At[t.eventType])return console.warn("No client event for recieved event type:",t.eventType);At[t.eventType](e,t)}else console.warn("Unknown remote graph event",t)})),e.state.dataProviders.graph.subscribe(o,(function(t){e.commit("updateGraphMouse",t)})),e.state.dataProviders.graph.subscribe(i,(function(t){e.commit("updateGraphChat",t)}));var s=function t(){if(setTimeout(t,e.state.mouseTransmitInterval),!(0===e.state.mouseMovements.length||Object.keys(e.state.graphUsers).length<2)){var r={channelId:o,value:{workstationId:e.state.preferences.workstationId,userName:e.state.preferences.userName,avatar:e.state.preferences.avatar,movements:e.state.mouseMovements}};e.state.dataProviders.graph.sendToChannel(o,r),e.commit("resetMouseTelemetry")}};setTimeout(s,e.state.mouseTransmitInterval),setTimeout((function(){var t=function t(){var r={channelId:n,value:{workstationId:e.state.preferences.workstationId,userName:e.state.preferences.userName,avatar:e.state.preferences.avatar}};e.state.dataProviders.graph.sendToChannel(n,r),setTimeout(t,e.state.heartBeatInterval)};t()}),500)},setConnectionState:function(e,t){e.commit("setConnectionState",t.state)},setGraphVector:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.state.graphReferences[t.vectorRef],o=e.state.graphReferences[t.hostVectorRef],i={event:t.event,vector:n,hostVector:o,context:e},e.state.scheduler.instance.url(o.url,i,"$url",null);case 4:case"end":return r.stop()}}),r)})))()},subscribePreferences:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.state.dataProviders.preferences.subscribe("preferences",(function(t){"preferences"===t.type&&e.commit("setPreferences",t.preferences)}));case 2:case"end":return t.stop()}}),t)})))()},subscribeToc:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.state.dataProviders.notification.subscribe("toc.json",(function(t){"toc"===t.type&&e.commit("setToc",t.toc)}));case 2:case"end":return t.stop()}}),t)})))()},subscribe:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.state.dataProviders.notification.subscribe(t.channelId,(function(e){t.callback(null,e)}));case 2:case"end":return r.stop()}}),r)})))()},getPublicRegistry:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=/^\.\//,o=t.url,t.parent.url&&n.test(t.url)&&(o=t.url.replace(n,t.parent.url+"/")),r.next=5,fetch(o);case 5:return i=r.sent,r.next=8,i.json();case 8:a=r.sent,a.items&&(a.url=o,e.commit("setRegistry",{parent:t.parent,toc:a,url:t.url}),a.items.forEach((function(t){"toc"===t.type&&(t.url=o,e.dispatch("getPublicRegistry",{url:t.artifact,parent:t})),t.items&&t.items.forEach((function(e){"publishedVector"!==e.type&&"publishedGraph"!==e.type||o&&n.test(e.artifact)&&(e.url=e.artifact.replace(n,o.substring(0,o.lastIndexOf("/"))+"/"))}))})));case 10:case"end":return r.stop()}}),r)})))()},download:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"graph"!==t.type){r.next=7;break}return r.next=4,e.state.dataProviders.graph.get(t.id);case 4:n=r.sent,r.next=10;break;case 7:return r.next=9,e.state.dataProviders.publish.get(Ut+t.id+"."+t.version);case 9:n=r.sent;case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r["catch"](0),e.commit("raiseError",new Error("Cannot open item to download."+r.t0)),r.abrupt("return");case 16:o=document.createElement("a"),i=t.name||"Untitled",a="data:".concat(e.state.jsonMimeType,";charset=utf-8,"),o.setAttribute("href",a+encodeURIComponent(JSON.stringify(n))),o.setAttribute("download","".concat(i,"_").concat(t.id,"_").concat(t.version,"_").concat(t.type,".json")),document.body.appendChild(o),o.click(),document.body.removeChild(o);case 24:case"end":return r.stop()}}),r,null,[[0,12]])})))()},instantiateGraph:function(e){var t=new d.a(e.state.graph,e,e.state.scheduler.state,At.logger(e));t.addEventListener("beginconnector",(function(t){At.beginconnector(e,t)})),t.addEventListener("endconnector",(function(t){At.endconnector(e,t)})),t.addEventListener("set",(function(t){At.set(e,t)})),t.addEventListener("afterSet",(function(t){At.afterSet(e,t)})),t.addEventListener("error",(function(t){At.error(e,t)})),t.addEventListener("warning",(function(t){At.warning(e,t)})),t.addEventListener("load",function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,At.load(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.addEventListener("begin",(function(t){At.begin(e,t)})),t.addEventListener("end",(function(t){At.end(e,t)})),e.commit("setScheduler",t)},graphUrl:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.state.scheduler.instance.url(t);case 1:case"end":return r.stop()}}),r)})))()},publishGraph:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state.graph,e.commit("setLoadingStatus",{key:r.id,type:"publishGraph",loading:!0}),t.next=4,e.state.dataProviders.publish.set(r.id,{graph:r,id:re()});case 4:e.commit("setLoadingStatus",{key:r.id,type:"publishGraph",loading:!1}),e.dispatch("getToc");case 6:case"end":return t.stop()}}),t)})))()},publishVector:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state.graph.vectors.find((function(e){return e.id===t})),e.commit("setLoadingStatus",{key:n.id,type:"publishVector",loading:!0}),r.next=4,e.state.dataProviders.publish.set(n.id,{vector:Object(s["a"])(Object(s["a"])({},n),{},{version:e.state.graph.version}),id:re()});case 4:e.commit("setLoadingStatus",{key:n.id,type:"publishVector",loading:!1}),e.dispatch("getToc");case 6:case"end":return r.stop()}}),r)})))()},getToc:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("setLoadingStatus",{key:"toc",type:"toc",loading:!0}),t.prev=1,t.next=4,e.state.dataProviders.toc.get("toc.json");case 4:r=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),n=t.t0,/not found/.test(n.toString())&&(console.warn("No TOC file found.  Creating empty TOC file."),r={},n=null);case 11:r||e.commit("raiseError",new Error("Cannot open toc. "+n)),e.commit("setLoadingStatus",{key:"toc",type:"toc",loading:!1}),e.commit("setToc",r);case 14:case"end":return t.stop()}}),t,null,[[1,7]])})))()},create:function(e){var t=re(),r={id:t,version:0,url:t,vectors:[],properties:{name:"",description:"",icon:"mdi-graph",createdBy:"",tags:[],createdOn:Date.now(),lastUpdate:Date.now(),height:150,width:300,startInPresentationMode:!1}};e.dispatch("save",r),e.state.preferences.useLocalStorage&&setTimeout((function(){e.dispatch("getToc")}),0)},removeArtifact:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit("setLoadingStatus",{key:t.id,type:"removeItem",loading:!0}),r.next=3,e.state.dataProviders.publish["delete"](Ut+t.id+"."+t.version);case 3:e.commit("setLoadingStatus",{key:t.id,type:"removeItem",loading:!1}),e.dispatch("getToc");case 5:case"end":return r.stop()}}),r)})))()},remove:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit("setLoadingStatus",{key:t,type:"removeGraph",loading:!0}),r.next=3,e.state.dataProviders.graph["delete"](t);case 3:e.commit("setLoadingStatus",{key:t,type:"removeGraph",loading:!1}),e.dispatch("getToc");case 5:case"end":return r.stop()}}),r)})))()},savePreferences:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("setLoadingStatus",{key:0,type:"savePreferences",loading:!0}),t.next=3,e.state.dataProviders.preferences.set("preferences",{preferences:e.state.preferences});case 3:e.commit("setLoadingStatus",{key:0,type:"savePreferences",loading:!0});case 4:case"end":return t.stop()}}),t)})))()},save:function(e,t){clearTimeout(It),It=setTimeout((function(){function r(t){var r=re(),n=JSON.stringify(e.state.graph,ee),o=W.a.CRC32(n),i={graphId:e.state.graph.id,crc:o,changes:t,id:r};Object.keys(e.state.pendingEvents).length>0&&e.state.dataProviders.graph.asyncUpdate?e.commit("queueEvent",i):(e.state.dataProviders.graph.set(e.state.graph.id,i),e.state.dataProviders.graph.asyncUpdate&&e.commit("setPendingEvent",i),e.state.dataProviders.graph.asyncUpdate,e.commit("setLoadingStatus",{key:e.state.graph.id,type:"saveGraph",loading:!1}))}void 0!==t&&e.commit("resetLoadedState",t);var n=Object(p["diff"])(JSON.parse(JSON.stringify(e.state.remoteSnapshot,ee)),JSON.parse(JSON.stringify(e.state.graph,ee)));if(n){if(e.commit("setLoadingStatus",{key:e.state.graph.id,type:"saveGraph",loading:!0}),!e.state.dataProviders.graph.asyncUpdate){var o=JSON.parse(JSON.stringify(e.state.graph,ee));e.commit("setGraphVersion",e.state.graph.version+1);var i=Object(p["diff"])(o,JSON.parse(JSON.stringify(e.state.graph,ee)));Array.prototype.push.apply(n,i)}r(n)}}),$t)},open:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.commit("setLoadingStatus",{key:t.graphId,type:"graph",loading:!0}),r.prev=1,r.next=4,e.state.dataProviders.graph.get(t.graphId);case 4:n=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),o=r.t0;case 10:n||e.commit("raiseError",new Error("Cannot open graph. "+o)),e.commit("setLoadingStatus",{key:t.graphId,type:"graph",loading:!1}),e.state.dataProviders.graph.asyncUpdate&&e.dispatch("subscribeToGraphEvents",t),e.commit("open",n),e.dispatch("instantiateGraph");case 15:case"end":return r.stop()}}),r,null,[[1,7]])})))()},addItem:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t["artifact-url"]||!e.state.preferences.graphHTTPServer){r.next=18;break}return r.prev=1,i=e.state.preferences.graphHTTPServer+t["artifact-url"],r.next=5,fetch(i);case 5:return n=r.sent,r.next=8,n.json();case 8:n=r.sent,t.url=i,n.url=i,r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](1),o=r.t0;case 16:r.next=42;break;case 18:if(!t.url){r.next=33;break}return r.prev=19,r.next=22,fetch(t.url);case 22:return n=r.sent,r.next=25,n.json();case 25:n=r.sent,r.next=31;break;case 28:r.prev=28,r.t1=r["catch"](19),o=r.t1;case 31:r.next=42;break;case 33:return r.prev=33,r.next=36,e.state.dataProviders.publish.get(Ut+t.id+"."+t.version);case 36:n=r.sent,r.next=42;break;case 39:r.prev=39,r.t2=r["catch"](33),o=r.t2;case 42:!n||o?e.commit("raiseError",new Error("Cannot open item. "+o)):(t.item=n,e.commit("publishedVector"===t.type?"addVectorItem":"addGraphItem",t));case 43:case"end":return r.stop()}}),r,null,[[1,13],[19,28],[33,39]])})))()},setLoadingStatus:function(e,t){e.commit("setLoadingStatus",t)},setDataProviders:function(e,t){e.commit("setDataProviders",t)},clearError:function(e,t){e.commit("clearError",t)},raiseError:function(e,t){e.commit("raiseError",t)},changeConnectorOrder:function(e,t){e.commit("changeConnectorOrder",t),e.dispatch("save")},deleteConnector:function(e,t){e.commit("deleteConnector",t),e.dispatch("save")},updateVectorFields:function(e,t){e.commit("updateVectorFields",t),e.dispatch("save")},createNewVector:function(e,t){e.commit("createNewVector",t),e.dispatch("save")},updateGraphProperties:function(e,t){e.commit("updateGraphProperties",t),e.dispatch("save")},updateVectorProperties:function(e,t){e.commit("updateVectorProperties",t),e.dispatch("save")},changeInputOrder:function(e,t){e.commit("changeInputOrder",t),e.dispatch("save")},changeOutputOrder:function(e,t){e.commit("changeOutputOrder",t),e.dispatch("save")},addInput:function(e,t){e.commit("addInput",t),e.dispatch("save")},addOutput:function(e,t){e.commit("addOutput",t),e.dispatch("save")},removeInput:function(e,t){e.commit("removeInput",t),e.dispatch("save")},removeOutput:function(e,t){e.commit("removeOutput",t),e.dispatch("save")},updateTemplate:function(e,t){e.commit("updateTemplate",t),e.dispatch("save")},undo:function(e){e.commit("undo"),e.dispatch("save")},redo:function(e){e.commit("redo"),e.dispatch("save")},moveHistoryPosition:function(e,t){e.commit("moveHistoryPosition",t),e.dispatch("save")},duplicateSelection:function(e){e.commit("duplicateSelection"),e.dispatch("save")},pasteVectors:function(e,t){e.commit("pasteVectors",t),e.dispatch("save")},bringForward:function(e){e.commit("bringForward"),e.dispatch("save")},sendBackward:function(e){e.commit("sendBackward"),e.dispatch("save")},bringToFront:function(e){e.commit("bringToFront"),e.dispatch("save")},sendToBack:function(e){e.commit("sendToBack"),e.dispatch("save")},groupSelected:function(e){e.commit("groupSelected"),e.dispatch("save")},ungroupSelected:function(e){e.commit("ungroupSelected"),e.dispatch("save")},deleteSelected:function(e){e.commit("deleteSelected"),e.dispatch("save")},hoveredPort:function(e,t){e.commit("hoveredPort",t)},hoveredVector:function(e,t){e.commit("hoveredVector",t)},selectConnector:function(e,t){e.commit("selectConnector",t)},togglePresentation:function(e){e.commit("setPresentation",!e.state.presentation)},toggleLock:function(e){e.commit("setLock",!e.state.locked)},hoveredConnector:function(e,t){e.commit("hoveredConnector",t)},translating:function(e,t){e.commit("translating",t)},keyup:function(e,t){e.commit("keyup",t)},keydown:function(e,t){e.commit("keydown",t)},view:function(e,t){e.commit("view",t)},mouse:function(e,t){e.commit("mouse",t)},lut:function(e,t){e.commit("lut",t)},graph:function(e,t){e.commit("graph",t),e.dispatch("save")},preferences:function(e,t){e.commit("setPreferences",t),e.dispatch("savePreferences")}},Jt=["Aggressive","Agreeable","Ambitious","Brave","Calm","Delightful","Eager","Faithful","Gentle","Happy","Jolly","Kind","Lively","Nice","Obedient","Polite","Proud","Silly","Thankful","Victorious","Witty","Wonderful","Zealous","Ancient","Brief","Early","Fast","Future","Late","Long","Modern","Old","Old-fashioned","Prehistoric","Quick","Rapid","Short","Slow","Swift","Young","Attractive","Bald","Beautiful","Chubby","Clean","Dazzling","Drab","Elegant","Fancy","Fit","Flabby","Glamorous","Gorgeous","Handsome","Long","Magnificent","Muscular","Plain","Plump","Quaint","Scruffy","Shapely","Short","Skinny","Stocky","Ugly","Unkempt","Unsightly","Alive","Better","Careful","Clever","Dead","Easy","Famous","Gifted","Hallowed","Helpful","Important","Inexpensive","Mealy","Mushy","Odd","Poor","Powerful","Rich","Shy","Tender","Unimportant","Uninterested","Vast","Wrong","Angry","Bewildered","Clumsy","Defeated","Embarrassed","Fierce","Grumpy","Helpless","Itchy","Jealous","Lazy","Mysterious","Nervous","Obnoxious","Panicky","Pitiful","Repulsive","Scary","Thoughtless","Uptight","Worried","Broad","Chubby","Crooked","Curved","Deep","Flat","High","Hollow","Low","Narrow","Refined","Round","Shallow","Skinny","Square","Steep","Straight","Wide","Big","Colossal","Fat","Gigantic","Great","Huge","Immense","Large","Little","Mammoth","Massive","Microscopic","Miniature","Petite","Puny","Scrawny","Short","Small","Tall","Teeny","Tiny","Crashing","Deafening","Echoing","Faint","Harsh","Hissing","Howling","Loud","Melodic","Noisy","Purring","Quiet","Rapping","Raspy","Rhythmic","Screeching","Shrilling","Squeaking","Thundering","Tinkling","Wailing","Whining","Whispering","Acidic","Bitter","Cool","Creamy","Delicious","Disgusting","Fresh","Greasy","Juicy","Hot","Moldy","Nutritious","Nutty","Putrid","Rancid","Ripe","Rotten","Salty","Savory","Sour","Spicy","Spoiled","Stale","Sweet","Tangy","Tart","Tasteless","Tasty","Yummy","Breezy","Bumpy","Chilly","Cold","Cool","Cuddly","Damaged","Damp","Dirty","Dry","Flaky","Fluffy","Freezing","Greasy","Hot","Icy","Loose","Melted","Prickly","Rough","Shaggy","Sharp","Slimy","Sticky","Strong","Tight","Uneven","Warm","Weak","Wet","Wooden","Abundant","Incalculable","Limited","Little"],Ft=["Dog","Puppy","Turtle","Rabbit","Parrot","Cat","Kitten","Goldfish","Mouse","Tropical fish","Hamster","Cow","Rabbit","Ducks","Shrimp","Pig","Goat","Crab","Deer","Bee","Sheep","Fish","Turkey","Dove","Chicken","Horse","Crow","Peacock","Dove","Sparrow","Goose","Stork","Pigeon","Turkey","Hawk","Bald eagle","Raven","Parrot","Flamingo","Seagull","Ostrich","Swallow","Black bird","Penguin","Robin","Swan","Owl","Woodpecker","Squirrel","Dog","Chimpanzee","Ox","Lion","Panda","Walrus","Otter","Mouse","Kangaroo","Goat","Horse","Monkey","Cow","Koala","Mole","Elephant","Leopard","Hippopotamus","Giraffe","Fox","Coyote","Hedgehong","Sheep","Deer","Giraffe","Woodpecker","Camel","Starfish","Koala","Alligator","Owl","Tiger","Bear","Blue whale","Coyote","Chimpanzee","Raccoon","Lion","Arctic wolf","Crocodile","Dolphin","Elephant","Squirrel","Snake","Kangaroo","Hippopotamus","Elk","Fox","Gorilla","Bat","Hare","Toad","Frog","Deer","Rat","Badger","Lizard","Mole","Hedgehog","Otter","Reindeer","Crab","Fish","Seal","Octopus","Shark","Seahorse","Walrus","Starfish","Whale","Penguin","Jellyfish","Squid","Lobster","Pelican","Clams","Seagull","Dolphin","Shells","Sea urchin","Cormorant","Otter","Pelican","Sea anemone","Sea turtle","Sea lion","Coral","Moth","Bee","Butterfly","Spider","Ladybird","Ladybug","Ant","Dragonfly","Fly","Mosquito","Grasshopper","Beetle","Cockroach","Centipede","Worm","Louse"];function Kt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function qt(){var e=Ft[Kt(0,Ft.length)],t=Jt[Kt(0,Jt.length)];return"".concat(t," ").concat(e)}var Yt={settingsNewVectorHelp:{title:"New Vector Help",html:"When this is switched on, creating a new vector will use the help template which contains helpful information about vectors for new users.  When off, new vectors are bare bones."},openGraph:{title:"Graph Manager",html:"Opens the Graph Manager in another window.\nGraph Manager allows you to create, open, delete and download graphs stored on your browser and on the internet."},deleteSelected:{title:"Delete Selected",html:"Deletes the currently selected vectors and connectors.<br>Keyboard Shortcut DELETE"},documentName:{title:"Document Name",html:"Name of the document.  This is the name that appears in the graph manager.  This name will also be used if this graph is published."},plastic:{title:"   ",html:'\n        <v-card>\n            <div style="text-align: center;">\n                <img style="width: 75px;" src="https://avatars1.githubusercontent.com/u/60668496?s=200&v=4"/>\n                <br>\n                <a style="color: white;" href="https://github.com/plastic-io">Plastic-io</a>\n                <br>\n                Visual Programming Language\n            </div>\n            <div style="text-align: center;">\n                Copyright &copy; 2020, plastic-io<br>\n                All rights reserved<br>\n            </div>\n        </v-card>'},undo:{title:"Undo",html:"Undoes the last action.<br>Keyboard Shortcut CTRL/CMD + Z"},redo:{title:"redo",html:"Redoes the last action.<br>Keyboard Shortcut CTRL/CMD + SHIFT + Z"},duplicate:{title:"Duplicate",html:"Duplicates the selected vectors and connectors<br>Keyboard Shortcut CTRL/CMD + SHIFT + D"},group:{title:"Group",html:"Groups the selected vectors<br>Keyboard Shortcut CTRL/CMD + G"},ungroup:{title:"Ungroup",html:"Ungroups the selected vectors<br>Keyboard Shortcut CTRL/CMD + SHIFT + G"},bringForward:{title:"Bring Forward",html:"Brings the selected vectors forward one layer<br>Keyboard Shortcut CTRL/CMD + ]"},bringToFront:{title:"Bring To Front",html:"Brings the selected vectors to the front of the stack<br>Keyboard Shortcut CTRL/CMD + SHIFT + ]"},sendBackward:{title:"Send Backward",html:"Sends the selected vectors back one layer<br>Keyboard Shortcut CTRL/CMD + ["},sendToBack:{title:"Send To Back",html:"Sends the selected vectors to the back of the stack<br>Keyboard Shortcut CTRL/CMD + SHIFT + ["},toggleHelp:{title:"Toggle Help",html:"Toggles this help overlay"},vectorProperties:{title:"Vector Properties",html:"Properties for the primary selected vector.  Only one vector can be altered at a time.  The first vector you click on, even when in a group, is the primary selected vector."},set:{title:"Vector Set Function",html:'\n<div style="height: 70vh; overflow: auto;padding: 7px;border: solid 1px rgba(0, 0, 0, 0.3);background: rgba(0, 0, 0, 0.1);border-radius: 5px;">\n    <p>Set runs when data flows into one of the edges of your vector.  This happens either when someone runs <i>scheduler.url("this-vector\'s-url")</i>,\n    or when another vector\'s edge is connected to this vector and data is passed through.</p>\n    <p>When recieving data on an edge, the set function will run, pay attention to the scoped values <i>field</i> and <i>value</i>.\n        <i>field</i> is the name of the edge on this vector data is being passed in on, while <i>value</i> is the data being passed in.</p>\n    <p>While the set function is executing, to pass data out of an edge, type <i>edges[outputName] = val;</i>.</p>\n    <p>There is no limit to the number of edges or number of times you can set an edge value.  Each time you set a value, it will cause a distinct data flow event.</p>\n    <p>Data can flow from edge to edge over time, there is no time limit.  However the domain in which you are executing might have a time limit, for example, lambda time limit is typically 5 minutes.</p>\n    <h4>Scoped Variables</h4>\n    <p>\n        <table class="help-overlay-table">\n            <tr>\n                <th>Name</th>\n                <th>Description</th>\n            </tr>\n            <tr>\n                <td>\n                    edges\n                </td>\n                <td>\n                    These edge outputs are defined in the designer.  E.x.: edges.x = "foo" sends "foo" out of the x edge.\n                    Setting edges is how data flows through the graph.\n                </td>\n            </tr>\n            <tr>\n                <td>state</td>\n                <td>Scheduler state.  Use this shared object to track your application state during execution.</td>\n            </tr>\n            <tr>\n                <td>field</td>\n                <td>The name of the input edge trigged by the remote vector edge.</td>\n            </tr>\n            <tr>\n                <td>value</td>\n                <td>The value passed to the field.</td>\n            </tr>\n            <tr>\n                <td>vector</td>\n                <td>The vector instance, contains many of the other fields.</td>\n            </tr>\n            <tr>\n                <td>cache</td>\n                <td>Vector specific runtime cache object.  Stick what you want here, it\'s yours, but it goes away when runtime is over.</td>\n            </tr>\n            <tr>\n                <td>graph</td>\n                <td>The entire graph.</td>\n            </tr>\n            <tr>\n                <td>data</td>\n                <td>Vector specific data.  This data persists between runs.  Requires graph modification to change.\n                If your domain does not allow for writes to the graph, you cannot modify this data in the set function.</td>\n            </tr>\n        </table>\n    </p>\n    <h4>Browser Context Variables</h4>\n    <p>\n        <table class="help-overlay-table">\n            <tr>\n                <th>Name</th>\n                <th>Description</th>\n            </tr>\n            <tr>\n                <td>\n                    this.component\n                </td>\n                <td>\n                    The Vue component instance.\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    this.props\n                </td>\n                <td>\n                    Mutable reactive props of the component.\n                </td>\n            </tr>\n        </table>\n    </p>\n    <h4>Server Context Variables</h4>\n    <p>\n        <table class="help-overlay-table">\n            <tr>\n                <th>Name</th>\n                <th>Description</th>\n            </tr>\n            <tr>\n                <td>\n                    this.event\n                </td>\n                <td>\n                    The AWS event.\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    this.context\n                </td>\n                <td>\n                    The AWS event context.\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    this.callback(err, response)\n                </td>\n                <td>\n                    The AWS request callback.\n                    <pre>\n// example callback\nthis.callback(null, {\n    statusCode: 200,\n    body: "Hello World!"\n});\n                    </pre>\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    this.console.(log|error|warn|info|debug)\n                </td>\n                <td>\n                    Web socket console transmitter. Sends log data to the client side Graph Editor IDE.\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    this.AWS\n                </td>\n                <td>\n                    The AWS library.\n                </td>\n            </tr>\n        </table>\n    </p>\n    <h4>When Does this run?</h4>\n    <p>The vector set function is what runs when another vector\'s edge connector outputs to this vector.</p>\n    <p>The set function also gets invoked when this vector is executed via <i>scheduler.url(vectorUrl)</i>.</p>\n    <h4>What can it do?</h4>\n    <p>The set function runs in the context that the graph was instantiated in.  This means if the graph was instantiated on the browser, the context of the graph will be the browser.\n    You only have access to the functionality in the context the graph was instantiated in.\n    This means if your graph was instantiated on the server, you cannot do things on the browser, and vice versa.</p>\n</div>\n        '},template:{title:"Vue Single File Component",html:'\n<div style="height: 70vh; overflow: auto;padding: 7px;border: solid 1px rgba(0, 0, 0, 0.3);background: rgba(0, 0, 0, 0.1);border-radius: 5px;">\n    <p>\n        When in the Graph IDE, each vector is represented by a Vue Single File Component.  This component can observe and manipulate the <i>vector</i>, <i>state</i>, and <i>scheduler</i>.\n    </p>\n    <h4>Props</h4>\n    <table class="help-overlay-table">\n        <tr>\n            <td>vector</td>\n            <td>The current vector.  You can alter the <i>data</i> property of the vector.  If your vector is in a writeable environment, changes will be persisted onto the graph. See <a href="https://plastic-io.github.io/plastic-io/modules/_vector_.html">Vector</a></td>\n        </tr>\n        <tr>\n            <td>state</td>\n            <td>Runtime state.  This is an empty object until it is manipulated by a vector.  Initial state can also be manipulated externally (off graph) by the scheduler.</td>\n        </tr>\n        <tr>\n            <td>scheduler</td>\n            <td>Graph execution scheduler.  You can observe events, manipulate state, or invoke vectors via URL. E.g.: Invoke the current vector: <i>scheduler.url(vector.url)</i>.  See <a href="https://plastic-io.github.io/plastic-io/classes/_scheduler_.scheduler.html">Scheduler</a></td>\n        </tr>\n    </table>\n    <h4>Scheduler Events</h4>\n    <p>Attach to these events using <i>scheduler.addEventListener(event, proc)</i></p>\n    <table class="help-overlay-table">\n        <tr>\n            <td>beginedge</td>\n            <td>When an edge is about to be invoked</td>\n        </tr>\n\n        <tr>\n            <td>endedge</td>\n            <td>When an edge is finished invoking</td>\n        </tr>\n\n        <tr>\n            <td>error</td>\n            <td>When an error occurs</td>\n        </tr>\n\n        <tr>\n            <td>set</td>\n            <td>When a set function is run</td>\n        </tr>\n\n        <tr>\n            <td>begin</td>\n            <td>When the scheduler starts to run</td>\n        </tr>\n\n        <tr>\n            <td>end</td>\n            <td>When the scheduler is done running</td>\n        </tr>\n\n        <tr>\n            <td>warning</td>\n            <td>When a warning occurs</td>\n        </tr>\n\n        <tr>\n            <td>load</td>\n            <td>When a remote resourse is loaded</td>\n        </tr>\n    </table>\n</div>\n        '},edge:{title:"Vector Edges",html:'\n<p>Each vector can can zero or more input and/or output edges.  Data always flow from left to right.</p>\n<h4>Names</h4>\n<p>Input and output edges are named.  Within your <i>set</i> function at runtime, you can send data to outputs using <i>edges[outputName] = val</i>.</p>\n<h4>Types</h4>\n<p>Connectors are typed by matching string names to other string names in the "type" field.  The Object type can connect to any other type.  All other types strictly connect to matching types.\n<h4>External</h4>\n<p>When an input or output is marked "external" that means it will appear as an input or output in the graph when it is published.\n<h4>Tests</h4>\n<p>Each input can have a number of tests to exercise the code to ensure it works correctly.  You can create and run the tests here.  You can also run all tests from the vector properties panel.\n'},executeSelectedVector:{title:"Execute Selected Vector",html:"This will invoke <i>Scheduler.url(selectedVector.url)</i> with the value set in <i>preferences > test</i> value as if the vector was a graph entry point."},graphProperties:{title:"Graph Properties",html:"Properties of current graph.  From here you can see all the graph properties, vectors, publishing and more."},log:{title:"Log and State",html:"Here you can see information gathered at runtime as well as see the state of your application."},history:{title:"History",html:"Undo/Redo history"},library:{title:"Library",html:"Browse local and public vector libraries."},settings:{title:"Graph IDE Settings",html:"Change the settings of the IDE"},dragResizePanel:{title:"Panel Resizer",html:"Change the size of the control panel with this grabber."},"vector-edge":{title:"Vector Edge",html:"The connection sockets between vectors"},vectorInstance:{title:"Vector Instance",html:"An instance of a vector"},mouseCoordinates:{title:"Mouse Coordinates",html:"The current location of the mouse on the graph"},selectionCoordinates:{title:"Selection Coordinates",html:"The location and size of the selection box."},selectedVectors:{title:"Selected/Total Vectors",html:"Count of selected/total vectors on the graph."},viewportLocation:{title:"Viewport Location",html:"Where on the graph you're at.  You can move the viewpoint around with the middle mouse button, or by holding down the space bar and clicking and dragging the mouse.  Click the numbers to reset to x: 0, y: 0."},viewportZoom:{title:"Viewport Zoom Level",html:"The current zoom level.  Click + to zoom in - to zoom out.  Click the number to reset to x: 100%.<br>Keyboard Shortcut CTRL/CMD + + and CTRL/CMD +"},toggleLabels:{title:"Toggle Labels",html:"Toggle input/output labels on and off"},toggleGrid:{title:"Toggle Grid",html:"Toggle the grid background on and off"},toggleLock:{title:"Toggle Lock",html:"Lock vector movement.  This allows you to manipulate controls on the vector without inadvertently moving it."},togglePresentation:{title:"Toggle Presentation",html:"Toggles presentation mode on and off.<br>  Keyboard Shortcut ALT + ` (the key above tab)"},vector:{title:"vector",html:'Vectors are the building blocks of the graph.  Vectors are built in the graph designer.  Vectors can also be published and used in other graphs.  When you publish a graph you can import it into another graph as a encapsulated vector.\n        <a href="https://plastic-io.github.io/plastic-io/modules/_vector_.html">Vector</a>'},vectorName:{title:"Vector Name",html:"Name of the vector.  When published, this will show up in the list of published vectors."},vectorDescription:{title:"Vector Description",html:"Description of the vector.  When published, this will show up in the list of published vectors."},vectorUrl:{title:"Vector URL",html:"The URL of the vector.  Running a graph happens when a vector's URL is specified in the <i>Scheduler.url(vectorUrl)</i> function."},vectorIcon:{title:"Vector Icon",html:"The icon that shows up next to the vector when it is published."},vectorAppearsInExportedGraph:{title:"Vector Appears In Published Graph",html:"When checked, the vector's Vue component will appear in the published graph.  Even when not checked, the vector's set function will still be available."},vectorLocation:{title:"Vector Location",html:"The location of the vector on the graph."},vectorPresentationLocation:{title:"Vector Presentation",html:"The location of the vector when in presentation mode."},vectorData:{title:"Vector Data",html:"Data saved on the vector by the Vue Template, Set function, or Vector designer."},vectorPublish:{title:"Publish",html:"Clicking publish will publish your vector locally.  Once published locally you can reuse your vector on other graphs, and/or upload it to a public registry."},vectorTags:{title:"Tags",html:"Help categorize and filter your vectors.  It can help to add the domain your vector executes in.  Add your own tags or use tags, or reuse popular ones."},vectorTests:{title:"Vector Tests",html:"Create tests to exercise your code and ensure your vector works."},setTemplate:{title:"setTemplate",html:"$set"},vueTemplate:{title:"vueTemplate",html:"$template"},outputs:{title:"Outputs",html:"Output ports."},inputs:{title:"Inputs",html:"Input ports."},ioOrder:{title:"Port Order",html:"The order in which the ports appear on the vector."},ioIdentity:{title:"Identity",html:"The name and type of the port, as well as export flag."},ioConnections:{title:"Connections",html:"List of connections made to this port."},ioTests:{title:"Tests",html:"Tests associated with this input."},"inputs-name":{title:"Name",html:"Name of this input."},"inputs-type":{title:"Type",html:"Type of this input."},"inputs-external":{title:"External",html:"When true, this input will appear on the published graph."},"outputs-name":{title:"Name",html:"Name of this output"},"outputs-type":{title:"Type",html:"Type of this output."},"outputs-external":{title:"External",html:"When true, this output will appear on the published graph."},connectorOrder:{title:"Connector Order",html:"The order in which the connectors are invoked on the vector output."},graph:{title:"Graph Properties",html:"Properties of the graph."},graphName:{title:"Graph Name",html:"Name of the graph.  This name will appear in the Graph Manager and published lists."},graphDescription:{title:"Graph Description",html:"Description of the graph.  This description will appear in the Graph Manager and published lists."},graphId:{title:"Graph ID",html:"The unique UUIDv4 of the graph generated when the graph was created."},graphIcon:{title:"Graph icon.",html:"This icon will appear in the Graph Manager and published lists."},graphVersion:{title:"Graph event source Version",html:"<p>Each time a change is made to the graph, the version increases by 1.</p>\n        <p>Graph data is event sourced.  This means the graph data is not stored as state but rather a list of events.  Event sourcing provides a number of features.</p>\n        <ul>\n            <li>Versioning</li>\n            <li>State rewind and fast-forward</li>\n            <li>Event idempotency</li>\n            <li>Small, asyncronous updates</li>\n            <li>Multi user</li>\n            <li>Eventual consistency</li>\n        </ul>\n        "},graphPresentation:{title:"Presentation",html:"Here, you can toggle having presentation mode turn on automatically when the graph loads.  You can set the height and width of the graph during presentation.  This data can be passed to internal vectors."},graphMeta:{title:"Graph meta data",html:"Meta data about the graph you can set."},graphVectorList:{title:"Graph Vector List",html:"List of vectors on the graph.  You can select vectors from here."},graphPublishButton:{title:"Graph Publish Button",html:"Clicking here will publish the graph"},graphTags:{title:"Graph Tags",html:"Help categorize and filter your graphs.  It can help to add the domain your graph executes in.  Add your own tags or use tags, or reuse popular ones."},graphIOList:{title:"External Input Output List",html:"This is a list of inputs and outputs that are flagged exportable."},logs:{title:"Logs and State",html:"Here you can find execution logs and scheduler state."},logState:{title:"State",html:"The scheduler state."},logErrors:{title:"Errors",html:"Errors logged during scheduler execution."},logWarnings:{title:"Warnings",html:"Warnings logged during scheduler execution."},logInfo:{title:"Info",html:"Info messages logged during scheduler execution."},logStateRefresh:{title:"State Refresh",html:"Click here to force a refresh of the state view."},logClear:{title:"Clear Log",html:"Clear the log"},historyPanel:{title:"History Panel",html:"Session history"},importPanel:{title:"Vector Library",html:"Collection of local and public vectors"},importLocal:{title:"Local Vectors",html:"Vectors you've created and imported."},importPublic:{title:"Public Vectors",html:"Vectors in public registries"},importLocalSearch:{title:"Local Search",html:"Search your local collection of published vectors and graphs."},importLocalList:{title:"Local list",html:"List of your published vectors and graphs."},importPublicRegistryList:{title:"Registry List",html:"List of public registries."},importPublicTopLevel:{title:"Vector categories",html:"This is the top level of vector categories of the repository."},importPublicSecondLevel:{title:"Vector subcategories",html:"Public Vectors."},importPublicList:{title:"Public Vectors",html:"List of public vectors."},settingsGridSize:{title:"Grid size",html:"The size of the grid."},settingsSnapToGrid:{title:"Snap to grid",html:"When on, vectors will snap to the grid when moved."},settingsShowGrid:{title:"Show grid",html:"When on, the grid is visible."},settingsShowLabels:{title:"Show labels",html:"When on, vector input and output labels are always visible."},settingsDebug:{title:"Debug",html:"When on, additional detailed information in collected at runtime.  This will incur a performance penalty when turned on because a large amount of data is collected and stored in memory."},showConnectorView:{title:"Show Connector Info",html:"Toggle runtime connector info display on and off."},vectorId:{title:"Vector ID",html:"The UUIDv4 of the vector.  This uniquely identifies the vector."},graphUrl:{title:"Graph URL",html:"URL of the graph.  This value sets what endpoint this graph controls."}},Zt=r("5935"),Xt="production",Qt=Object({NODE_ENV:"production",BASE_URL:"/graph-editor/"}).VUE_APP_GRAPH_HTTP_SERVER,er=Object({NODE_ENV:"production",BASE_URL:"/graph-editor/"}).VUE_APP_GRAPH_WSS_SERVER,tr="console.info(value)",rr="<template>\n    <div>\n        New Vector\n    </div>\n</template>\n<script>\nexport default {\n    props: {\n        vector: Object,\n        state: Object,\n    }\n}\n<\/script>\n<style>\n</style>\n",nr=qt(),or={userName:nr,userId:0,avatar:"https://api.adorable.io/avatars/50/"+nr.replace(/ /g,"")+".png",workstationId:Et.newId(),newVectorHelp:!0,showLabels:!0,debug:!1,useLocalStorage:!0,graphHTTPServer:Qt,graphWSSServer:er,newVectorOffset:{x:100,y:100,z:0},defaultNewSetTemplate:tr,defaultNewVueTemplate:rr,snapToGrid:!0,gridSize:10,appearance:{theme:"light",helpColor:"blue",showGrid:!0,selectionRectColor:"lightBlue",boundingRectColor:"shades",connectors:{dragDeadZone:10,controlFillStyle:"blue",strokeStyle:"pink",selectedStrokeStyle:"amber",hoverStrokeStyle:"deepPurple",watchStrokeStyle:"orange",activityStrokeStyle:"indigo",errorStrokeStyle:"red",lineWidth:1}}},ir=function(){return{strict:!1,state:{testOutput:[],ownEvents:[],testsVisible:!1,showRemoteMouseMovements:!0,mouseMovements:[],mouseTransmitInterval:1e3,heartBeatInterval:5e4,queuedEvent:null,resyncRequired:!1,eventQueue:[],pendingEvents:{},graphUserMouse:{},graphUserChat:{},graphUsers:{},connectionState:"closed",NODE_ENV:Xt,createdGraphId:null,helpTopics:Yt,log:[],pathPrefix:"/graph-editor/",ioTypes:["Object","String","Boolean","Number","null","undefined"],tags:["any","browser","lambda","cli"],graphReferences:{},registry:{},artifacts:{},publicGraphRegistries:["https://unpkg.com/@plastic-io/registry@1.0.0","https://unpkg.com/@plastic-io/registry@1.0.1","https://unpkg.com/@plastic-io/registry@1.0.2","https://unpkg.com/@plastic-io/registry@1.0.3"],vectorMimeType:"application/json+plastic-io",jsonMimeType:"application/json",remoteEvents:[],remoteSnapshot:{},showHelp:!1,panelVisibility:!0,graphSnapshot:null,graph:null,loading:{},dataProviders:{publish:null,graph:null,session:null},error:null,showError:!1,connectorWarn:null,scheduler:{state:{},errors:{},instance:null},presentation:!1,locked:!1,historyPosition:0,vectorZCounter:0,selectedGroups:[],boundingRect:{visible:!1,x:0,y:0,height:0,width:0},selectionRect:{visible:!1,x:0,y:0,height:0,width:0},groupBounds:{minX:0,minY:0,maxX:0,maxY:0},addingConnector:null,movingConnector:null,primaryGroup:null,movingVectors:[],selectedConnectors:[],groupVectors:[],selectedVector:null,selectedVectors:[],errorConnectors:[],watchConnectors:[],activityConnectors:{},hoveredConnector:null,hoveredVector:null,hoveredPort:null,mouse:{lmb:!1,rmb:!1,mmb:!1,x:0,y:0},luts:{},translating:{},keys:{},view:{x:0,y:0,k:1},toc:null,events:[],preferences:or,originalPreferences:JSON.parse(JSON.stringify(or))},actions:zt,mutations:Object(s["a"])(Object(s["a"])({},Et),{},{updateField:Zt["c"]}),getters:{getGraphReference:function(e){return function(t){return e.graphReferences[t]}},getArtifactByUrl:function(e){return function(t){return e.artifacts[t]||console.warn("Cannot find artifact ",t),e.artifacts[t]}},getVectorById:function(e){return function(t){return e.graph.vectors.find((function(e){return e.id===t}))}},getLoadingStatus:function(e){return function(t,r){var n={count:0,events:[],loading:!1};return e.loading[t][r].forEach((function(e){n.count+=1,n.events.push({time:e.time,event:e.event,loading:e.loading}),n.loading=e.loading})),n}},getField:Zt["a"]}}},ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view",{staticClass:"view"})},sr=[],cr=n["default"].extend({name:"App",components:{},data:function(){return{}}}),lr=cr,pr=r("2877"),ur=Object(pr["a"])(lr,ar,sr,!1,null,null,null),dr=ur.exports,hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"graph-editor"},[e.graph?[!e.presentation&&e.panelVisibility?r("v-system-bar",{ref:"topBar",staticStyle:{"z-index":"2","white-space":"nowrap",top:"0",position:"fixed",width:"100vw"}},[r("div",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{title:"Graph ID"}},[r("v-icon",{attrs:{"help-topic":"openGraph",title:"Show open graph dialog (^ + O)"},on:{click:e.openGraph}},[e._v(" mdi-folder ")]),r("span",{attrs:{"help-topic":"documentName"}},[e._v(" "+e._s(e.graph.properties.name||"Untitled")+" ")])],1),r("v-spacer",{staticStyle:{"margin-right":"5%"}}),r("span",{attrs:{"help-topic":"plastic"}},[e._v("Plastic-IO")]),r("v-spacer"),r("graph-users"),r("span",[r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{disabled:0===e.historyPosition||0===e.events.length,"help-topic":"undo",title:"Undo last action (^ + Z)"},on:{click:e.undo}},[e._v("mdi-undo-variant")]),r("v-icon",{attrs:{disabled:e.historyPosition===e.events.length,"help-topic":"redo",title:"Redo last undone action (^ + Shift + Z)"},on:{click:e.redo}},[e._v("mdi-redo-variant")]),r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{disabled:0===e.selectedVectors.length,"help-topic":"duplicate",title:"Duplicate selected vectors (^ + Shift + D)"},on:{click:e.duplicateSelection}},[e._v("mdi-content-duplicate")]),r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{disabled:e.selectedVectors.length<2,"help-topic":"group",title:"Group (^ + G)"},on:{click:e.groupSelected}},[e._v("mdi-group")]),r("v-icon",{attrs:{disabled:null===e.primaryGroup,"help-topic":"ungroup",title:"Ungroup (^ + Shift + G)"},on:{click:e.ungroupSelected}},[e._v("mdi-ungroup")]),r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{"help-topic":"bringForward",title:"Bring forward (^ + ])"},on:{click:e.bringForward}},[e._v("mdi-arrange-bring-forward")]),r("v-icon",{attrs:{"help-topic":"bringToFront",title:"Bring to front (^ + Shift + ])"},on:{click:e.bringToFront}},[e._v("mdi-arrange-bring-to-front")]),r("v-icon",{attrs:{"help-topic":"sendBackward",title:"Send backward (^ + [)"},on:{click:e.sendBackward}},[e._v("mdi-arrange-send-backward")]),r("v-icon",{attrs:{"help-topic":"sendToBack",title:"Send to back (^ + Shift + [)"},on:{click:e.sendToBack}},[e._v("mdi-arrange-send-to-back")]),r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{"help-topic":"deleteSelected",title:"Delete selected (delete)",disabled:0===e.selectedVectors.length&&0===e.selectedConnectors},on:{click:e.deleteSelected}},[e._v("mdi-delete")]),r("v-divider",{staticStyle:{margin:"5px"},attrs:{vertical:""}}),r("v-icon",{attrs:{"help-topic":"toggleHelp",color:e.showHelp?"info":"",title:"Help"},on:{click:e.toggleHelp}},[e._v("mdi-help-circle-outline")])],1)],1):e._e(),r("div",{style:e.showHelp?"pointer-events: none;":""},[!e.presentation&&e.panelVisibility?r("control-panel",{ref:"panel"}):e._e()],1),r("div",{class:e.presentation?"":"graph-container",style:e.graphContainerStyle},[r("graph-canvas",{class:e.translating&&e.mouse.lmb?"no-select":"",attrs:{showGrid:e.preferences.appearance.showGrid&&!e.presentation}})],1),!e.presentation&&e.panelVisibility?r("v-system-bar",{ref:"bottomBar",staticClass:"no-select bottom-system-bar",staticStyle:{position:"absolute","z-index":"2",bottom:"0",width:"100vw"}},[r("div",{staticStyle:{width:"110px",cursor:"crosshair"},attrs:{"help-topic":"mouseCoordinates",title:"Mouse Coordinates"}},[r("v-icon",[e._v("mdi-crosshairs-gps")]),e._v(e._s(Math.floor((e.mouse.x-e.view.x)/e.view.k))+" : "+e._s(Math.floor((e.mouse.y-e.view.y)/e.view.k))+" ")],1),r("div",{staticStyle:{width:"240px",cursor:"crosshair"},attrs:{"help-topic":"selectionCoordinates",title:"Selection Coordinates"}},[r("v-icon",[e._v("mdi-selection")]),e._v(" x: "+e._s(Math.floor(e.selectionRect.x))+" y: "+e._s(Math.floor(e.selectionRect.x))+" h: "+e._s(Math.floor(e.selectionRect.height))+" w: "+e._s(Math.floor(e.selectionRect.width))+" ")],1),r("v-spacer"),r("div",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{"help-topic":"selectedVectors",title:"Selected Vectors / Total Vectors"}},[r("v-icon",[e._v("mdi-network")]),e._v(e._s(e.selectedVectors.length)+"/"+e._s(e.graph.vectors.length)+" ")],1),r("div",{staticStyle:{"padding-right":"10px",cursor:"crosshair"},attrs:{"help-topic":"viewportLocation",title:"Viewport localtion"},on:{click:e.resetView}},[r("v-icon",[e._v("mdi-crosshairs-gps")]),e._v("x:"+e._s(e.view.x)+" y:"+e._s(e.view.y)+" ")],1),r("v-icon",{staticStyle:{cursor:"pointer"},attrs:{title:"Zoom Out (^ + -)"},on:{click:e.zoomOut}},[e._v("mdi-magnify-minus-outline")]),r("div",{staticStyle:{"padding-right":"5px",cursor:"crosshair"},attrs:{"help-topic":"viewportZoom",title:"Zoom Level"},on:{click:e.resetZoom}},[e._v(" "+e._s((100*e.view.k).toFixed(2))+"% ")]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{title:"Zoom In (^ + +)"},on:{click:e.zoomIn}},[e._v("mdi-magnify-plus-outline")]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{"help-topic":"showConnectorView",title:"Show Connector Information",color:e.showConnectorView?"info":""},on:{click:function(t){e.showConnectorView=!e.showConnectorView}}},[e._v("mdi-information-outline")]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{"help-topic":"toggleLabels",title:"Toggle Input/Output Labels",color:e.preferences.showLabels?"info":""},on:{click:e.toggleLabels}},[e._v(e._s(e.preferences.showLabels?"mdi-label":"mdi-label-off"))]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{title:"Toggle Grid Visibility","help-topic":"toggleGrid",color:e.preferences.appearance.showGrid?"info":""},on:{click:e.toggleGrid}},[e._v("mdi-grid")]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{title:"Toggle Lock","help-topic":"toggleLock",color:e.locked?"info":""},on:{click:e.toggleLock}},[e._v(e._s(e.locked?"mdi-lock":"mdi-lock-open"))]),r("v-icon",{staticStyle:{"padding-right":"10px",cursor:"pointer"},attrs:{title:"Toggle Presentation (Alt + `)","help-topic":"togglePresentation",color:e.presentation?"info":""},on:{click:e.togglePresentation}},[e._v(e._s(e.presentation?"mdi-presentation-play":"mdi-presentation"))])],1):e._e()]:e._e(),r("v-bottom-sheet",{attrs:{"hide-overlay":"",inset:"",timeout:2e3,"multi-line":""},model:{value:e.presentationWarning,callback:function(t){e.presentationWarning=t},expression:"presentationWarning"}},[r("v-alert",[r("v-row",[r("v-col",[e._v("Press Alt + ` to toggle Presentation Mode")])],1)],1)],1),r("v-snackbar",{attrs:{timeout:0,top:!e.graph},model:{value:e.localShowError,callback:function(t){e.localShowError=t},expression:"localShowError"}},[r("v-alert",{attrs:{type:"error",prominent:""}},[r("v-row",[r("v-col",[r("h2",[e._v("An error has occred on a vector")])])],1),r("v-row",[r("v-col",[e._v(e._s(e.localErrorMessage))])],1),r("v-row",[e.graph?r("v-col",{staticClass:"shrink"},[r("v-btn",{on:{click:e.clearError}},[e._v("That Sucks")])],1):e._e()],1)],1)],1),e.graph||e.localShowError?e._e():r("v-progress-linear",{attrs:{indeterminate:""}}),e.showHelp?r("help-overlay",{staticStyle:{"z-index":"14"},on:{close:e.toggleHelp}}):e._e(),e.presentation?e._e():r("style",{tag:"component"},[e._v(" html, body { overflow: hidden; } ")]),r("graph-mouse"),e.showConnectorView?r("connector-view",{attrs:{activity:e.hoveredActivity},on:{close:function(t){e.showConnectorView=!1}}}):e._e(),r("v-bottom-sheet",{attrs:{"hide-overlay":"",inset:""},model:{value:e.showAnnoyingHelpMessage,callback:function(t){e.showAnnoyingHelpMessage=t},expression:"showAnnoyingHelpMessage"}},[r("v-alert",{attrs:{type:"info",prominent:"",border:"left",color:"primary","colored-border":"",elevation:"2",middle:"",icon:"mdi-help-circle-outline"}},[r("v-row",[r("v-col",[r("h2",[e._v("Welcome to the Plastic-IO Graph Editor")])])],1),r("v-row",[r("v-col",[e._v(" Click the "),r("v-icon",[e._v("mdi-help-circle-outline")]),e._v(" in the upper right corner for contextual help. ")],1)],1),r("v-row",[r("v-col",[e._v(" To start building, select "),r("v-icon",[e._v("mdi-library")]),e._v(" on the left, then click and drag an item from the library onto your graph. ")],1)],1),r("v-row",[r("v-col",[e._v(" Or double click on the canvas to create a new vector. ")])],1),r("v-row",[r("v-col",[r("i",{staticStyle:{"font-size":"0.8rem"}},[e._v("• To disable this message, click on "),r("v-icon",[e._v("mdi-cogs")]),e._v(' settings, then click the "Graph" section, then turn off "Show Help Messages".')],1)])],1)],1)],1),r("test-view")],2)},vr=[],fr=(r("277d"),r("ade3")),mr=r("53ca"),gr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.localGraph?r("div",{key:e.localVersion,style:e.graphCanvasStyle,on:{drop:function(t){return e.drop(t)},dragover:function(t){return e.dragOver(t)}}},[r("div",{class:e.graphCanvasClasses,style:"dark"===e.preferences.appearance.theme?"":"filter: invert(1);"}),e._l(e.connectors,(function(e){return r("edge-connector",{key:e.connector.id,attrs:{connector:e.connector,edge:e.edge,vector:e.vector}})})),e._l(e.localGraph.vectors,(function(t){return r("graph-vector",{key:t.id,style:e.presentation?{order:t.properties.presentation.z}:{},attrs:{vector:t,graph:e.localGraph}})})),e.selectionRect.visible&&!e.presentation?r("div",{staticClass:"selection-rect",style:e.selectionRectStyle}):e._e(),e.selectedVectors.length>0&&!e.presentation?r("div",{staticClass:"bounding-rect",style:e.boundingRectStyle}):e._e()],2):e._e()},br=[],yr=(r("a15b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.presentation?e._e():r("div",{class:e.connectorClass,style:e.connectorStyle},[r("canvas",{ref:"canvas",attrs:{height:e.height*e.ratio,width:e.width*e.ratio}})])}),wr=[],xr=r("2f62"),Sr=(r("cb29"),r("b4ad")),kr=r.n(Sr),_r=r("fcf4"),Cr={x:0,y:0,k:1},Or=[];function Vr(e){var t=e.ctx;function r(e){return _r["a"][e].base}var n=r(e.preferences.appearance.connectors.strokeStyle)||"blue";function o(e){t.beginPath();var r=e.points;t.moveTo(r[0].x,r[0].y),t.bezierCurveTo(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y),t.stroke(),t.closePath()}function i(e,r,n,o,i,a){t.beginPath(),t.fillStyle=a,t.arc(e,r,n,o,i),t.fill(),t.closePath()}function a(){var s={x:300,y:300},c=document.getElementById("vector-"+e.vector.id);if(!c)return setTimeout(a,100);var l=e.preferences.appearance.connectors.dragDeadZone,p=!!e.translating.mouse&&(Math.abs(e.mouse.x-e.translating.mouse.x)>l||Math.abs(e.mouse.y-e.translating.mouse.y)>l),u=e.movingConnector&&e.movingConnector.connector.id===e.connector.id&&p||e.addingConnector&&e.addingConnector.connector.id===e.connector.id,d=document.getElementById("vector-output-".concat(e.output.vector.id,"-").concat(e.output.field.name)),h=e.input.vector?document.getElementById("vector-input-".concat(e.input.vector.id,"-").concat(e.input.field.name)):null;if(!u&&!h||!d)return setTimeout(a,100);var v=d.getBoundingClientRect(),f=u?{x:0,y:0}:h.getBoundingClientRect(),m={x:f.x,y:f.y},g={x:v.x,y:v.y};m.x=(m.x-e.view.x)/e.view.k,m.y=(m.y-e.view.y)/e.view.k,g.x=(g.x-e.view.x)/e.view.k,g.y=(g.y-e.view.y)/e.view.k;var b=(e.mouse.x-e.view.x)/e.view.k,y=(e.mouse.y-e.view.y)/e.view.k,w=Math.min(m.x,g.x)-s.x/2,x=Math.min(m.y,g.y)-s.y/2,S=Math.max(m.x,g.x)-Math.min(m.x,g.x)+s.x,k=Math.max(m.y,g.y)-Math.min(m.y,g.y)+s.y;u&&(w=Math.min(w,b-50),x=Math.min(x,y),S=Math.max(S,S+Math.abs(b)),k=Math.max(k,k+Math.abs(y))),e.x=w,e.y=x,e.width=S,e.height=k;var _={x:g.x,y:g.y},C={x:u?b:m.x,y:u?y:m.y};t.clearRect(0,0,e.width,e.height),t.translate(-e.x,-e.y),t.strokeStyle=n,t.lineWidth=e.preferences.appearance.connectors.lineWidth;var O={x:0,y:5},V=new kr.a({x:_.x+O.x,y:_.y+O.y},{x:_.x+200+O.x,y:_.y+O.y},{x:C.x-200-O.x,y:C.y+O.y},{x:C.x-O.x,y:C.y+O.y});o(V);var P=V.get(0),T=V.get(1),I=V.get(.5);i(P.x,P.y,5,0,2*Math.PI,r(e.preferences.appearance.connectors.controlFillStyle)||"blue"),i(T.x,T.y,5,0,2*Math.PI,r(e.preferences.appearance.connectors.controlFillStyle)||"blue"),i(I.x,I.y,5,0,2*Math.PI,r(e.preferences.appearance.connectors.controlFillStyle)||"blue"),t.setTransform(1,0,0,1,0,0);var E=V.length(),j=V.getLUT(E/2);Cr.x===e.view.x&&Cr.x===e.view.x&&Cr.k===e.view.k||(Cr.x=e.view.x,Cr.y=e.view.y,Cr.k=e.view.k,Or.length=0),-1===Or.indexOf(e.connector.id)&&(e.$store.dispatch("lut",{connector:e.connector,input:e.input,output:e.output,vector:e.vector,lut:j}),Or.push(e.connector.id))}-1!==e.watchConnectors.map((function(e){return e.id})).indexOf(e.connector.id)&&(n=r(e.preferences.appearance.connectors.watchStrokeStyle)||"blue"),e.active&&(n=r(e.preferences.appearance.connectors.activityStrokeStyle)||"blue"),-1!==e.errorConnectors.map((function(e){return e.id})).indexOf(e.connector.id)&&(n=r(e.preferences.appearance.connectors.errorStrokeStyle)||"blue"),-1!==e.selectedConnectors.map((function(e){return e.id})).indexOf(e.connector.id)&&(n=r(e.preferences.appearance.connectors.selectedStrokeStyle)||"blue"),e.hoveredConnector&&e.hoveredConnector.connector.id===e.connector.id&&(n=r(e.preferences.appearance.connectors.hoverStrokeStyle)||"blue"),a()}var Pr={name:"edge-connector",props:{connector:u["Connector"],vector:u["Vector"],edge:u["Edge"]},data:function(){return{durations:[],duration:0,activeConnector:null,localGraph:null,connections:null,sourceRect:null,targetRect:null,source:null,target:null,height:20,width:20,x:0,y:0,ctx:null,ratio:1,calls:0}},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({presentation:function(e){return e.presentation},historyPosition:function(e){return e.historyPosition},addingConnector:function(e){return e.addingConnector},graphSnapshot:function(e){return e.graphSnapshot},graph:function(e){return e.graph},view:function(e){return e.view},mouse:function(e){return e.mouse},translating:function(e){return e.translating},preferences:function(e){return e.preferences},selectedConnectors:function(e){return e.selectedConnectors},hoveredConnector:function(e){return e.hoveredConnector},errorConnectors:function(e){return e.errorConnectors},watchConnectors:function(e){return e.watchConnectors},activityConnectors:function(e){return e.activityConnectors},movingConnector:function(e){return e.movingConnector}})),{},{activityInfo:function(){return this.activityConnectors[this.connector.id]},watched:function(){return-1!==this.watchConnectors.map((function(e){return e.id})).indexOf(this.connector.id)},selected:function(){return-1!==this.selectedConnectors.map((function(e){return e.id})).indexOf(this.connector.id)},errored:function(){return-1!==this.errorConnectors.map((function(e){return e.id})).indexOf(this.connector.id)},hovered:function(){return this.hoveredConnector&&this.hoveredConnector.connector.id===this.connector.id},output:function(){var e=this,t=this.vector.properties.outputs.find((function(t){return e.edge.field===t.name})),r=this.vector.properties.outputs.indexOf(t);return{index:r,vector:this.vector,field:t}},input:function(){var e=this,t=(this.localGraph||this.graph).vectors.find((function(t){return t.id===e.connector.vectorId})),r=t?t.properties.inputs.find((function(t){return e.connector.field===t.name})):null,n=t?t.properties.inputs.indexOf(r):null;return{index:n,vector:t,field:r}},connectorClass:function(){return null===this.activeConnector?"edge-connector":this.activeConnector?"edge-connector edge-active":"edge-connector edge-inactive"},connectorInfoStyle:function(){return{position:"fixed",width:"500px",left:(this.mouse.x-this.view.x)/this.view.k+10+"px",top:(this.mouse.y-this.view.y)/this.view.k+10+"px"}},connectorStyle:function(){return{display:this.presentation?"none":"block",height:this.height*this.ratio+"px",width:this.width*this.ratio+"px",left:this.x+"px",top:this.y+"px"}}}),watch:{activeConnector:function(){this.redraw()},activityConnectors:{handler:function(){var e=this.connector.id,t=this.activityConnectors[e];t&&(t.start?this.activeConnector=!0:this.activeConnector=!1)},deep:!0},graphSnapshot:{handler:function(){this.localGraph=this.graphSnapshot,this.redraw()},deep:!0},graph:{handler:function(){this.localGraph=this.graph,this.redraw()},deep:!0},translating:{handler:function(){this.redraw()},deep:!0},movingConnector:{handler:function(){this.redraw()},deep:!0},mouse:{handler:function(){(this.movingConnector||this.addingConnector)&&this.redraw()},deep:!0},selectedConnectors:{handler:function(){this.redraw()}},historyPosition:{handler:function(){this.redraw()}},hoveredConnector:{handler:function(){this.redraw()}},vector:{handler:function(){var e={input:this.input,output:this.output};Object(p["diff"])(this.connections,e)&&(this.connections=JSON.parse(JSON.stringify(e)),this.redraw())},deep:!0}},methods:{redraw:function(){var e=this;this.$nextTick((function(){e.presentation||(e.calls+=1,e.setContext(),Vr(e))}))},setContext:function(){this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.scale(this.ratio,this.ratio)}},updated:function(){this.redraw()},mounted:function(){this.localGraph=this.graph,this.connections=JSON.parse(JSON.stringify({input:this.input,output:this.output})),this.setContext(),this.redraw()}},Tr=Pr,Ir=(r("7097"),Object(pr["a"])(Tr,yr,wr,!1,null,null,null)),Er=Ir.exports,jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"vector-root"},[e.broken?r("v-alert",{attrs:{type:"error"}},[r("pre",[e._v(e._s(e.broken))])]):e._e(),e.loaded[e.vectorComponentName]&&e.visible?r("div",{key:e.localVector.id,ref:"vector",staticClass:"vector",style:e.vectorStyle,attrs:{"x-vector-id":e.localVector.id}},[e.errors.length>0?e._l(e.errors,(function(t,n){return r("div",{key:n},[r("v-alert",{staticClass:"vector-error",staticStyle:{"pointer-events":"all",cursor:"text"},attrs:{type:"error"}},[r("div",{staticStyle:{"text-align":"right"}},[e.errors.length>1?r("i",{staticStyle:{"font-weight":"bold","padding-left":"10px"}},[e._v("(+ "+e._s(e.errors.length-1)+" more errors)")]):e._e()]),r("div",{style:e.errors.length>1?"margin-top: -24px;":"",on:{click:function(r){return e.clearSchedulerErrorItem({key:e.localVector.id,item:t})}}},[r("v-btn",{staticClass:"ma-3"},[e._v(" Dismiss ")]),r("v-btn",{staticClass:"ma-3",on:{click:function(t){return e.clearSchedulerError({key:e.localVector.id})}}},[e._v(" Dismiss All ")])],1),r("v-divider"),r("pre",{staticClass:"no-graph-target"},[e._v(e._s(t.stack))]),r("v-divider")],1)],1)})):e._e(),e.hostVector?e._e():r("div",{staticClass:"vector-inputs"},e._l(e.inputs,(function(t){return r("vector-field",{key:"input_"+t.name,attrs:{field:t,vector:e.localVector,type:"input"}})})),1),r("div",{class:e.translating&&e.mouse.lmb?"no-select":"",attrs:{"help-topic":"vectorInstance",id:"vector-"+e.localVector.id}},[e.localVector.linkedGraph?r("div",{staticStyle:{display:"flex"}},e._l(e.localVector.linkedGraph.graph.vectors,(function(t){return r("graph-vector",{key:t.key,style:{order:t.properties.presentation.z},attrs:{vector:t,hostVector:e.localVector}})})),1):r("vector-"+e.vectorComponentName,e._g(e._b({tag:"component",attrs:{vector:e.localVector,scheduler:e.scheduler,state:e.$store.state.scheduler.state,vectorProps:e.vectorProps},on:{dataChange:e.dataChange,set:e.set}},"component",e.vectorProps[e.localVector.__contextId],!1),e.vectorEvents[e.localVector.__contextId])),e._l(e.styles,(function(t,n){return r("style",{key:n,tag:"component",domProps:{innerHTML:e._s(t)}})}))],2),e.hostVector?e._e():r("div",{staticClass:"vector-outputs"},e._l(e.outputs,(function(t){return r("vector-field",{key:"output_"+t.name,attrs:{field:t,vector:e.localVector,type:"output"}})})),1)],2):e._e()],1)},Rr=[],Lr=r("b85c"),Gr=r("25c9"),Nr=r("852e"),Dr=r("f23f"),Mr=r("bd25"),Br=r("68c0"),Wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.presentation?e._e():r("div",{style:e.connectorWarn?"cursor: not-allowed;":"",on:{mouseover:e.hoverPort}},[r("div",{key:e.preferences.showLabels,ref:"edge",staticClass:"vector-field",style:e.vectorFieldStyle,attrs:{"help-topic":"vector-edge",title:e.field.name,id:"vector-"+e.type+"-"+e.vector.id+"-"+e.field.name}}),e.preferences.showLabels||e.isHovered?r("div",{class:"output"===e.type?"vector-field-output":"vector-field-input",style:e.vectorNameStyle},[e._v(" "+e._s(e.field.name)+" ")]):e._e()])},Hr=[],Ur={name:"vector-field",computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({connectorWarn:function(e){return e.connectorWarn},presentation:function(e){return e.presentation},hoveredPort:function(e){return e.hoveredPort},preferences:function(e){return e.preferences}})),{},{isHovered:function(){return this.hoveredPort&&this.hoveredPort.vector.id===this.vector.id&&this.hoveredPort.field.name===this.field.name&&this.type===this.hoveredPort.type},vectorFieldStyle:function(){return{background:(this.type,"var(--v-info-lighten2)"),outline:this.isHovered?"solid 1px var(--v-info-lighten2)":void 0}},vectorNameStyle:function(){return{outline:this.isHovered?"solid 1px var(--v-info-lighten2)":void 0}},edge:function(){var e=this;return this.vector.edges.find((function(t){return t.field===e.field.name}))}}),methods:{hoverPort:function(){this.$store.dispatch("hoveredPort",{field:this.field,vector:this.vector,edge:this.edge,type:this.type})}},props:{field:Object,vector:u["Vector"],type:String}},$r=Ur,Ar=(r("84cc"),Object(pr["a"])($r,Wr,Hr,!1,null,null,null)),zr=Ar.exports,Jr={name:"graph-vector",components:{VectorField:zr},props:{vector:u["Vector"],hostVector:u["Vector"],graph:u["Graph"]},watch:{vectorProps:{handler:function(){var e=Object(p["diff"])(this.localVectorDataSnapshot,this.vector.data);this.localVectorDataSnapshot=JSON.parse(JSON.stringify(this.vector.data)),e&&this.updateVectorData({vectorId:this.vector.id,data:this.vector.data})},deep:!0},localVector:{handler:function(){var e=Object(p["diff"])(this.localVectorDataSnapshot,this.vector.data);this.localVectorDataSnapshot=JSON.parse(JSON.stringify(this.vector.data)),e&&this.updateVectorData({vectorId:this.vector.id,data:this.vector.data})},deep:!0},hoveredVector:{handler:function(){this.localHoveredVector=this.hoveredVector}},selectedVectors:{handler:function(){this.localSelectedVectors=this.selectedVectors},deep:!0},vector:{handler:function(){var e=Object(p["diff"])(this.localVectorSnapshot.template.vue,this.vector.template.vue);this.localVector=this.vector,this.localVectorSnapshot=JSON.parse(JSON.stringify(this.vector,ee)),e&&(this.styles=[],this.broken=null,this.compileTemplate(this.localVector.id,this.localVector.template.vue,!0))},deep:!0}},data:function(){return{broken:!1,longLoadingTimer:null,longLoading:!1,loaded:{},localHoveredVector:null,localSelectedVectors:[],vectorEvents:{},vectorProps:{},dragged:null,localVector:null,localVectorSnapshot:null,localVectorDataSnapshot:null,template:null,stateVersion:0,compileCount:0,contextId:null,artifactVectors:{},styles:[]}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.styles=[],e.broken=null,e.localVector=e.vector,e.updateContextId(),e.bindVectorEvents(e.localVector),e.bindVectorProps(e.localVector),e.localVectorSnapshot=JSON.parse(JSON.stringify(e.vector,ee)),e.localVectorDataSnapshot=JSON.parse(JSON.stringify(e.vector.data)),e.localSelectedVectors=e.selectedVectors,e.longLoadingTimer=setTimeout((function(){e.longLoading=!0}),500),t.next=12,e.importRoot(e.localVector);case 12:case"end":return t.stop()}}),t)})))()},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["c"])(["getVectorById"])),Object(xr["d"])(["clearSchedulerErrorItem","clearSchedulerError","setArtifact","updateVectorData","clearArtifact"])),{},{setLinkedVector:function(e){console.log("setLinkedVector",e)},bindVectorEvents:function(e){var t=this,r={};e.properties.outputs.forEach((function(e){r[e.name]=function(r){t.scheduler.instance.url(t.vector.url,r,e.name,t.hostVector)}})),this.vectorEvents[e.__contextId]=r},bindVectorProps:function(e){var t={};e.properties.inputs.forEach((function(e){t[e.name]=void 0})),this.vectorProps[e.__contextId]=t},updateContextId:function(){this.$store.commit("setGraphReferences",Object(fr["a"])({},this.localVector.__contextId,this))},dataChange:function(e){this.updateVectorData({vectorId:this.vector.id,data:e})},set:function(e){this.scheduler.instance.url(this.vector.url,e,"$url",this.hostVector)},artifactKey:function(e){if(e)return e.replace(/\/|\./g,"_").replace(/@/g,"_at_").replace(/:/g,"_col_")},importRoot:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.artifact){r.next=30;break}if(!/^https?:\/\//.test(e.artifact)){r.next=16;break}return r.prev=2,r.next=5,fetch(e.artifact);case 5:return o=r.sent,r.next=8,o.json();case 8:n=r.sent,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),t.$store.dispatch("raiseError",new Error("Cannot load remote resource. ".concat(r.t0,".")));case 14:r.next=19;break;case 16:return r.next=18,t.dataProviders.publish.get(e.artifact);case 18:n=r.sent;case 19:if(i={key:e.artifact,value:n},t.setArtifact(i),!n.vectors){r.next=26;break}return r.next=24,t.importGraph(n);case 24:r.next=28;break;case 26:return r.next=28,t.importVector(n,t.artifactKey(e.artifact));case 28:r.next=34;break;case 30:return a={key:e.id,value:e},t.setArtifact(a),r.next=34,t.compileTemplate(e.id,e.template.vue);case 34:case"end":return r.stop()}}),r,null,[[2,11]])})))()},importGraph:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=Object(Lr["a"])(e.vectors),r.prev=1,n.s();case 3:if((o=n.n()).done){r.next=9;break}return i=o.value,r.next=7,t.importRoot(i);case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),n.e(r.t0);case 14:return r.prev=14,n.f(),r.finish(14);case 17:t.loaded[t.vectorComponentName]=!0;case 18:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()},importVector:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.artifact=r.vector.artifact,e.url=r.vector.url,e.artifactlId=e.id,e.id=r.vector.id,e.properties.x=r.vector.properties.x,e.properties.y=r.vector.properties.y,e.properties.z=r.vector.properties.z,e.properties.presentation.x=r.vector.properties.presentation.x,e.properties.presentation.y=r.vector.properties.presentation.y,e.properties.presentation.z=r.vector.properties.presentation.z,n.next=12,r.compileTemplate(t,e.template.vue);case 12:case"end":return n.stop()}}),n)})))()},compileTemplate:function(e,t,r){var o=this;if(r&&(this.loaded[e]=void 0),void 0===this.loaded[e]){var i,a,s,c=new Dr["DomHandler"]((function(t,r){var n=this;t||r.forEach((function(t){if("script"===t.tagName){if(void 0!==i)return void n.$store.dispatch("error",new Error("Vector ".concat(e," contains a Vue template with more than one script tag.")));i=Object(Mr["getInnerHTML"])(t)}if("template"===t.tagName){if(void 0!==a)return void n.$store.dispatch("error",new Error("Vector ".concat(e," contains a Vue template with more than one template tag.")));a=Object(Mr["getInnerHTML"])(t)}if("style"===t.tagName){if(void 0!==s)return void n.$store.dispatch("error",new Error("Vector ".concat(e," contains a Vue template with more than one style tag.")));s=Object(Mr["getInnerHTML"])(t)}}))})),l=new Nr["Parser"](c,{decodeEntities:!0,recognizeSelfClosing:!0});l.write(t),l.end(),void 0===i&&(i="export default {}");var p=i.replace("export default","const c = {}; c.comp = ")+";c.comp.template = `"+a+"`;c.comp.name = 'vector-"+e+"';window.Vue.component(c.comp.name, c.comp);",u=Object(Gr["parseScript"])(p,{globalReturn:!0,module:!0,next:!0}),d=Object(Br["generate"])(u),h=document.createElement("script");h.crossorigin="anonymous",h.async=!0,h.onerror=function(e){console.error("Script load error",e),o.broken=e},window.Vue=n["default"],h.type="module",this.$el.appendChild(h),this.loaded[e]=!1;try{h.innerHTML=d}catch(f){this.$store.dispatch("raiseError",new Error("Vector ".concat(e," contains an error in the Vue script. ").concat(f,".")))}var v=function t(){if(n["default"].options.components["vector-"+e]){o.loaded[e]=!0,h.parentNode&&h.parentNode.removeChild(h);var r=!0;if(Object.keys(o.loaded).forEach((function(e){o.loaded[e]||(r=!1)})),r){clearTimeout(o.longLoadingTimer),o.broken=!1;try{o.$forceUpdate()}catch(f){console.error("Vector ".concat(e," error:"),f),o.broken=f}}}else setTimeout(t,10)};v(),this.styles.push(s)}}}),computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({presentation:function(e){return e.presentation},dataProviders:function(e){return e.dataProviders},state:function(e){return e.scheduler.state},scheduler:function(e){return e.scheduler},hoveredVector:function(e){return e.hoveredVector},selectedVectors:function(e){return e.selectedVectors},mouse:function(e){return e.mouse},translating:function(e){return e.translating},view:function(e){return e.view}})),{},{vectorComponentName:function(){var e=this.artifactKey(this.vector.artifact)||this.vector.id;return e},visible:function(){return!(this.presentation&&!this.localVector.properties.appearsInPresentation)},errors:function(){return this.scheduler.errors[this.localVector.id]||[]},inputs:function(){return this.localVector.properties.inputs},outputs:function(){return this.localVector.properties.outputs},vectorStyle:function(){var e=this,t=this.localHoveredVector&&this.localHoveredVector.id===this.localVector.id,r=!!this.localSelectedVectors.find((function(t){return t.id===e.localVector.id})),n=t&&r,o="transparent";return this.presentation?o="transparent":n?o="var(--v-info-lighten4)":r?o="var(--v-info-lighten3)":t&&(o="var(--v-info-lighten2)"),this.presentation||this.hostVector?this.localVector.properties.positionAbsolute?{position:"absolute",outline:"solid 1px "+o,left:this.localVector.properties.presentation.x+"px",top:this.localVector.properties.presentation.y+"px",zIndex:this.localVector.properties.presentation.z}:{outline:"solid 1px "+o}:{position:"absolute",outline:"solid 1px "+o,left:this.localVector.properties.x+"px",top:this.localVector.properties.y+"px",zIndex:this.localVector.properties.z}}})},Fr=Jr,Kr=(r("8eb7"),Object(pr["a"])(Fr,jr,Rr,!1,null,null,null)),qr=Kr.exports,Yr={name:"graph-canvas",components:{GraphVector:qr,EdgeConnector:Er},props:{showGrid:Boolean},data:function(){return{localVersion:0,dragged:null,localGraph:null}},mounted:function(){this.$vuetify.theme.dark="dark"===this.preferences.appearance.theme,this.localGraph=this.graphSnapshot},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["d"])(["addDroppedItem"])),Object(xr["b"])(["createNewVector","addItem","importItem"])),{},{dragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="link"},drop:function(e){var t=this;if(e.dataTransfer.files.length>0){e.preventDefault();for(var r=function(r){var n=e.dataTransfer.files[r];if(n.type!==t.jsonMimeType)return"continue";var o=new FileReader;o.onload=function(r){var o=JSON.parse(r.target.result);t.addDroppedItem(Object(s["a"])({x:e.clientX,y:e.clientY},{id:re(),lastUpdate:n.lastModified,description:n.name,name:n.name.split("_")[0],icon:o.properties.icon,item:o,version:o.version,type:"droppedFile"}))},o.readAsText(n)},n=0;n<e.dataTransfer.files.length;n+=1)r(n)}else{var o=e.dataTransfer.getData(this.jsonMimeType),i=e.dataTransfer.getData(this.vectorMimeType);if(i){var a=JSON.parse(i);if("newVector"===a.type)return void this.createNewVector({x:e.clientX,y:e.clientY});this.addItem(Object(s["a"])({x:e.clientX,y:e.clientY},a))}else if(o){var c=JSON.parse(o);this.importItem({item:c})}}}}),watch:{graphSnapshot:{handler:function(){var e=Object(p["diff"])(this.localGraph,this.graphSnapshot);e&&(this.localGraph=JSON.parse(JSON.stringify(this.graphSnapshot)),this.localGraph.vectors.length)},deep:!0}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["c"])({getLoadingStatus:"getLoadingStatus"})),Object(xr["e"])({loading:function(e){return e.loading},presentation:function(e){return e.presentation},jsonMimeType:function(e){return e.jsonMimeType},vectorMimeType:function(e){return e.vectorMimeType},historyPosition:function(e){return e.historyPosition},addingConnector:function(e){return e.addingConnector},selectionRect:function(e){return e.selectionRect},boundingRect:function(e){return e.boundingRect},selectedVectors:function(e){return e.selectedVectors},graphSnapshot:function(e){return e.graphSnapshot},view:function(e){return e.view},preferences:function(e){return e.preferences}})),{},{selectionRectStyle:function(){return{borderWidth:.5/this.view.k+"px",left:this.selectionRect.x+"px",top:this.selectionRect.y+"px",width:this.selectionRect.width+"px",height:this.selectionRect.height+"px",borderColor:_r["a"][this.preferences.appearance.selectionRectColor].base}},boundingRectStyle:function(){return{borderWidth:.5/this.view.k+"px",left:this.boundingRect.x+"px",top:this.boundingRect.y+"px",width:this.boundingRect.width+"px",height:this.boundingRect.height+"px",borderColor:_r["a"][this.preferences.appearance.boundingRectColor].base}},connectors:function(){var e=[];return this.localGraph.vectors.forEach((function(t){t.edges.forEach((function(r){r.connectors.forEach((function(n){e.push({connector:n,edge:r,vector:t})}))}))})),this.addingConnector&&e.push({connector:this.addingConnector.connector,edge:this.addingConnector.edge,vector:this.addingConnector.vector}),e},graphCanvasStyle:function(){return this.presentation?{display:"flex"}:{transform:"translate(".concat(this.view.x,"px, ").concat(this.view.y,"px) scale(").concat(this.view.k,")")}},graphCanvasClasses:function(){var e=[];return this.presentation||(e.push("graph-canvas-container"),this.showGrid&&e.push("grid")),e.join(" ")}})},Zr=Yr,Xr=(r("11e3"),Object(pr["a"])(Zr,gr,br,!1,null,null,null)),Qr=Xr.exports,en=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-navigation-drawer",{key:e.localVersion,ref:"nav",staticClass:"nav-drawer",style:e.navStyle,attrs:{"disable-resize-watcher":"",permanent:"",app:"",flat:"",height:"calc(100vh - 48px)"}},[r("v-container",{staticClass:"flex-d align-stretch pa-0",staticStyle:{"z-index":"1",overflow:"hidden"},attrs:{"fill-height":""}},[e.panel?r("v-card",{staticClass:"main-nav",staticStyle:{overflow:"hidden"},attrs:{elevation:"0"}},[e.selectedVector&&"properties"===e.panel?r("v-tabs",{style:{width:this.navWidth-this.iconGutterSize+"px"},model:{value:e.vectorPanelTabs,callback:function(t){e.vectorPanelTabs=t},expression:"vectorPanelTabs"}},[r("v-tab",{key:"properties"},[r("v-icon",[e._v(" mdi-vector-point ")])],1),r("v-tab",{key:"edge"},[r("v-icon",{attrs:{"help-topic":"edge"}},[e._v(" mdi-video-input-component ")])],1),r("v-tab",{key:"template"},[r("v-icon",{attrs:{"help-topic":"template"}},[e._v(" mdi-vuejs ")])],1),r("v-tab",{key:"set"},[r("v-icon",{attrs:{"help-topic":"set"}},[e._v(" mdi-lambda ")])],1),r("v-tab",{key:"tests"},[r("v-icon",{attrs:{"help-topic":"tests"}},[e._v(" mdi-flask ")])],1),r("v-tab-item",{key:"properties"},[r("vector-properties",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}})],1),r("v-tab-item",{key:"edge"},[r("edge-properties",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}})],1),r("v-tab-item",{key:"template"},[r("template-editor",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}})],1),r("v-tab-item",{key:"set"},[r("set-editor",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}})],1),r("v-tab-item",{key:"tests"},[r("vector-tests",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}})],1)],1):e._e(),"history"===e.panel?r("history-panel",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}}):e._e(),"graph"===e.panel?r("graph-properties",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}}):e._e(),"log"===e.panel?r("graph-log",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}}):e._e(),"library"===e.panel?r("import-panel",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}}):e._e(),"settings"===e.panel?r("editor-settings",{style:e.gutterStyle,attrs:{width:this.navWidth-this.iconGutterSize}}):e._e(),!e.selectedVector&&/properties$|set$|template$|edge$/.test(e.panel)?r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("i",[e._v("No Vectors Selected")])])],1):e._e()],1):e._e(),r("v-card",{staticClass:"icon-nav",staticStyle:{"border-left":"solid 1px hsla(0,0%,100%,.12)"},attrs:{tile:"",elevation:"0"}},[r("div",{staticStyle:{"margin-top":"5px"}},[r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"vectorProperties",title:"Vector Properties",disabled:!e.selectedVector,color:"properties"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("properties")}}},[e._v(" mdi-vector-point ")]),r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"graphProperties",title:"Graph Properties",color:"graph"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("graph")}}},[e._v(" mdi-graph-outline ")]),r("v-divider")],1),r("div",{staticClass:"control-panel-bottom",staticStyle:{position:"absolute",bottom:"5px"}},[r("v-divider",{staticStyle:{"margin-bottom":"15px","margin-right":"5px"}}),r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"log",title:"Graph Logs and State",color:"log"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("log")}}},[e._v(" mdi-format-list-text ")]),r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"history",title:"History of changes for this session",color:"history"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("history")}}},[e._v(" mdi-history ")]),r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"library",title:"Import new vectors and graphs into this graph",color:"library"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("library")}}},[e._v(" mdi-library ")]),r("v-icon",{staticClass:"control-panel-icon",attrs:{"help-topic":"settings",title:"View and edit the settings of the graph IDE",color:"settings"===e.panel?"info":""},on:{click:function(t){return e.selectPanel("settings")}}},[e._v(" mdi-cogs ")]),r("v-icon",{staticClass:"control-panel-icon",staticStyle:{cursor:"ew-resize"},attrs:{"help-topic":"dragResizePanel",title:"Use this slider to resize the control panel for some tabs",color:"secondary"},on:{mousedown:e.startPanelDrag}},[e._v(" mdi-drag-vertical ")])],1)])],1)],1)},tn=[],rn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"pa-2",staticStyle:{height:"calc(100vh - 51px)"},attrs:{flat:""}},[r("v-card-title",[r("v-icon",{attrs:{left:"","help-topic":"historyPanel"}},[e._v("mdi-history")]),e._v(" History ")],1),r("v-card",[r("v-card-text",[r("v-list",{staticStyle:{height:"calc(100vh - 171px)","overflow-y":"auto"}},e._l(e.localEvents,(function(t,n){return r("v-list-item",{key:n,style:e.historyColor(n),on:{click:function(t){e.moveHistoryPosition(-(e.historyPosition-n))}}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(e.getIcon(t.name)))])],1),r("v-list-item-content",{staticStyle:{"font-size":"14px"}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1)},nn=[],on={name:"history-panel",methods:Object(s["a"])(Object(s["a"])({historyColor:function(e){var t="";return this.historyPosition===e?t="background: var(--v-info-base);":e>this.historyPosition&&(t="opacity: 0.45;"),t}},Object(xr["b"])(["moveHistoryPosition"])),{},{getIcon:function(e){return{Start:"mdi-flag-variant",Nudge:"mdi-move-resize-variant",Duplicate:"mdi-content-duplicate",Paste:"mdi-content-paste","Send Forward":"mdi-arrange-bring-forward","Send Backward":"mdi-arrange-send-backward","Bring to Front":"mdi-arrange-bring-to-front","Send to Back":"mdi-arrange-send-to-back",Group:"mdi-group",Ungroup:"mdi-ungroup",Delete:"mdi-delete","Write to Graph":"mdi-pencil","Move Connector":"mdi-vector-point","Add Connector":"mdi-shape-circle-plus","Move Vectors":"mdi-vector-polygon","Change Input Order":"mdi-swap-vertical","Change Output Order":"mdi-swap-vertical","Add Input":"mdi-ray-start-arrow","Add Output":"mdi-ray-end-arrow","Remove Input":"mdi-minus-circle-outline","Remove Output":"mdi-minus-circle-outline","Update Vector Properties":"mdi-pencil","Update Graph Properties":"mdi-pencil","Reorder Connectors":"mdi-sync","Delete Connector":"mdi-delete","Rename IO":"mdi-pencil","Update Template":"mdi-pencil","Toggle Vector Presentation":"mdi-presentation"}[e]||"mdi-pencil"}}),computed:Object(s["a"])({localEvents:function(){return[{name:"Start"}].concat(Object(l["a"])(this.events))}},Object(xr["e"])({historyPosition:function(e){return e.historyPosition},events:function(e){return e.events}}))},an=on,sn=Object(pr["a"])(an,rn,nn,!1,null,null,null),cn=sn.exports,ln=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.vector?r("v-card",{staticStyle:{height:"calc(100vh - 98px)","overflow-y":"auto"},attrs:{flat:""}},[r("v-card-title",[r("v-icon",{attrs:{left:"","help-topic":"vector"}},[e._v("mdi-network-outline")]),e._v(" Vector Properties "),r("v-spacer"),r("v-menu",{attrs:{flat:"",bottom:"",color:"secondary","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({},Object.assign({},n)),[e._v(" "+e._s(e.vector.artifact?"mdi-link":"mdi-information-outline")+" ")])]}}],null,!1,3465110589)},[e.vector.artifact?e._e():r("v-card",[r("v-card-text",[r("i",[e._v("Vector Id: "+e._s(e.vector.id))])])],1),e.vector.artifact?r("v-alert",{staticClass:"ma-0",staticStyle:{width:"35vw"},attrs:{type:"warning",prominent:"",border:"left"}},[e._v(" This vector did not originate on this graph. "),r("i",[e._v("Vector artifact: "+e._s(e.vector.artifact))])]):e._e()],1)],1),r("v-card-text",{staticClass:"ma-0"},[r("v-expansion-panels",{attrs:{flat:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("General")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"help-topic":"vectorName",label:"Name"},model:{value:e.vector.properties.name,callback:function(t){e.$set(e.vector.properties,"name",t)},expression:"vector.properties.name"}}),r("v-textarea",{attrs:{"help-topic":"vectorDescription",label:"Description"},model:{value:e.vector.properties.description,callback:function(t){e.$set(e.vector.properties,"description",t)},expression:"vector.properties.description"}}),r("v-text-field",{attrs:{"help-topic":"vectorUrl",label:"URL",value:e.vector.url},on:{change:function(t){return e.updateVectorUrl(t)}}}),r("v-text-field",{attrs:{disabled:"","help-topic":"vectorId",label:"ID",value:e.vector.id},on:{change:function(t){return e.updateVectorUrl(t)}}}),r("v-combobox",{attrs:{"help-topic":"vectorIcon","prepend-icon":e.vector.properties.icon,"persistent-hint":"",hint:"https://cdn.materialdesignicons.com/4.9.95/",eager:!0,title:"Icon",items:e.icons},model:{value:e.vector.properties.icon,callback:function(t){e.$set(e.vector.properties,"icon",t)},expression:"vector.properties.icon"}}),r("v-checkbox",{attrs:{"help-topic":"vectorAppearsInExportedGraph",label:"Appears In Exported Graph"},model:{value:e.vector.properties.appearsInExportedGraph,callback:function(t){e.$set(e.vector.properties,"appearsInExportedGraph",t)},expression:"vector.properties.appearsInExportedGraph"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Location")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0",attrs:{"help-topic":"vectorLocation"}},[r("v-text-field",{attrs:{label:"x"},model:{value:e.vector.properties.x,callback:function(t){e.$set(e.vector.properties,"x",e._n(t))},expression:"vector.properties.x"}}),r("v-text-field",{attrs:{label:"y"},model:{value:e.vector.properties.y,callback:function(t){e.$set(e.vector.properties,"y",e._n(t))},expression:"vector.properties.y"}}),r("v-text-field",{attrs:{label:"z"},model:{value:e.vector.properties.z,callback:function(t){e.$set(e.vector.properties,"z",e._n(t))},expression:"vector.properties.z"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Presentation")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0",attrs:{"help-topic":"vectorPresentationLocation"}},[r("v-checkbox",{attrs:{label:"Appears In Presentation"},model:{value:e.vector.properties.appearsInPresentation,callback:function(t){e.$set(e.vector.properties,"appearsInPresentation",t)},expression:"vector.properties.appearsInPresentation"}}),r("v-checkbox",{attrs:{label:"Position Absolutely"},model:{value:e.vector.properties.positionAbsolute,callback:function(t){e.$set(e.vector.properties,"positionAbsolute",t)},expression:"vector.properties.positionAbsolute"}}),r("v-text-field",{attrs:{label:"x"},model:{value:e.vector.properties.presentation.x,callback:function(t){e.$set(e.vector.properties.presentation,"x",e._n(t))},expression:"vector.properties.presentation.x"}}),r("v-text-field",{attrs:{label:"y"},model:{value:e.vector.properties.presentation.y,callback:function(t){e.$set(e.vector.properties.presentation,"y",e._n(t))},expression:"vector.properties.presentation.y"}}),r("v-text-field",{attrs:{label:"z"},model:{value:e.vector.properties.presentation.z,callback:function(t){e.$set(e.vector.properties.presentation,"z",e._n(t))},expression:"vector.properties.presentation.z"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Vector Data")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0",attrs:{"help-topic":"vectorData"}},[r("v-textarea",{attrs:{label:"Data"},model:{value:e.vector.data,callback:function(t){e.$set(e.vector,"data",t)},expression:"vector.data"}})],1)],1)],1)],1),e.vector.artifact?e._e():r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Publishing")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-3"},[r("v-btn",{attrs:{color:"info","help-topic":"vectorPublish"},on:{click:e.publish}},[e._v(" Publish"),r("br"),e._v("Vector "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-share-variant ")])],1),r("v-combobox",{attrs:{"help-topic":"vectorTags",items:e.tags,chips:"","deletable-chips":"",clearable:"",multiple:"","hide-selected":"",label:"Tags","persistent-hint":"",hint:"Which domains this resource works in","prepend-icon":"mdi-tag-multiple-outline"},model:{value:e.vector.properties.tags,callback:function(t){e.$set(e.vector.properties,"tags",t)},expression:"vector.properties.tags"}})],1)],1)],1)],1),e.vector.artifact?e._e():r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Testing")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-3"},[r("v-btn",{attrs:{color:"info",block:"","help-topic":"vectorTests"},on:{click:e.runTest}},[e._v(" Run Tests "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-flask ")])],1)],1)],1)],1)],1)],1)],1)],1):e._e()},pn=[],un=r("94ed"),dn={name:"vector-properties",methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["publishVector","runVectorTest","moveHistoryPosition"])),{},{runTest:function(){this.runVectorTest(this.vector)},hyphenateProperty:function(e){var t="";return Array.prototype.forEach.call(e,(function(e){e!==e.toUpperCase()?t+=e:t+="-"+e.toLowerCase()})),t},updateVectorUrl:function(e){this.vector.url=e},publish:function(){this.publishVector(this.vector.id)}}),data:function(){return{vector:null,panel:0}},watch:{"vector.url":{handler:function(){this.$store.commit("updateVectorUrl",{vectorId:this.vector.id,url:this.vector.url})},deep:!0},"vector.properties":{handler:function(){this.$store.dispatch("updateVectorProperties",{vectorId:this.vector.id,properties:JSON.parse(JSON.stringify(this.vector.properties)),version:this.graph.version})},deep:!0},selectedVector:function(){this.selectedVector&&(this.vector=JSON.parse(JSON.stringify(this.selectedVector)))}},mounted:function(){this.selectedVector&&(this.vector=JSON.parse(JSON.stringify(this.selectedVector)))},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({tags:function(e){return e.tags},graph:function(e){return e.graph},selectedVector:function(e){return e.selectedVector},historyPosition:function(e){return e.historyPosition},events:function(e){return e.events}})),{},{icons:function(){return Object.keys(un).map(this.hyphenateProperty)}})},hn=dn,vn=Object(pr["a"])(hn,ln,pn,!1,null,null,null),fn=vn.exports,mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.graph?r("v-card",{staticStyle:{height:"calc(100vh - 48px)","overflow-y":"auto"},attrs:{flat:""}},[r("v-card-title",[r("v-icon",{attrs:{left:"","help-topic":"graph"}},[e._v("mdi-graph-outline")]),e._v(" Graph Properties ")],1),r("v-card-text",{staticClass:"ma-0"},[r("v-expansion-panels",{attrs:{flat:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("General")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"help-topic":"graphName",label:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-textarea",{attrs:{"help-topic":"graphDescription",label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-text-field",{attrs:{"help-topic":"graphUrl",label:"URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),r("v-text-field",{attrs:{"help-topic":"graphId",label:"Graph Id",disabled:"",value:e.id}}),r("v-combobox",{attrs:{"help-topic":"graphIcon","prepend-icon":e.graph.properties.icon,"persistent-hint":"",hint:"https://cdn.materialdesignicons.com/4.9.95/",eager:!0,title:"Icon",items:e.icons},model:{value:e.icon,callback:function(t){e.icon=t},expression:"icon"}}),r("v-text-field",{attrs:{"help-topic":"graphVersion",label:"Version",disabled:"",value:e.version}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Presentation")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0",attrs:{"help-topic":"graphPresentation"}},[r("v-switch",{attrs:{label:"Start In Presentation Mode"},model:{value:e.startInPresentationMode,callback:function(t){e.startInPresentationMode=t},expression:"startInPresentationMode"}}),r("v-text-field",{attrs:{label:"Height"},model:{value:e.height,callback:function(t){e.height=e._n(t)},expression:"height"}}),r("v-text-field",{attrs:{label:"Width"},model:{value:e.width,callback:function(t){e.width=e._n(t)},expression:"width"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Meta")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0",attrs:{"help-topic":"graphMeta"}},[r("v-text-field",{attrs:{label:"Created By"},model:{value:e.createdBy,callback:function(t){e.createdBy=t},expression:"createdBy"}}),r("v-text-field",{attrs:{label:"Created On"},model:{value:e.createdOn,callback:function(t){e.createdOn=t},expression:"createdOn"}}),r("v-text-field",{attrs:{label:"Last Update"},model:{value:e.lastUpdate,callback:function(t){e.lastUpdate=t},expression:"lastUpdate"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Vectors")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-list",{attrs:{"help-topic":"graphVectorList"}},[r("v-list-item-group",{attrs:{color:"primary"},model:{value:e.vectorList,callback:function(t){e.vectorList=t},expression:"vectorList"}},e._l(e.graph.vectors,(function(t){return r("v-list-item",{key:"select_"+t.id,on:{click:function(r){return e.selectVector(t.id)}}},[r("v-list-item-icon",[r("v-icon",{domProps:{textContent:e._s(t.properties.icon)}})],1),r("v-list-item-content",[r("v-list-item-title",{attrs:{title:t.id},domProps:{textContent:e._s(t.name||"Untitled Vector")}})],1)],1)})),1)],1)],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Publishing")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-btn",{staticStyle:{"margin-top":"10px"},attrs:{color:"info","help-topic":"graphPublishButton"},on:{click:e.publishGraph}},[e._v(" Publish"),r("br"),e._v("Graph "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-share-variant ")])],1),r("v-combobox",{attrs:{"help-topic":"graphTags",items:e.domainTags,"persistent-hint":"",hint:"Which domains this resource works in",chips:"","deletable-chips":"",clearable:"",multiple:"","hide-selected":"",label:"Tags","prepend-icon":"mdi-tag-multiple-outline"},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("External Graph IO")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:"","help-topic":"graphIOList"}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-list",{staticStyle:{width:"110%"}},[e._l(["inputs","outputs"],(function(t){return[r("v-list-group",{key:t,attrs:{value:"true","prepend-icon":"inputs"===t?"mdi-power-socket":"mdi-power-plug"},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-title",[e._v(e._s(t))])]},proxy:!0}],null,!0)},[e._l(e.externalIO[t],(function(t){return[e._v(" "+e._s(t.field.name)+" : "+e._s(t.vector.properties.name||t.vector.id)+" ")]}))],2)]}))],2)],1)],1)],1)],1)],1)],1)],1):e._e()},gn=[],bn={name:"graph-properties",methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["publishGraph","save"])),Object(xr["d"])(["selectVector"])),{},{hyphenateProperty:function(e){var t="";return Array.prototype.forEach.call(e,(function(e){e!==e.toUpperCase()?t+=e:t+="-"+e.toLowerCase()})),t}}),data:function(){return{panel:0,vectorList:null}},watch:{"graph.properties":{handler:function(){this.save()},deep:!0}},computed:Object(s["a"])(Object(s["a"])({icons:function(){return Object.keys(un).map(this.hyphenateProperty)}},Object(Zt["b"])(["graph.properties.startInPresentationMode","graph.properties.name","graph.properties.icon","graph.properties.description","graph.properties.createdOn","graph.properties.lastUpdate","graph.properties.height","graph.properties.width","graph.properties.createdBy","graph.properties.tags","graph.version","graph.id","graph.url"])),{},{externalIO:function(){var e={inputs:[],outputs:[]};return this.graph.vectors.forEach((function(t){["inputs","outputs"].forEach((function(r){t.properties[r].forEach((function(n){n.external&&e[r].push({vector:t,field:n})}))}))})),e}},Object(xr["e"])({graph:function(e){return e.graph},domainTags:function(e){return e.tags}}))},yn=bn,wn=Object(pr["a"])(yn,mn,gn,!1,null,null,null),xn=wn.exports,Sn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticStyle:{"overflow-y":"hidden"},attrs:{flat:""}},[r("v-card-title",[r("v-icon",{attrs:{left:"","help-topic":"logs"}},[e._v("mdi-format-list-text")]),e._v(" Logs and State ")],1),r("v-card-subtitle",[e._v(" State monitoring, execution and error logs. ")]),r("v-card-text",{staticStyle:{"overflow-y":"hidden"}},[r("v-tabs",{attrs:{"hide-slider":""}},[r("v-tab",{attrs:{"help-topic":"logState"}},[e._v(" State ")]),r("v-tab",{attrs:{"help-topic":"logErrors"}},[e._v(" Errors "),e.getLogByType("error").length?r("v-btn",{staticStyle:{"margin-left":"5px"},attrs:{fab:"","x-small":"",right:"",color:"error"}},[e._v(e._s(e.getLogByType("error").length))]):e._e()],1),r("v-tab",{attrs:{"help-topic":"logWarnings"}},[e._v(" Warnings "),e.getLogByType("warn").length?r("v-btn",{staticStyle:{"margin-left":"5px"},attrs:{fab:"","x-small":"",right:"",color:"warning"}},[e._v(e._s(e.getLogByType("warn").length))]):e._e()],1),r("v-tab",{attrs:{"help-topic":"logInfo"}},[e._v(" Info "),e.getLogByType("info").length?r("v-btn",{staticStyle:{"margin-left":"5px"},attrs:{fab:"","x-small":"",right:"",color:"info"}},[e._v(e._s(e.getLogByType("info").length))]):e._e()],1),e.preferences.debug?r("v-tab",{attrs:{"help-topic":"logDebug"}},[e._v(" Debug "),e.getLogByType("debug").length?r("v-btn",{staticStyle:{"margin-left":"5px"},attrs:{fab:"","x-small":"",right:"",color:"info"}},[e._v(e._s(e.getLogByType("debug").length))]):e._e()],1):e._e(),e.preferences.debug?r("v-tab",{attrs:{"help-topic":"logEdges"}},[e._v(" Edges "),e.getLogByType("edge").length?r("v-btn",{staticStyle:{"margin-left":"5px"},attrs:{fab:"","x-small":"",right:"",color:"info"}},[e._v(e._s(e.getLogByType("edge").length))]):e._e()],1):e._e(),r("v-tab-item",{staticStyle:{height:"calc(100vh - 195px)",width:"calc(100% - 4px)"}},[r("v-card",{attrs:{flat:""}},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{staticStyle:{cursor:"pointer"},attrs:{"help-topic":"logStateRefresh",title:"Clear"},on:{click:e.$forceUpdate}},[e._v("mdi-refresh")])],1),r("v-card-text",{staticStyle:{"padding-top":"20px",height:"calc(100vh - 195px)",overflow:"auto"}},[r("div",{style:"dark"===e.preferences.appearance.theme?"filter: invert(1);":""},[r("json-viewer",{staticStyle:{background:"transparent","margin-left":"-25px"},attrs:{copyable:"",value:e.state}})],1)])],1)],1),r("v-tab-item",{staticClass:"log-tab"},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{attrs:{"help-topic":"logClear",title:"Clear"},on:{click:function(t){return e.clearLog("error")}}},[e._v("mdi-notification-clear-all")])],1),r("br"),e._l(e.getLogByType("error"),(function(t,n){return r("div",{key:n},[r("div",[e._v(e._s(t._t))]),r("pre",[e._v(e._s(t.event.err.stack))]),r("v-divider")],1)}))],2),r("v-tab-item",{staticClass:"log-tab"},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{attrs:{"help-topic":"logClear",title:"Clear"},on:{click:function(t){return e.clearLog("warn")}}},[e._v("mdi-notification-clear-all")])],1),r("br"),e._l(e.getLogByType("warn"),(function(t,n){return r("div",{key:n},[r("div",[e._v(e._s(t._t))]),r("pre",[e._v(e._s(t.event.err.stack))]),r("v-divider")],1)}))],2),r("v-tab-item",{staticClass:"log-tab"},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{attrs:{"help-topic":"logClear",title:"Clear"},on:{click:function(t){return e.clearLog("info")}}},[e._v("mdi-notification-clear-all")])],1),r("br"),e._l(e.getLogByType("info"),(function(t,n){return r("div",{key:n},[r("div",[e._v(e._s(t._t))]),r("pre",[e._v(e._s(t.event))]),r("v-divider")],1)}))],2),e.preferences.debug?r("v-tab-item",{staticClass:"log-tab"},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{attrs:{"help-topic":"logClear",title:"Clear"},on:{click:function(t){return e.clearLog("debug")}}},[e._v("mdi-notification-clear-all")])],1),r("br"),e._l(e.getLogByType("debug"),(function(t,n){return r("div",{key:n},[r("div",[e._v(e._s(t._t))]),r("pre",[e._v(e._s(t.event))]),r("v-divider")],1)}))],2):e._e(),e.preferences.debug?r("v-tab-item",{staticClass:"log-tab"},[r("v-system-bar",{staticStyle:{position:"absolute",width:"100%"},attrs:{color:"primary"}},[r("v-spacer"),r("v-icon",{attrs:{"help-topic":"logClear",title:"Clear"},on:{click:function(t){return e.clearLog("edge")}}},[e._v("mdi-notification-clear-all")])],1),r("br"),e._l(e.getLogByType("edge"),(function(t,n){return r("div",{key:n},[r("div",[e._v(e._s(t._t))]),r("pre",[e._v(e._s(t.event))]),r("v-divider")],1)}))],2):e._e()],1)],1)],1)},kn=[],_n=r("349e"),Cn=r.n(_n),On={name:"graph-log",components:{JsonViewer:Cn.a},data:function(){return{}},methods:Object(s["a"])({},Object(xr["d"])(["clearLog"])),computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({preferences:function(e){return e.preferences},state:function(e){return e.scheduler.state},log:function(e){return e.log}})),{},{getLogByType:function(){var e=this;return function(t){return e.log.filter((function(e){return e.eventName===t}))}}})},Vn=On,Pn=(r("b2fe"),Object(pr["a"])(Vn,Sn,kn,!1,null,null,null)),Tn=Pn.exports,In=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.vector?r("v-card",{staticStyle:{height:"calc(100vh - 98px)","overflow-y":"auto"},attrs:{flat:""}},[r("v-card-title",{attrs:{"help-topic":"edge"}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-video-input-component")]),e._v(" Inputs and Outputs ")],1),r("v-card-text",[r("v-expansion-panels",{attrs:{flat:"",multiple:"",value:e.panels}},e._l(["outputs","inputs"],(function(t){return r("v-expansion-panel",{key:t},[r("v-expansion-panel-header",{attrs:{"help-topic":t}},[r("v-toolbar",{key:"toolbar_"+t,attrs:{color:"transparent",flat:"",dense:""}},[r("v-btn",{attrs:{disabled:e.controlsDisabled,color:"info",fab:"","x-small":"",absolute:"",left:""},on:{click:function(r){return r.stopPropagation(),e.add(t)}}},[r("v-icon",[e._v("mdi-plus-circle-outline")])],1),r("v-icon",{staticStyle:{"margin-left":"45px","margin-right":"10px"}},[e._v(e._s("outputs"===t?"mdi-power-plug":"mdi-power-socket"))]),r("v-toolbar-title",[e._v(" "+e._s(t)+" ")])],1)],1),r("v-expansion-panel-content",[r("v-card",{key:"card_"+t,staticStyle:{"margin-bottom":"5px"},attrs:{flat:""}},[0===e.vector.properties[t].length?r("v-card-text",[e._v("No "+e._s(t))]):e._e(),r("v-list",{key:"list_"+t,attrs:{"two-line":"",subheader:""}},e._l(e.vector.properties[t],(function(n,o){return r("v-list-item",{key:o},[r("v-list-item-content",{staticStyle:{overflow:"visible"}},[r("table",{staticStyle:{position:"absolute",height:"0",left:"-20px",top:"25px"},attrs:{"help-topic":"ioOrder"}},[r("tr",[r("td",[r("v-icon",{attrs:{disabled:0===o||e.controlsDisabled},on:{click:function(r){return e.moveUp(t,n)}}},[e._v("mdi-arrow-up-bold-box-outline")])],1)]),r("tr",[r("td",[r("v-icon",{attrs:{disabled:o===e.vector.properties[t].length-1||e.controlsDisabled},on:{click:function(r){return e.moveDown(t,n)}}},[e._v("mdi-arrow-down-bold-box-outline")])],1)]),r("tr",[r("td",[r("v-icon",{attrs:{disabled:e.controlsDisabled},on:{click:function(r){return e.remove(t,n)}}},[e._v("mdi-delete")])],1)])]),r("v-tabs",{staticClass:"hide-arrows"},[r("v-tab",{attrs:{title:"Name, type, and external","help-topic":"ioIdentity"}},[r("v-icon",[e._v("mdi-fingerprint")])],1),r("v-tab",{attrs:{title:"Connection list","help-topic":"ioConnections"}},[r("v-icon",[e._v("mdi-power-plug")])],1),r("v-tab-item",[r("v-text-field",{attrs:{disabled:e.controlsDisabled,"help-topic":t+"-name"},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"io.name"}}),r("v-combobox",{attrs:{items:e.ioTypes,disabled:e.controlsDisabled,"help-topic":t+"-type"},model:{value:n.type,callback:function(t){e.$set(n,"type",t)},expression:"io.type"}}),e.controlsDisabled?e._e():r("v-checkbox",{attrs:{label:"External","help-topic":t+"-external"},model:{value:n.external,callback:function(t){e.$set(n,"external",t)},expression:"io.external"}})],1),r("v-tab-item",[r("v-card",{attrs:{flat:""}},[r("v-list",{staticClass:"connector-info",attrs:{"two-line":"",subheader:""}},[e._l(e.getConnectors(t,n.name),(function(n,o){return r("v-list-item",{key:o,attrs:{title:"Field: "+n.connector.field+"\nVector Id: "+n.connector.vectorId+"\nConnector Id: "+n.connector.id+"\nGraph Id: "+n.connector.graphId+"\nVersion: "+n.connector.version},on:{mouseover:function(t){return e.connectorHover(n.connector)},click:function(t){return e.connectorSelect(n.connector)}}},[r("v-list-item-avatar",{staticStyle:{overflow:"visible"}},[r("v-icon",[e._v("mdi-transit-connection")])],1),r("v-list-item-content",[e._v(" "+e._s(n.connector.field)+" ")]),r("v-list-item-avatar",{staticStyle:{overflow:"visible"}},[r("table",{staticStyle:{transform:"scale(0.70) translate(5px, -20%)","padding-top":"50px"},attrs:{"help-topic":"connectorOrder"}},[r("tr",[r("td",[r("v-icon",{attrs:{disabled:0===o||e.controlsDisabled},on:{click:function(t){return e.moveConnectorUp(n)}}},[e._v("mdi-arrow-up-bold-box-outline")])],1)]),r("tr",[r("td",[r("v-icon",{attrs:{disabled:o===e.vector.properties[t].length-1||e.controlsDisabled},on:{click:function(t){return e.moveConnectorDown(n)}}},[e._v("mdi-arrow-down-bold-box-outline")])],1)]),r("tr",[r("td",[r("v-icon",{attrs:{disabled:e.controlsDisabled},on:{click:function(t){return e.removeConnector(n)}}},[e._v("mdi-delete")])],1)])])])],1)})),0===e.getConnectors(t,n.name).length?r("v-card",{attrs:{flat:""}},[r("v-card-text",[r("i",[e._v("No Connectors")])])],1):e._e()],2)],1)],1)],1)],1)],1)})),1)],1)],1)],1)})),1),r("v-dialog",{attrs:{absolute:"","max-width":"290"},model:{value:e.showMessage,callback:function(t){e.showMessage=t},expression:"showMessage"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Confirm")]),r("v-card-text",[e._v(" "+e._s(e.message)+" ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:function(t){e.showMessage=!1}}},[e._v("Cancel")]),r("v-btn",{on:{click:e.messageClick}},[e._v("Delete")])],1)],1)],1)],1)],1):e._e()},En=[],jn={name:"edge-properties",methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["deleteConnector","selectConnector","hoveredConnector","moveHistoryPosition","changeConnectorOrder"])),{},{output:function(e){var t=this.vector.properties.outputs.find((function(t){return e.field===t.name})),r=this.vector.properties.outputs.indexOf(t);return{index:r,vector:this.vector,field:t}},input:function(e){var t=this.graphSnapshot.vectors.find((function(t){return t.id===e.vectorId})),r=t?t.properties.inputs.find((function(t){return e.field===t.name})):null,n=t?t.properties.inputs.indexOf(r):null;return{index:n,vector:t,field:r}},moveConnectorUp:function(e){this.changeConnectorOrder({vectorId:e.vector.id,connectorId:e.connector.id,direction:"up"})},moveConnectorDown:function(e){this.changeConnectorOrder({vectorId:e.vector.id,connectorId:e.connector.id,direction:"down"})},removeConnector:function(e){this.deleteConnector(e.connector)},connectorSelect:function(e){this.selectConnector(e)},connectorHover:function(e){this.hoveredConnector({vector:this.vector,connector:e,input:this.input(e),output:this.output(e)})},getConnectors:function(e,t){var r=this,n=[];return"inputs"===e?this.graphSnapshot.vectors.forEach((function(e){e.edges.forEach((function(o){n.push.apply(n,Object(l["a"])(o.connectors.filter((function(e){return e.vectorId===r.vector.id&&e.field===t})).map((function(t){return{connector:t,vector:e}}))))}))})):n.push.apply(n,Object(l["a"])(this.vector.edges.find((function(e){return e.field===t})).connectors.map((function(e){return{connector:e,vector:r.vector}})))),n},messageClick:function(){this.messageCallback&&this.messageCallback()},moveUp:function(e,t){this.$store.dispatch("inputs"===e?"changeInputOrder":"changeOutputOrder",{vectorId:this.vector.id,name:t.name,direction:"up"})},moveDown:function(e,t){this.$store.dispatch("inputs"===e?"changeInputOrder":"changeOutputOrder",{vectorId:this.vector.id,name:t.name,direction:"down"})},add:function(e){var t=this,r="inputs"===e,n=r?"new input":"new output";r&&-1!==this.vector.properties[e].map((function(e){return e.name})).indexOf(n)||(r||-1===this.vector.properties.outputs.map((function(e){return e.name})).indexOf(n))&&(this.$store.dispatch(r?"addInput":"addOutput",{vectorId:this.vector.id,name:n}),this.$nextTick((function(){t.$forceUpdate()})))},remove:function(e,t,r){var n=this,o="inputs"===e;if(o)for(var i=0;i<this.graphSnapshot.vectors.length;i+=1)for(var a=0;a<this.graphSnapshot.vectors[i].edges.length;a+=1){var s=this.graphSnapshot.vectors[i].edges[a].connectors.find((function(e){return e.vectorId===n.vector.id&&e.field===t.name}));if(!r&&s)return this.showMessage=!0,this.message="There are connectors connected to this input.  Are you sure you want to delete it?",void(this.messageCallback=function(){n.showMessage=!1,n.override=!1,n.showMessage=!1,n.remove(e,t,!0)})}else{var c=this.vector.edges.find((function(e){return e.field===t.name}));if(!c)return;if(c.connectors.length>0&&!r)return this.showMessage=!0,this.message="There are connectors connected to this output.  Are you sure you want to delete it?",void(this.messageCallback=function(){n.showMessage=!1,n.override=!1,n.showMessage=!1,n.remove(e,t,!0)})}this.$store.dispatch(o?"removeInput":"removeOutput",{vectorId:this.vector.id,name:t.name})},setLocalVector:function(){var e=this.getSelectedVector();e&&(this.vector=JSON.parse(JSON.stringify(e)))},getSelectedVector:function(){var e=this;return this.graphSnapshot.vectors.find((function(t){return t.id===e.vectorId}))}}),data:function(){return{vector:null,override:!1,showMessage:!1,message:"",messageCallback:null,panels:[0]}},watch:{graphSnapshot:{handler:function(){Object(p["diff"])(this.getSelectedVector(),this.vector)&&this.setLocalVector()}},"vector.properties":{handler:function(){this.$store.dispatch("updateVectorFields",{vector:this.vector})},deep:!0},selectedVector:function(){this.selectedVector&&(this.vectorId=this.selectedVector.id,this.setLocalVector())}},mounted:function(){this.selectedVector&&(this.vectorId=this.selectedVector.id,this.setLocalVector())},computed:Object(s["a"])({controlsDisabled:function(){return!!this.vector.artifact}},Object(xr["e"])({ioTypes:function(e){return e.ioTypes},selectedVector:function(e){return e.selectedVector},graphSnapshot:function(e){return e.graphSnapshot}}))},Rn=jn,Ln=(r("c11c"),Object(pr["a"])(Rn,In,En,!1,null,null,null)),Gn=Ln.exports,Nn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.selectedVector?r("div",{on:{keydown:function(t){return e.keydown(t)}}},[r("v-toolbar",{attrs:{short:"",flat:"",dense:""}},[r("v-icon",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.selectedVector.properties.icon))]),r("v-toolbar-title",{attrs:{"help-topic":"setTemplate"}},[e._v(" Set "),e.dirty?r("span",{attrs:{title:"Unsaved changes"}},[e._v("*")]):e._e()]),r("v-spacer"),r("v-btn",{attrs:{loading:e.saving,title:"Save"},on:{click:e.save}},[r("v-icon",[e._v("mdi-content-save")])],1)],1),r("editor",{attrs:{lang:"javascript",theme:"dark"===e.preferences.appearance.theme?"twilight":"chrome",width:e.width+"px",height:"calc(100vh - 145px)"},on:{init:e.editorInit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},Dn=[],Mn=(r("a9e3"),r("7c9e")),Bn=r.n(Mn),Wn={name:"set-editor",components:{editor:Bn.a},props:{width:Number},data:function(){return{dirty:!1,value:"",saving:!1}},watch:{value:{handler:function(){this.value!==this.vector.template.set?(localStorage.setItem("_cached_set_"+this.selectedVector.id,this.value),this.dirty=!0):(localStorage.removeItem("_cached_set_"+this.selectedVector.id),this.dirty=!1)}},selectedVector:{handler:function(){this.setValue()}}},mounted:function(){this.setValue()},methods:{keydown:function(e){83===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.save())},save:function(){var e=this;this.$store.dispatch("updateTemplate",{id:this.vector.id,value:this.value,key:"set"}),this.saving=!0,localStorage.removeItem("_cached_set_"+this.selectedVector.id),setTimeout((function(){e.saving=!1,e.dirty=!1}),250)},setValue:function(){if(this.selectedVector){if(this.vector=this.selectedVector,!this.vector)throw new Error("Set editor invoked with no selected vector.");this.vector.template.set&&(this.value=this.vector.template.set);var e=localStorage.getItem("_cached_set_"+this.selectedVector.id);e&&(this.value=e,this.dirty=!0)}},editorInit:function(){r("bb36"),r("2099"),r("79fb"),r("95b8")}},computed:Object(s["a"])({},Object(xr["e"])({preferences:function(e){return e.preferences},selectedVector:function(e){return e.selectedVector}}))},Hn=Wn,Un=Object(pr["a"])(Hn,Nn,Dn,!1,null,null,null),$n=Un.exports,An=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.selectedVector?r("div",{on:{keydown:function(t){return e.keydown(t)}}},[r("v-toolbar",{attrs:{short:"",flat:"",dense:""}},[r("v-icon",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.selectedVector.properties.icon))]),r("v-toolbar-title",{attrs:{"help-topic":"vueTemplate"}},[e._v(" Template "),e.dirty?r("span",{attrs:{title:"Unsaved changes"}},[e._v("*")]):e._e()]),r("v-spacer"),r("v-btn",{attrs:{loading:e.saving,title:"Save"},on:{click:e.save}},[r("v-icon",[e._v("mdi-content-save")])],1)],1),r("editor",{attrs:{lang:"html",theme:"dark"===e.preferences.appearance.theme?"twilight":"chrome",width:e.width+"px",height:"calc(100vh - 145px)"},on:{init:e.editorInit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},zn=[],Jn={name:"template-editor",components:{editor:Bn.a},props:{width:Number},data:function(){return{dirty:!1,saving:!1,value:""}},watch:{value:{handler:function(){this.value!==this.vector.template.vue?(localStorage.setItem("_cached_vue_"+this.selectedVector.id,this.value),this.dirty=!0):(localStorage.removeItem("_cached_vue_"+this.selectedVector.id),this.dirty=!1)}},selectedVector:{handler:function(){this.setValue()}}},mounted:function(){this.setValue()},methods:{keydown:function(e){83===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.save())},save:function(){var e=this;this.$store.dispatch("updateTemplate",{id:this.vector.id,value:this.value,key:"vue"}),this.saving=!0,localStorage.removeItem("_cached_vue_"+this.selectedVector.id),setTimeout((function(){e.saving=!1,e.dirty=!1}),250)},setValue:function(){if(this.selectedVector){if(this.vector=this.selectedVector,!this.vector)throw new Error("Template editor invoked with no selected vector.");this.vector.template.vue&&(this.value=this.vector.template.vue);var e=localStorage.getItem("_cached_vue_"+this.selectedVector.id);e&&(this.value=e,this.dirty=!0)}},editorInit:function(){r.e("chunk-2d215c9e").then((function(){var e=[r("c061")];(function(e){window.emmet=e.emmet}).apply(null,e)})).catch(r.oe),r("be9d"),r("2099"),r("79fb"),r("95b8")}},computed:Object(s["a"])({},Object(xr["e"])({preferences:function(e){return e.preferences},selectedVector:function(e){return e.selectedVector}}))},Fn=Jn,Kn=Object(pr["a"])(Fn,An,zn,!1,null,null,null),qn=Kn.exports,Yn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticStyle:{height:"calc(100vh - 49px)","overflow-y":"auto"},attrs:{flat:""}},[r("v-card-title",[r("v-icon",{attrs:{left:""}},[e._v("mdi-cogs")]),e._v(" Settings ")],1),r("v-card-text",{staticClass:"ma-0"},[r("v-expansion-panels",{attrs:{flat:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("User")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-img",{staticStyle:{width:"50px","border-radius":"25px",border:"solid 2px rgba(255, 255, 255, 0.5)"},attrs:{title:e.userName,src:e.avatar}}),r("v-text-field",{attrs:{"help-topic":"userName",label:"User Name"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),r("v-text-field",{attrs:{disabled:"","help-topic":"workstationId",label:"Workstation Id"},model:{value:e.workstationId,callback:function(t){e.workstationId=t},expression:"workstationId"}}),r("v-text-field",{attrs:{"help-topic":"avatar",label:"Avatar"},model:{value:e.avatar,callback:function(t){e.avatar=t},expression:"avatar"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Graph")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{"help-topic":"settingsGridSize",label:"Grid Size","persistent-hint":"",type:"number",disabled:!e.snapToGrid},model:{value:e.gridSize,callback:function(t){e.gridSize=e._n(t)},expression:"gridSize"}}),r("v-switch",{attrs:{"help-topic":"settingsSnapToGrid",label:"Snap To Grid"},model:{value:e.snapToGrid,callback:function(t){e.snapToGrid=t},expression:"snapToGrid"}}),r("v-switch",{attrs:{"help-topic":"settingsShowGrid",label:"Show Grid"},model:{value:e.showGrid,callback:function(t){e.showGrid=t},expression:"showGrid"}}),r("v-switch",{attrs:{"help-topic":"settingsShowLabels",label:"Input/Output Labels"},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}}),r("v-switch",{attrs:{"help-topic":"settingsDebug","persistent-hint":"",hint:"Captures debug logs and show edge values.  Performance penalty.",label:"Debug"},model:{value:e.debug,callback:function(t){e.debug=t},expression:"debug"}}),r("v-switch",{attrs:{"help-topic":"settingsNewVectorHelp",label:"Show Help Messages","persistent-hint":"",hint:"When on, help messages will appear from time to time."},model:{value:e.newVectorHelp,callback:function(t){e.newVectorHelp=t},expression:"newVectorHelp"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("General Appearance")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-select",{attrs:{label:"Theme",items:["dark","light"]},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Help Dialog Background"},model:{value:e.helpColor,callback:function(t){e.helpColor=t},expression:"helpColor"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Canvas Appearance")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-select",{attrs:{items:e.colorBaseKeys,label:"Selection Rectange Color"},model:{value:e.selectionRectColor,callback:function(t){e.selectionRectColor=t},expression:"selectionRectColor"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Bounding Rectangle Color"},model:{value:e.boundingRectColor,callback:function(t){e.boundingRectColor=t},expression:"boundingRectColor"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Connector Appearance")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-text-field",{attrs:{label:"Connector Drag Dead Zone",type:"number"},model:{value:e.dragDeadZone,callback:function(t){e.dragDeadZone=e._n(t)},expression:"dragDeadZone"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Control Fill Style"},model:{value:e.controlFillStyle,callback:function(t){e.controlFillStyle=t},expression:"controlFillStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Stroke Style"},model:{value:e.strokeStyle,callback:function(t){e.strokeStyle=t},expression:"strokeStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Selected Stroke Style"},model:{value:e.selectedStrokeStyle,callback:function(t){e.selectedStrokeStyle=t},expression:"selectedStrokeStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Hover Stroke Style"},model:{value:e.hoverStrokeStyle,callback:function(t){e.hoverStrokeStyle=t},expression:"hoverStrokeStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Watch Stroke Style"},model:{value:e.watchStrokeStyle,callback:function(t){e.watchStrokeStyle=t},expression:"watchStrokeStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Activity Stroke Style"},model:{value:e.activityStrokeStyle,callback:function(t){e.activityStrokeStyle=t},expression:"activityStrokeStyle"}}),r("v-select",{attrs:{items:e.colorBaseKeys,label:"Error Stroke Style"},model:{value:e.errorStrokeStyle,callback:function(t){e.errorStrokeStyle=t},expression:"errorStrokeStyle"}}),r("v-text-field",{attrs:{label:"Line Width",type:"number"},model:{value:e.lineWidth,callback:function(t){e.lineWidth=e._n(t)},expression:"lineWidth"}})],1)],1)],1)],1),r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Danger Zone")]),r("v-expansion-panel-content",[r("v-card",{staticClass:"ma-0 pa-0",attrs:{flat:""}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-btn",{on:{click:e.clearEditorSettings}},[e._v(" Clear editor settings ")])],1)],1)],1)],1)],1)],1)],1)},Zn=[],Xn={name:"edge-properties",watch:{theme:function(){this.$vuetify.theme.dark="dark"===this.theme},preferences:{handler:function(){this.savePreferences()},deep:!0}},methods:Object(s["a"])({clearEditorSettings:function(){localStorage.removeItem("preferences"),this.getPreferences()}},Object(xr["b"])(["getPreferences","savePreferences"])),data:function(){return{panel:0}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["e"])({preferences:function(e){return e.preferences}})),Object(Zt["b"])(["preferences.useLocalStorage","preferences.graphHTTPServer","preferences.graphWSSServer","preferences.userName","preferences.avatar","preferences.workstationId","preferences.showLabels","preferences.debug","preferences.appearance.theme","preferences.appearance.helpColor","preferences.appearance.selectionRectColor","preferences.appearance.boundingRectColor","preferences.snapToGrid","preferences.appearance.showGrid","preferences.gridSize","preferences.newVectorHelp","preferences.appearance.connectors.dragDeadZone","preferences.appearance.connectors.controlFillStyle","preferences.appearance.connectors.strokeStyle","preferences.appearance.connectors.selectedStrokeStyle","preferences.appearance.connectors.hoverStrokeStyle","preferences.appearance.connectors.watchStrokeStyle","preferences.appearance.connectors.activityStrokeStyle","preferences.appearance.connectors.errorStrokeStyle","preferences.appearance.connectors.lineWidth"])),{},{colorBaseKeys:function(){return Object.keys(_r["a"])}})},Qn=Xn,eo=Object(pr["a"])(Qn,Yn,Zn,!1,null,null,null),to=eo.exports,ro=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{attrs:{flat:""}},[r("v-card-title",{attrs:{"help-topic":"importPanel"}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-library")]),e._v(" Library ")],1),r("v-card-subtitle",[e._v(" Create, Import, and Export Vectors and Graphs ")]),r("v-card-text",[r("v-tabs",{attrs:{grow:"","icons-and-text":"","hide-slider":""}},[r("v-tab",{attrs:{"help-topic":"importLocal"}},[e._v(" Local "),r("v-icon",[e._v("mdi-folder")])],1),r("v-tab",{attrs:{"help-topic":"importPublic"}},[e._v(" Public "),r("v-icon",[e._v("mdi-folder-network")])],1),e.localToc?r("v-tab-item",[r("import-panel-list",{attrs:{list:Object.keys(e.localToc).map((function(t){return e.localToc[t]}))}})],1):e._e(),r("v-tab-item",[r("import-panel-registry")],1)],1)],1)],1)},no=[],oo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.list?r("v-list",[r("v-subheader",{attrs:{"help-topic":"importLocalSearch"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-magnify")])],1),r("v-text-field",{attrs:{placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-divider",{staticClass:"ma-3",attrs:{"help-topic":"importLocalList"}}),r("v-list-item-group",{staticStyle:{"overflow-y":"auto",height:"calc(100vh - 305px)","margin-right":"3px","margin-bottom":"-5px"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.items,(function(t){return r("v-list-group",{key:t.title,attrs:{"prepend-icon":t.action},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-icon",{staticStyle:{cursor:"copy"},attrs:{draggable:"true"},on:{dragstart:function(r){return e.dragStart(r,t)}}},[r("v-icon",{attrs:{title:"publishedGraph"===t.type?"Graph":"Vector"}},[e._v(" "+e._s(t.icon||e.iconType(t.type))+" ")])],1),r("v-list-item-content",[e._v(" "+e._s(t.name||"Untitled")+" "),r("v-list-item-subtitle",[t.description?r("span",[e._v(e._s(t.description))]):r("span",[r("i",[e._v("No description")])])])],1),"newVector"!==t.type?r("v-list-item-icon",[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({},Object.assign({},n)),[e._v("mdi-information-outline")])]}}],null,!0)},[r("div",[e._v("Latest Version: "+e._s(t.version))]),r("div",[e._v("Last Updated: "+e._s(t.lastUpdate))]),r("div",[e._v("Total Versions: "+e._s(e.artifacts(t.id).length))]),t.description?r("div",[e._v(e._s(t.description))]):r("div",[r("i",[e._v("No description")])])])],1):e._e()]},proxy:!0}],null,!0),model:{value:t.active,callback:function(r){e.$set(t,"active",r)},expression:"item.active"}},["newVector"!==t.type?e._l(e.artifacts(t.id),(function(n,o){return r("v-list-item",{key:o},[r("v-list-item-icon",{staticStyle:{cursor:"copy","margin-left":"25px"},attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragStart(t,n)}}},[r("v-icon",[e._v(e._s(n.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("v"+e._s(n.version))]),r("v-list-item-subtitle",[t.description?r("div",[e._v(e._s(t.description))]):r("div",[r("i",[e._v("No description")])])])],1),r("v-list-item-icon",[r("v-btn",{attrs:{title:"Download"},on:{click:function(r){return r.stopPropagation(),e.download(t)}}},[r("v-icon",[e._v(" mdi-download ")])],1)],1)],1)})):e._e()],2)})),1)],1):e._e()},io=[],ao=(r("4d63"),r("841c"),{name:"import-panel-list",props:{list:Array},data:function(){return{search:"",selectedItem:null}},methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["download"])),{},{dragStart:function(e,t){e.dataTransfer.setData("application/json+plastic-io",JSON.stringify(t)),e.dataTransfer.dropEffect="link"},iconType:function(e){return{newVector:"mdi-shape-rectangle-plus",publishedVector:"mdi-network",publishedGraph:"mdi-switch"}[e]||""}}),computed:{artifacts:function(){var e=this;return function(t){var r=new RegExp(e.search,"ig");return e.list.filter((function(n){return/published|newVector/.test(n.type)&&n.id===t&&(""===e.search||r.test(n.name)||r.test(n.description))}))}},items:function(){var e=this,t={},r=new RegExp(this.search,"ig");return this.list.filter((function(t){return""===e.search||r.test(t.name)||r.test(t.description)})).forEach((function(e){/published|newVector/.test(e.type)&&(!t[e.id]||t[e.id].version<e.version)&&(t[e.id]=e)})),Object.keys(t).map((function(e){return t[e]}))}}}),so=ao,co=Object(pr["a"])(so,oo,io,!1,null,null,null),lo=co.exports,po=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticStyle:{height:"calc(100vh - 220px)"}},[r("v-card-title",[r("v-combobox",{attrs:{"help-topic":"importPublicRegistryList",items:e.registryList},model:{value:e.selectedRegistry,callback:function(t){e.selectedRegistry=t},expression:"selectedRegistry"}})],1),r("v-tabs",{key:e.selectedRegistry},[e._l(e.selectedRegistryCollection,(function(t,n){return r("v-tab",{key:n,attrs:{"help-topic":"importPublicTopLevel"}},[e._v(" "+e._s(t.name)+" ")])})),e._l(e.selectedRegistryCollection,(function(t,n){return r("v-tab-item",{key:n},[void 0!==e.registry[t.artifact]?r("v-tabs",[e._l(e.registry[t.artifact].toc.items,(function(t,n){return r("v-tab",{key:n,attrs:{"help-topic":"importPublicSecondLevel"}},[e._v(" "+e._s(t.name)+" ")])})),e._l(e.registry[t.artifact].toc.items,(function(t,n){return r("v-tab-item",{key:n},[r("v-list",{staticStyle:{"overflow-y":"auto",height:"calc(100vh - 435px)"},attrs:{"help-topic":"importPublicList"}},e._l(e.groupItems(t.items),(function(n,o){return r("v-list-group",{key:o,scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-list-item-icon",{staticStyle:{cursor:"copy"},attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragStart(t,n)}}},[r("v-icon",{attrs:{title:"publishedGraph"===n.type?"Graph":"Vector"}},[e._v(" "+e._s(n.icon||e.iconType(n.type))+" ")])],1),r("v-list-item-content",[e._v(" "+e._s(n.name||"Untitled")+" "),r("v-list-item-subtitle",[n.description?r("span",[e._v(e._s(n.description))]):r("span",[r("i",[e._v("No description")])])])],1),r("v-list-item-icon",[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({},Object.assign({},n)),[e._v("mdi-information-outline")])]}}],null,!0)},[r("div",[e._v("Latest Version: "+e._s(n.version))]),r("div",[e._v("Last Updated: "+e._s(n.lastUpdate))]),r("div",[e._v("Total Versions: "+e._s(e.artifacts(n.id).length))]),n.description?r("div",[e._v(e._s(n.description))]):r("div",[r("i",[e._v("No description")])])])],1)]},proxy:!0}],null,!0)},e._l(e.detailItems(t.items,n),(function(t,o){return r("v-list-item",{key:o},[r("v-list-item-icon",{staticStyle:{cursor:"copy","margin-left":"25px"},attrs:{draggable:"true"},on:{dragstart:function(r){return e.dragStart(r,t)}}},[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("v"+e._s(t.version))]),r("v-list-item-subtitle",[n.description?r("div",[e._v(e._s(n.description))]):r("div",[r("i",[e._v("No description")])])])],1)],1)})),1)})),1)],1)}))],2):e._e()],1)}))],2)],1)},uo=[],ho={name:"import-panel-registry",data:function(){return{search:"",selectedItem:null,selectedRegistry:null}},watch:{registry:{handler:function(){this.selectedRegistry=Object.keys(this.registry)[0]},deep:!0}},mounted:function(){this.getPublicRegistry({url:this.publicGraphRegistries[this.publicGraphRegistries.length-1],parent:"root"})},methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["getPublicRegistry"])),{},{detailItems:function(e,t){var r=e.filter((function(e){return e.id===t.id}));return r},groupItems:function(e){var t={};e.forEach((function(e){t[e.id]?t[e.id].version<e.version&&(t[e.id]=e):t[e.id]=e}));var r=Object.keys(t).map((function(e){return t[e]}));return r},dragStart:function(e,t){e.dataTransfer.setData("application/json+plastic-io",JSON.stringify(t)),e.dataTransfer.dropEffect="link"},iconType:function(e){return{newVector:"mdi-shape-rectangle-plus",publishedVector:"mdi-network",publishedGraph:"mdi-switch"}[e]||""}}),computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({publicGraphRegistries:function(e){return e.publicGraphRegistries},registry:function(e){return e.registry}})),{},{artifacts:function(){return function(){return[]}},registryList:function(){return this.publicGraphRegistries},selectedRegistryCollection:function(){var e=this;if(0===Object.keys(this.registry).length)return[];var t=Object.keys(this.registry).filter((function(t){return t===e.selectedRegistry})).map((function(t){return e.registry[t]})).filter((function(e){return"root"===e.parent}));return t&&t[0]&&t[0].toc?t[0].toc.items:void 0}})},vo=ho,fo=Object(pr["a"])(vo,po,uo,!1,null,null,null),mo=fo.exports,go={name:"import-panel",components:{ImportPanelList:lo,ImportPanelRegistry:mo},data:function(){return{localToc:null,selectedItem:null}},watch:{toc:{handler:function(){this.updateLocalToc()},deep:!0}},methods:{updateLocalToc:function(){this.localToc=Object(s["a"])({0:{type:"newVector",name:"Empty Vector",description:"An new, empty vector."}},JSON.parse(JSON.stringify(this.toc)))}},computed:Object(s["a"])({},Object(xr["e"])({toc:function(e){return e.toc}})),mounted:function(){this.updateLocalToc()}},bo=go,yo=Object(pr["a"])(bo,ro,no,!1,null,null,null),wo=yo.exports,xo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.selectedVector?r("div",{on:{keydown:function(t){return e.keydown(t)}}},[r("v-toolbar",{attrs:{short:"",flat:"",dense:""}},[r("v-icon",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.selectedVector.properties.icon))]),r("v-toolbar-title",{attrs:{"help-topic":"testsTemplate"}},[e._v(" Tests "),e.dirty?r("span",{attrs:{title:"Unsaved changes"}},[e._v("*")]):e._e()]),r("v-spacer"),r("v-btn",{attrs:{loading:e.running,title:"Run Tests"},on:{click:e.runTests}},[r("v-icon",[e._v("mdi-play")])],1),r("v-btn",{attrs:{loading:e.saving,title:"Save"},on:{click:e.save}},[r("v-icon",[e._v("mdi-content-save")])],1)],1),r("editor",{attrs:{lang:"javascript",theme:"dark"===e.preferences.appearance.theme?"twilight":"chrome",width:e.width+"px",height:"calc(100vh - 145px)"},on:{init:e.editorInit},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},So=[],ko={name:"tests-editor",components:{editor:Bn.a},props:{width:Number},data:function(){return{dirty:!1,value:"",saving:!1,running:!1}},watch:{value:{handler:function(){this.value!==this.vector.template.tests?(localStorage.setItem("_cached_tests_"+this.selectedVector.id,this.value),this.dirty=!0):(localStorage.removeItem("_cached_tests_"+this.selectedVector.id),this.dirty=!1)}},selectedVector:{handler:function(){this.setValue()}}},mounted:function(){this.setValue()},methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["runVectorTest"])),{},{runTests:function(){this.runVectorTest(this.vector)},keydown:function(e){83===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),this.save())},save:function(){var e=this;this.$store.dispatch("updateTemplate",{id:this.vector.id,value:this.value,key:"tests"}),this.saving=!0,localStorage.removeItem("_cached_tests_"+this.selectedVector.id),setTimeout((function(){e.saving=!1,e.dirty=!1}),250)},setValue:function(){if(this.selectedVector){if(this.vector=this.selectedVector,!this.vector)throw new Error("tests editor invoked with no selected vector.");this.vector.template.tests&&(this.value=this.vector.template.tests);var e=localStorage.getItem("_cached_tests_"+this.selectedVector.id);e&&(this.value=e,this.dirty=!0)}},editorInit:function(){r("bb36"),r("2099"),r("79fb"),r("95b8")}}),computed:Object(s["a"])({},Object(xr["e"])({preferences:function(e){return e.preferences},selectedVector:function(e){return e.selectedVector}}))},_o=ko,Co=Object(pr["a"])(_o,xo,So,!1,null,null,null),Oo=Co.exports,Vo={name:"control-panel",components:{VectorTests:Oo,GraphLog:Tn,VectorProperties:fn,GraphProperties:xn,SetEditor:$n,TemplateEditor:qn,EdgeProperties:Gn,EditorSettings:to,ImportPanel:wo,HistoryPanel:cn},watch:{"mouse.y":function(){this.mouseTranslate()},"mouse.x":function(){this.mouseTranslate()},graph:{handler:function(){this.$set(this,"localGraph",this.graph)},deep:!0}},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({showHelp:function(e){return e.showHelp},historyPosition:function(e){return e.historyPosition},events:function(e){return e.events},selectRect:function(e){return e.selectRect},selectedConnectors:function(e){return e.selectedConnectors},selectedVector:function(e){return e.selectedVector},selectedVectors:function(e){return e.selectedVectors},hoveredConnectors:function(e){return e.hoveredConnectors},hoveredVectors:function(e){return e.hoveredVectors},hoveredPorts:function(e){return e.hoveredPorts},mouse:function(e){return e.mouse},translating:function(e){return e.translating},keys:function(e){return e.keys},view:function(e){return e.view},preferences:function(e){return e.preferences}})),{},{gutterStyle:function(){return{width:this.navWidth-this.iconGutterSize+"px"}},navStyle:function(){var e=this.navWidths[this.panel];return e||(e=this.navWidth+"px"),{zIndex:this.showHelp?5:void 0,width:this.panel?e:"43px"}}}),methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["graphUrl"])),{},{mouseTranslate:function(){this.panelDragging&&(this.$refs.nav.$el.style.transition="none",this.navWidth=this.panelDragging.w+(this.mouse.x-this.panelDragging.x),this.$refs.nav.$el.style.transition=void 0)},startPanelDrag:function(){var e=this;if(!this.navWidths[this.panel]){this.$set(this,"panelDragging",{x:this.mouse.x,y:this.mouse.y,w:this.navWidth});var t=function t(){e.panelDragging=!1,document.removeEventListener("mouseup",t)};document.addEventListener("mouseup",t)}},selectPanel:function(e){this.panel!==e?(this.panel=e,this.localVersion+=1):this.panel=""}}),mounted:function(){this.localGraph=this.graph},data:function(){return{vectorPanelTabs:null,localVersion:0,iconGutterSize:43,graphVue:null,graphSet:null,graphJSON:null,panelDragging:null,navWidth:450,navWidths:{properties:null,history:null,log:null,graph:null,set:null,template:null,edge:null,library:null,settings:null},panel:"",panelOpen:!0,localGraph:null}}},Po=Vo,To=(r("3cf4"),Object(pr["a"])(Po,en,tn,!1,null,null,null)),Io=To.exports,Eo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showHelp?r("v-overlay",[e._l(e.topics,(function(t,n){return r("div",{key:n+"_canvas",style:e.topicStyle(t),on:{mouseover:function(r){return e.setTopic(t)}}},[r("v-icon",{staticStyle:{transform:"translate(-10px, -15px)"},attrs:{small:"",color:"warning"}},[e._v(" mdi-help-circle ")])],1)})),r("canvas",{ref:"canvas",staticClass:"help-topic-canvas"}),r("v-alert",{ref:"card",staticStyle:{"max-width":"700px","max-height":"80vh",overflow:"auto"},attrs:{icon:"mdi-help-circle-outline",border:"left",dismissible:"",color:e.preferences.appearance.helpColor},on:{wheel:function(e){e.stopPropagation()}},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[r("h3",{staticClass:"headline",domProps:{innerHTML:e._s(e.topicTitle)}}),r("div",{domProps:{innerHTML:e._s(e.topicText)}})]),r("v-card",{staticStyle:{position:"fixed",bottom:"40px",right:"10px"}},[r("v-card-text",[r("v-expansion-panels",[r("v-expansion-panel",[r("v-expansion-panel-header",[e._v("Keyboard Shortcuts")]),r("v-expansion-panel-content",[r("table",{staticStyle:{width:"380px"}},[r("tr",[r("th",{staticStyle:{width:"150px"}},[e._v("Key")]),r("th",[e._v("Action")])])]),r("div",{staticStyle:{"max-height":"65vh",overflow:"auto"}},[r("table",{staticStyle:{width:"380px"}},[r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + =")],1),r("td",[e._v("Zoom in")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + -")],1),r("td",[e._v("Zoom out")])]),r("tr",[r("td",[e._v("Delete")]),r("td",[e._v("Delete selection")])]),r("tr",[r("td",[e._v("Arrow Keys")]),r("td",[e._v("Nudge selected vectors")])]),r("tr",[r("td",[e._v("\\")]),r("td",[e._v("Toggle presentation visibility")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + ]")],1),r("td",[e._v("Bring forward")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + "),r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-shift")]),e._v(" + ]")],1),r("td",[e._v("Bring to front")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + [")],1),r("td",[e._v("Send back")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + "),r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-shift")]),e._v(" + [")],1),r("td",[e._v("Send to back")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + Z")],1),r("td",[e._v("Undo")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + "),r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-shift")]),e._v(" + Z")],1),r("td",[e._v("Redo")])]),r("tr",[r("td",[r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-control")]),e._v(" + "),r("v-icon",{attrs:{"x-small":""}},[e._v("mdi-apple-keyboard-shift")]),e._v(" + D")],1),r("td",[e._v("Duplicate selected")])]),r("tr",[r("td",[e._v("Tab")]),r("td",[e._v("Toggle control panel visibility")])]),r("tr",[r("td",[e._v("ALT + `")]),r("td",[e._v("Toggle presentation mode")])]),r("tr",[r("td",[e._v("Space + Left Mouse Button")]),r("td",[e._v("Hold to move graph view")])]),r("tr",[r("td",[e._v("Middle Mouse Button")]),r("td",[e._v("Hold to move graph view")])])])])])],1)],1)],1)],1)],2):e._e()},jo=[],Ro={name:"help-overlay",props:{},destroyed:function(){window.removeEventListener("resize",this.resize)},mounted:function(){var e=this;this.drawHelp(),window.addEventListener("resize",this.resize);var t=[];this.topics.forEach((function(r){e.helpTopics[r]||t.push(r)})),t.length>0&&console.warn("missing topics",t)},data:function(){return{localVersion:1,ratio:1,ctx:null,topic:null,open:!0,lineRects:{}}},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({view:function(e){return e.view},showHelp:function(e){return e.showHelp},helpTopics:function(e){return e.helpTopics},preferences:function(e){return e.preferences}})),{},{preferences:function(){return this.$store.state.preferences},topicTitle:function(){return this.helpTopics[this.topic]?this.helpTopics[this.topic].title||this.topic:"Sorry!"},topicText:function(){return this.helpTopics[this.topic]?this.helpTopics[this.topic].html:"No help topic currently exists for this item."},topics:function(){return this.localVersion,Object(l["a"])(document.querySelectorAll("*[help-topic]")).map((function(e){return e.getAttribute("help-topic")}))},topicEl:function(){var e=this;return function(t){return e.localVersion,document.querySelector("*[help-topic='".concat(t,"']"))}},topicRect:function(){var e=this;return function(t){return e.localVersion,e.topicEl(t).getBoundingClientRect()}},topicStyle:function(){var e=this;return function(t){var r=e.topicRect(t);return{cursor:"help",padding:"10px",position:"fixed",top:r.y+"px",left:r.x+"px"}}}}),watch:{open:function(){this.$emit("close")},topic:function(){"vueTemplate"===this.topic&&(this.topic="template"),"setTemplate"===this.topic&&(this.topic="set")},view:{handler:function(){this.localVersion+=1},deep:!0}},methods:{resize:function(){this.drawHelp(),this.localVersion+=1},setTopic:function(e){this.topic=e,this.drawHelp()},drawHelp:function(){var e=this;setTimeout((function(){e.topics.forEach((function(t){if(t===e.topic){e.localGraph=e.graph,e.ctx=e.$refs.canvas.getContext("2d"),e.$refs.canvas.height=window.innerHeight,e.$refs.canvas.width=window.innerWidth,e.ctx.scale(e.ratio,e.ratio);var r=e.topicEl(t).getBoundingClientRect(),n=e.$refs.card.$el.getBoundingClientRect();e.ctx.clearRect(0,0,window.innerWidth,window.innerHeight),e.ctx.strokeStyle=_r["a"]["pink"].base,e.ctx.lineWidth=3,e.ctx.beginPath(),e.ctx.moveTo(r.x+5,r.y+5),e.ctx.lineTo(n.x+n.width/2,n.y+5),e.ctx.stroke(),e.ctx.closePath()}}))}),10)}}},Lo=Ro,Go=(r("7410"),Object(pr["a"])(Lo,Eo,jo,!1,null,null,null)),No=Go.exports,Do=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",e._l(e.users,(function(t,n){return r("span",{key:n},[t.workstationId!==e.workstationId?r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on;return[r("v-img",e._g({staticClass:"graphUserAvatar",attrs:{src:t.avatar}},o))]}}],null,!0)},[r("span",[e._v(e._s(t.userName))])]):e._e()],1)})),0)},Mo=[],Bo={name:"graph-users",computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({workstationId:function(e){return e.preferences.workstationId},graphUsers:function(e){return e.graphUsers}})),{},{users:function(){var e=this;return Object.keys(this.graphUsers).map((function(t){return e.graphUsers[t]}))}})},Wo=Bo,Ho=(r("9169"),Object(pr["a"])(Wo,Do,Mo,!1,null,null,null)),Uo=Ho.exports,$o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.mice,(function(t){return r("div",{key:t.workstationId,staticClass:"graph-user-mouse",style:e.mousePosition(t)},[t.workstationId!==e.workstationId?r("div",[r("v-icon",{domProps:{textContent:e._s(t.mouse.lmb||t.mouse.mmb||t.mouse.rmb?"mdi-cursor-default-click-outline":"mdi-cursor-default-outline")}}),r("v-card",{staticClass:"graph-user-mouse-label"},[r("v-card-title",{staticStyle:{"white-space":"nowrap"}},[r("v-img",{staticClass:"graph-user-mouse-avatar",attrs:{src:t.avatar}}),r("v-spacer"),e._v(" "+e._s(t.userName)+" ")],1)],1)],1):e._e()])})),0)},Ao=[],zo={name:"graph-mouse",methods:{mousePosition:function(e){return{left:e.mouse.x+"px",top:e.mouse.y+"px"}}},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({workstationId:function(e){return e.preferences.workstationId},graphUserMouse:function(e){return e.graphUserMouse}})),{},{mice:function(){var e=this;return Object.keys(this.graphUserMouse).map((function(t){return e.graphUserMouse[t]}))}})},Jo=zo,Fo=(r("1f34"),Object(pr["a"])(Jo,$o,Ao,!1,null,null,null)),Ko=Fo.exports,qo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{wheel:function(e){e.stopPropagation()},mousedown:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[e.activity?r("v-card",{staticClass:"connector-view"},[r("v-system-bar",[r("v-icon",{attrs:{title:"Connector Information"}},[e._v(" mdi-information-outline ")]),e._v(" Field "),r("span",{staticStyle:{padding:"5px"}},[e._v(e._s(e.activity.event.connector.field))]),r("span",{staticStyle:{padding:"5px"}},[e._v("Duration")]),r("span",{staticStyle:{padding:"5px"}},[e._v(e._s(e.activity.duration)+"ms")]),r("v-divider"),r("v-icon",{on:{click:function(t){return e.$emit("close")}}},[e._v(" mdi-close ")])],1),r("v-card-text",[r("div",{staticClass:"connector-view-value"},[r("pre",{staticClass:"dont-propagate-copy"},[e._v(e._s(e.activity.event.value))])])])],1):e._e()],1)},Yo=[],Zo={name:"connector-view",props:{activity:Object}},Xo=Zo,Qo=(r("b384"),Object(pr["a"])(Xo,qo,Yo,!1,null,null,null)),ei=Qo.exports,ti=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{key:e.testsVisible,attrs:{value:e.testsVisible,"max-width":"50%","hide-overlay":"",persistent:""},on:{"click:outside":e.hideTests}},[r("link",{tag:"component",attrs:{rel:"stylesheet",href:"https://unpkg.com/mocha/mocha.css"}}),r("script",{tag:"component",attrs:{src:"https://unpkg.com/chai/chai.js"},on:{load:function(t){e.loadedChai=!0}}}),r("script",{tag:"component",attrs:{src:"https://unpkg.com/mocha/mocha.js"},on:{load:function(t){e.loadedMocha=!0}}}),r("v-card",[r("v-toolbar",[r("v-app-bar-nav-icon",[r("v-icon",[e._v(" mdi-flask ")])],1),r("v-toolbar-title",[e._v("Tests")]),r("v-spacer"),e._v(" Pass: "+e._s(e.pass)+" Fail: "+e._s(e.fail)+" ")],1),r("v-progress-linear",{attrs:{value:e.pct}}),r("div",{ref:"tests",staticStyle:{height:"60vh",overflow:"auto"}},[r("v-list",{attrs:{"three-line":""}},[e._l(e.tests,(function(t,n){return[r("v-list-item",{key:n+"_title"},[r("v-list-item-avatar",[/pass|fail/.test(t[0])?r("v-icon",{attrs:{color:"fail"===t[0]?"red":"green"},domProps:{innerHTML:e._s(e.stepIcon(t[0]))}}):e._e(),"end"===t[0]?r("v-icon",{attrs:{color:e.fail>0&&"end"===t[0]?"red":"green"},domProps:{innerHTML:e._s(e.stepIcon(t[0]))}}):e._e(),"start"===t[0]?r("v-icon",{domProps:{innerHTML:e._s(e.stepIcon(t[0]))}}):e._e()],1),r("v-list-item-content",["end"===t[0]?r("v-list-item-title",[e._v(" Pass: "+e._s(e.pass)+" Fail: "+e._s(e.fail)+" ")]):e._e(),"end"===t[0]?r("v-list-item-subtitle",[e._v(" Duration "+e._s(t[1].duration+"ms")+" ")]):e._e(),"end"!==t[0]?r("v-list-item-title",{domProps:{innerHTML:e._s(/start|end/.test(t[0])?t[0]:t[1].title)}}):e._e(),t[1].fullTitle?r("v-list-item-subtitle",{domProps:{innerHTML:e._s(t[1].fullTitle+" - "+t[1].duration+"ms")}}):e._e(),t[1].stack?r("v-list-item-subtitle",{domProps:{innerHTML:e._s(t[1].stack)}}):e._e()],1)],1),r("v-divider",{key:n+"_divider"})]}))],2)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{disabled:!e.ended},on:{click:e.hideTests}},[r("v-icon",[e._v(" mdi-close ")]),e._v(" Close ")],1)],1)],1)],1)},ri=[],ni={name:"test-view",data:function(){return{totalTests:0,currentTest:0,pass:0,fail:0,pending:0,ended:!1,tests:[]}},watch:{testsVisible:function(){this.loadedChai=!1,this.loadedMocha=!1,this.ended=!1,this.fail=0,this.pass=0,this.pending=0,this.currentTest=0,this.totalTests=0,this.tests=[]},testOutput:function(){var e=this.testOutput[this.testOutput.length-1];e&&(this.tests.push(e),"start"===e[0]&&"total"in e[1]?this.totalTests=e[1].total:/pass/.test(e[0])?this.pass+=1:/fail/.test(e[0])?this.fail+=1:"end"===e[0]&&(this.ended=!0),this.$nextTick(this.scrollTests))}},methods:Object(s["a"])(Object(s["a"])({},Object(xr["d"])(["hideTests"])),{},{scrollTests:function(){var e=this.$refs.tests;e.scrollTop=e.scrollHeight},stepIcon:function(e){return"end"===e&&this.fail>0?"mdi-shield-alert-outline":"end"===e&&0===this.fail?"mdi-shield-check-outline":{start:"mdi-flag-checkered",fail:"mdi-flask-remove",pass:"mdi-flask-plus",end:"mdi-flask-empty-outline"}[e]||"mdi-flask-empty"}}),computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({testOutput:function(e){return e.testOutput},testsVisible:function(e){return e.testsVisible}})),{},{pct:function(){return this.totalTests/(this.pass+this.fail)*100}})},oi=ni,ii=Object(pr["a"])(oi,ti,ri,!1,null,null,null),ai=ii.exports,si={name:"GraphEditor",props:{route:Object},components:{TestView:ai,GraphCanvas:Qr,ControlPanel:Io,HelpOverlay:No,GraphUsers:Uo,GraphMouse:Ko,ConnectorView:ei},watch:{presentationWarning:function(){var e=this;this.hasSeenPresentationWarning=!0,setTimeout((function(){e.presentationWarning=!1}),3e3)},presentation:function(){this.presentationWarning=!this.hasSeenPresentationWarning},graph:{handler:function(){this.graph&&(!this.graphLoaded&&this.graph.properties.startInPresentationMode&&(this.hasSeenPresentationWarning=!0,this.togglePresentation()),this.graphLoaded=!0)},deep:!0},showError:function(){this.localShowError=this.showError,this.error&&(this.localErrorMessage=this.error.toString())},"keys.32":function(e){this.translate=e}},computed:Object(s["a"])(Object(s["a"])({},Object(xr["e"])({dataProviders:function(e){return e.dataProviders},activityConnectors:function(e){return e.activityConnectors},pathPrefix:function(e){return e.pathPrefix},showHelp:function(e){return e.showHelp},panelVisibility:function(e){return e.panelVisibility},vectorMimeType:function(e){return e.vectorMimeType},showError:function(e){return e.showError},error:function(e){return e.error},presentation:function(e){return e.presentation},locked:function(e){return e.locked},events:function(e){return e.events},historyPosition:function(e){return e.historyPosition},primaryGroup:function(e){return e.primaryGroup},groupVectors:function(e){return e.groupVectors},boundingRect:function(e){return e.boundingRect},selectionRect:function(e){return e.selectionRect},selectedConnectors:function(e){return e.selectedConnectors},selectedVectors:function(e){return e.selectedVectors},hoveredConnector:function(e){return e.hoveredConnector},hoveredVector:function(e){return e.hoveredVector},hoveredPort:function(e){return e.hoveredPort},graphSnapshot:function(e){return e.graphSnapshot},graph:function(e){return e.graph},mouse:function(e){return e.mouse},translating:function(e){return e.translating},keys:function(e){return e.keys},view:function(e){return e.view},preferences:function(e){return e.preferences}})),{},{hoveredActivity:function(){if(!this.hoveredConnector&&0===this.selectedConnectors.length)return null;var e=this.hoveredConnector?this.hoveredConnector.connector.id:this.selectedConnectors[0].id;return this.activityConnectors[e]},graphContainerStyle:function(){var e="";return this.mouse.lmb&&this.translate||this.mouse.mmb?e="grabbing":this.keys[this.spaceKeyCode]?e="grab":this.hoveredConnector&&(e="move"),{pointerEvents:this.showHelp?"none":void 0,cursor:e}}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(xr["d"])(["toggleLabels","toggleHelp"])),Object(xr["b"])(["save","raiseError","clearError","createNewVector","undo","redo","duplicateSelection","pasteVectors","deleteSelected","groupSelected","ungroupSelected","bringForward","sendBackward","bringToFront","sendToBack","toggleLock","togglePresentation"])),{},{openGraph:function(){window.open(this.pathPrefix+"graphs","_graphs")},toggleGrid:function(){this.$store.dispatch("preferences",Object(s["a"])(Object(s["a"])({},this.preferences),{appearance:Object(s["a"])(Object(s["a"])({},this.preferences.appearance),{},{showGrid:!this.preferences.appearance.showGrid})}))},zoomOut:function(){this.$store.dispatch("view",Object(s["a"])(Object(s["a"])({},this.view),{},{k:Math.max(this.view.k-.1,.1)}))},zoomIn:function(){this.$store.dispatch("view",Object(s["a"])(Object(s["a"])({},this.view),{},{k:Math.min(this.view.k+.1,4)}))},resetView:function(){this.$store.dispatch("view",Object(s["a"])(Object(s["a"])({},this.view),{},{x:0,y:0}))},resetZoom:function(){this.$store.dispatch("view",Object(s["a"])(Object(s["a"])({},this.view),{},{k:1}))},isGraphTarget:function(e){var t=e.target;if(this.locked)while(t){if("vector"===t.className)return!1;t=t.parentNode}return!/^(no-graph-target|v-list|v-menu)/.test(e.target.className)&&!(this.$refs.panel&&this.$refs.panel.$el.contains(e.target)||this.$refs.topBar&&this.$refs.topBar.$el.contains(e.target)||this.$refs.bottomBar&&this.$refs.bottomBar.$el.contains(e.target))},getItemAt:function(e){var t=this;while(e.parentNode){if("vector-inputs"===e.className||"vector-outputs"===e.className)return{port:!0};if("vector"===e.className){var r=function(){var r=e.getAttribute("x-vector-id");return{v:{vector:t.graph.vectors.find((function(e){return e.id===r}))}}}();if("object"===Object(mr["a"])(r))return r.v}e=e.parentNode}return{}},mousemove:function(e){if(!this.showHelp){var t=this.getMousePosFromEvent(e),r=this.getItemAt(e.target);r.vector?this.$store.dispatch("hoveredVector",r.vector):this.$store.dispatch("hoveredVector",null),r.port||this.$store.dispatch("hoveredPort",null),this.$store.dispatch("mouse",Object(s["a"])(Object(s["a"])({},this.mouse),{},{event:e,x:t.x,y:t.y}))}},dblclick:function(e){/graph-canvas-container/.test(e.target.className)&&this.createNewVector({x:e.clientX,y:e.clientY})},mousedown:function(e){if(this.graph&&!this.showHelp&&this.isGraphTarget(e)){var t={mouse:{x:this.mouse.x,y:this.mouse.y,event:e},view:{y:this.view.y,x:this.view.x},vectors:this.graph.vectors.map((function(e){return{id:e.id,properties:{x:e.properties.x,y:e.properties.y,presentation:{x:e.properties.presentation.x,y:e.properties.presentation.y},newX:0,newY:0}}}))};this.$store.dispatch("translating",t),this.$store.dispatch("mouse",Object(s["a"])(Object(s["a"])({},this.mouse),{},Object(fr["a"])({event:e},this.buttonMap[e.button],!0)))}},mouseup:function(e){this.$store.dispatch("mouse",Object(s["a"])(Object(s["a"])({},this.mouse),{},Object(fr["a"])({event:e},this.buttonMap[e.button],!1)))},getMousePosFromEvent:function(e){if(!this.$el)return{x:0,y:0};var t=this.$el.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},scale:function(e){if(this.isGraphTarget(e)&&!this.showHelp&&!this.presentation){var t=this.getMousePosFromEvent(e),r=this.view.k,n=.01*(e.wheelDelta?e.wheelDelta/120:-e.deltaY/3),o=this.view.x,i=this.view.y,a=this.view.k;a+=n||1,a=Math.min(Math.max(a,.1),4);var s={x:(t.x-o)/r,y:(t.y-i)/r};o=-s.x*a+t.x,i=-s.y*a+t.y;var c={k:a,x:Math.floor(o),y:Math.floor(i)};this.$store.dispatch("view",c)}},copyVectors:function(e){e=JSON.parse(JSON.stringify(e));var t=e.map((function(e){return e.id}));return e.forEach((function(e){e.edges.forEach((function(e){var r=[];e.connectors.forEach((function(e){-1===t.indexOf(e.vectorId)&&r.push(e)})),r.forEach((function(t){e.connectors.splice(e.connectors.indexOf(t),1)}))}))})),e},evCut:function(e){!this.isGraphTarget(e)||/dont-propagate-copy/.test(e.target.className)||0===this.selectedVectors.length||/input|textarea/i.test(e.target.tagName)||(console.warn("Clipboard cut captured by graph editor"),e.clipboardData.setData(this.vectorMimeType,JSON.stringify(this.copyVectors(this.selectedVectors),null,"\t")),this.deleteSelected(),e.preventDefault())},evCopy:function(e){!this.isGraphTarget(e)||/dont-propagate-copy/.test(e.target.className)||0===this.selectedVectors.length||/input|textarea/i.test(e.target.tagName)||(console.warn("Clipboard copy captured by graph editor"),e.clipboardData.setData(this.vectorMimeType,JSON.stringify(this.copyVectors(this.selectedVectors),null,"\t")),e.preventDefault())},evPaste:function(e){if(this.isGraphTarget(e)&&!/dont-propagate-copy/.test(e.target.className)&&!/input|textarea/i.test(e.target.tagName)){console.warn("Clipboard paste captured by graph editor");var t=e.clipboardData.getData(this.vectorMimeType);this.tryPasteVectorString(t),e.preventDefault()}},tryPasteVectorString:function(e){var t,r=this,n="The text pasted onto the graph does not appear to be vector data.",o=function(){r.raiseError(n),console.warn(n)};try{t=JSON.parse(e)}catch(a){return console.error(a),o()}if(!Array.isArray(t))return o();for(var i=0;i<t.length;i+=1)if(!this.validateVector(t[i]))return o();this.pasteVectors(t)},validateVector:function(e){return!!(e.id&&e.edges&&Array.isArray(e.edges)&&"object"===Object(mr["a"])(e.properties)&&void 0!==e.properties.x&&void 0!==e.properties.y&&void 0!==e.properties.z&&"object"===Object(mr["a"])(e.template)&&void 0!==e.template.set&&void 0!==e.template.vue)},keyup:function(e){e.target===document.body&&this.$store.dispatch("keyup",e)},keydown:function(e){e.target===document.body&&this.$store.dispatch("keydown",e)}}),mounted:function(){var e=this;document.onwheel=function(t){e.scale(t)},document.oncut=this.evCut,document.onpaste=this.evPaste,document.oncopy=this.evCopy,document.onmousedown=this.mousedown,document.ondblclick=this.dblclick,document.onmouseup=this.mouseup,document.onmousemove=this.mousemove,window.onkeyup=this.keyup,window.onkeydown=this.keydown,this.$store.dispatch("getToc");var t="index";this.route.path.split("/")[2]&&(t=this.route.path.split("/")[2]),this.$store.dispatch("open",{graphId:t}),this.$store.dispatch("subscribeToc"),this.$store.dispatch("subscribePreferences"),this.showAnnoyingHelpMessage=!!this.preferences.newVectorHelp},data:function(){return{buttonMap:{0:"lmb",2:"rmb",1:"mmb"},spaceKeyCode:32,translate:!1,showDialog:!1,localErrorMessage:"",localShowError:!1,localVersion:0,graphLoaded:!1,presentationWarning:!1,hasSeenPresentationWarning:!1,showAnnoyingHelpMessage:!1,showConnectorView:!1}}},ci=si,li=(r("e9fc"),Object(pr["a"])(ci,hr,vr,!1,null,null,null)),pi=li.exports,ui=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"graph-manager"},[r("v-app-bar",{attrs:{app:"","clipped-left":""}},[r("v-toolbar-title",[e._v("Plastic IO")]),r("v-spacer"),r("v-btn",{attrs:{color:"info"},on:{click:e.create}},[e._v(" New Graph "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-plus-circle-outline ")])],1)],1),r("v-content",[r("v-container",[r("v-row",{attrs:{align:"start","align-content":"start","align-items":"stretch"}},[r("v-col",{attrs:{"align-self":"start"}},[r("v-data-iterator",{attrs:{items:e.tocItems,"items-per-page":e.itemsPerPage,page:e.page,search:e.search,"sort-by":e.sortBy.toLowerCase(),"sort-desc":e.sortDesc,"hide-default-footer":""},on:{"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}},scopedSlots:e._u([{key:"header",fn:function(){return[r("v-toolbar",{staticClass:"mb-1",attrs:{dark:"",color:"blue darken-3"}},[r("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.$vuetify.breakpoint.mdAndUp?[r("v-spacer"),r("v-select",{attrs:{flat:"","solo-inverted":"","hide-details":"",items:e.keys,"prepend-inner-icon":"mdi-magnify",label:"Sort by"},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}}),r("v-spacer"),r("v-btn-toggle",{attrs:{mandatory:""},model:{value:e.sortDesc,callback:function(t){e.sortDesc=t},expression:"sortDesc"}},[r("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!1}},[r("v-icon",[e._v("mdi-arrow-up")])],1),r("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!0}},[r("v-icon",[e._v("mdi-arrow-down")])],1)],1)]:e._e()],2)]},proxy:!0},{key:"default",fn:function(t){return[r("v-row",{staticClass:"ma-1",staticStyle:{height:"calc(100vh - 250px)","overflow-y":"auto"}},e._l(t.items,(function(t){return r("v-col",{key:t.key,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-card",{staticStyle:{"padding-top":"30px"},attrs:{color:e.createdGraphId===t.id?"primary":""}},[r("v-icon",{staticStyle:{"margin-top":"-30px","margin-left":"10px"},attrs:{left:"","x-large":""}},[e._v(" "+e._s(t.icon||"mdi-graph")+" ")]),r("v-menu",{scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ma-3",staticStyle:{top:"0",right:"0"},attrs:{absolute:"",right:"",color:"primary",dark:""}},Object.assign({},n)),[r("v-icon",[e._v(" mdi-menu ")])],1)]}}],null,!0)},[r("v-list",[r("v-list-item",{on:{click:function(r){return e.download(t)}}},[r("v-list-item-title",[r("v-icon",[e._v(" mdi-download ")]),e._v(" Download ")],1)],1),r("v-list-item",{on:{click:function(r){return e.confirmDelete(t)}}},[r("v-list-item-title",[r("v-icon",[e._v(" mdi-delete ")]),e._v(" Delete ")],1)],1)],1)],1),r("v-card-title",{staticClass:"subheading font-weight-bold"},[e._v(" "+e._s(t.name||"Untitled")+" ")]),r("v-card-title",["graph"===t.type?r("v-btn",{attrs:{block:""},on:{click:function(r){return e.openGraph(t.id)}}},[e._v(" Open "),r("v-icon",{attrs:{right:""}},[e._v(" mdi-folder-open ")])],1):e._e(),r("v-spacer")],1),r("v-divider"),r("v-list",{attrs:{dense:""}},e._l(e.filteredKeys,(function(n,o){return r("v-list-item",{key:o},[r("v-list-item-content",{class:{"blue--text":e.sortBy===n}},[e._v(e._s(n)+":")]),r("v-list-item-content",{staticClass:"align-end",class:{"blue--text":e.sortBy===n}},[e._v(e._s(t[n.toLowerCase()]))])],1)})),1)],1)],1)})),1)]}},{key:"footer",fn:function(){return[r("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[r("span",{staticClass:"grey--text"},[e._v("Items per page")]),r("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({staticClass:"ml-2",attrs:{dark:"",text:"",color:"primary"}},n),[e._v(" "+e._s(e.itemsPerPage)+" "),r("v-icon",[e._v("mdi-chevron-down")])],1)]}}])},[r("v-list",e._l(e.itemsPerPageArray,(function(t,n){return r("v-list-item",{key:n,on:{click:function(r){return e.updateItemsPerPage(t)}}},[r("v-list-item-title",[e._v(e._s(t))])],1)})),1)],1),r("v-spacer"),r("span",{staticClass:"mr-4 grey--text"},[e._v(" Page "+e._s(e.page)+" of "+e._s(e.numberOfPages)+" ")]),r("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:e.formerPage}},[r("v-icon",[e._v("mdi-chevron-left")])],1),r("v-btn",{staticClass:"ml-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:e.nextPage}},[r("v-icon",[e._v("mdi-chevron-right")])],1)],1)]},proxy:!0}])})],1)],1)],1)],1),r("v-btn",{staticStyle:{position:"fixed",bottom:"15px",left:"15px"},attrs:{fab:"",small:""},on:{click:e.dataSourceProviderSetup}},[r("v-icon",{attrs:{small:""}},[e._v(" mdi-database ")])],1),r("v-snackbar",{attrs:{timeout:0,top:""},model:{value:e.localShowError,callback:function(t){e.localShowError=t},expression:"localShowError"}},[r("v-alert",{attrs:{prominent:"",type:"error"}},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"grow"},[e._v(e._s(e.localErrorMessage))]),r("v-col",{staticClass:"shrink"},[r("v-btn",{on:{click:e.clearError}},[e._v("That Sucks")])],1)],1)],1)],1),r("v-dialog",{attrs:{width:"500"},model:{value:e.deleteConfirm,callback:function(t){e.deleteConfirm=t},expression:"deleteConfirm"}},[r("v-card",[r("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Confirm Resource Deletion ")]),r("v-card-text",[e._v(" This cannot be undone. ")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:function(t){e.deleteConfirm=!1}}},[e._v("Cancel")]),r("v-btn",{on:{click:e.deleteItem}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{width:"500"},model:{value:e.showDataSourceProviderSetup,callback:function(t){e.showDataSourceProviderSetup=t},expression:"showDataSourceProviderSetup"}},[r("v-card",[r("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" Data Source Provider ")]),r("v-card-text",[r("v-switch",{attrs:{"help-topic":"useLocalStorage",label:e.useLocalStorage?"Local Storage":"Server Storage"},model:{value:e.useLocalStorage,callback:function(t){e.useLocalStorage=t},expression:"useLocalStorage"}}),r("v-text-field",{attrs:{disabled:e.useLocalStorage,"help-topic":"HTTPServer",label:"HTTPS Server"},model:{value:e.graphHTTPServer,callback:function(t){e.graphHTTPServer=t},expression:"graphHTTPServer"}}),r("v-text-field",{attrs:{disabled:e.useLocalStorage,"help-topic":"WSSServer",label:"WSS Server"},model:{value:e.graphWSSServer,callback:function(t){e.graphWSSServer=t},expression:"graphWSSServer"}})],1),r("v-card-title",{staticClass:"headline",attrs:{"primary-title":""}},[e._v(" User Settings ")]),r("v-card-text",[r("v-text-field",{attrs:{"prepend-icon":"mdi-dice-multiple-outline","help-topic":"userName",label:"User Name"},on:{"click:prepend":e.randomizeName},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),r("v-text-field",{attrs:{"help-topic":"avatar",label:"Avatar"},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("v-img",{staticStyle:{width:"30px","border-radius":"15px"},attrs:{src:e.avatar}})]},proxy:!0}]),model:{value:e.avatar,callback:function(t){e.avatar=t},expression:"avatar"}}),r("v-text-field",{attrs:{disabled:"","help-topic":"workstationId",label:"Workstation Id"},model:{value:e.workstationId,callback:function(t){e.workstationId=t},expression:"workstationId"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{on:{click:e.saveDbPrefs}},[e._v("Ok")])],1)],1)],1),r("v-bottom-sheet",{attrs:{timeout:2e3},model:{value:e.showWarning,callback:function(t){e.showWarning=t},expression:"showWarning"}},[r("v-alert",{attrs:{type:"warning"}},[r("v-row",[r("v-col",[e._v(e._s(e.warningMessage))])],1)],1)],1)],1)},di=[],hi={name:"graph-manager",methods:Object(s["a"])(Object(s["a"])({},Object(xr["b"])(["savePreferences","download","removeArtifact","remove","create","clearError","getToc"])),{},{saveDbPrefs:function(){this.originalPreferences!==JSON.stringify(this.preferences)&&(this.showWarning=!0,this.warningMessage="Changes to data source provider will not take effect until you refresh your browser."),this.showDataSourceProviderSetup=!1,this.savePreferences()},randomizeName:function(){var e=qt();this.userName=e,this.avatar="https://api.adorable.io/avatars/50/"+e.replace(/ /g,"")+".png"},confirmDelete:function(e){this.deleteConfirm=!0,this.deleteRef=e},deleteItem:function(){this.deleteConfirm=!1,"graph"===this.deleteRef.type?this.remove(this.deleteRef.id):this.removeArtifact(this.deleteRef)},openGraph:function(e){window.open(this.pathPrefix+e,"_"+e)},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage:function(e){this.itemsPerPage=e},dataSourceProviderSetup:function(){this.originalPreferences=JSON.stringify(this.preferences),this.showDataSourceProviderSetup=!0}}),data:function(){return{showWarning:null,warningMessage:null,originalPreferences:null,deleteConfirm:!1,deleteRef:null,localErrorMessage:"",showDataSourceProviderSetup:!1,localShowError:!1,drawer:null,localItems:[],itemsPerPageArray:[8,16,64,128,256],search:"",filter:{},sortDesc:!1,page:1,itemsPerPage:8,sortBy:"name",keys:["name","version","description"]}},watch:{preferences:{handler:function(){this.$vuetify.theme.dark="dark"===this.preferences.appearance.theme},deep:!0},toc:{handler:function(){this.localItems=this.toc},deep:!0},showError:function(){this.localShowError=this.showError,this.error&&(this.localErrorMessage=this.error.toString())}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(Zt["b"])(["preferences.useLocalStorage","preferences.graphHTTPServer","preferences.graphWSSServer","preferences.userName","preferences.avatar","preferences.workstationId"])),Object(xr["e"])({createdGraphId:function(e){return e.createdGraphId},pathPrefix:function(e){return e.pathPrefix},toc:function(e){return e.toc},preferences:function(e){return e.preferences},showError:function(e){return e.showError},error:function(e){return e.error}})),{},{numberOfPages:function(){return Math.ceil(this.tocItems.length/this.itemsPerPage)},filteredKeys:function(){return this.keys.filter((function(e){return"Name"!==e}))},tocItems:function(){var e=this;return Object.keys(this.localItems).map((function(t){return e.localItems[t]})).filter((function(e){return"graph"===e.type}))}}),created:function(){this.getToc(),this.$store.dispatch("subscribeToc"),this.$store.dispatch("subscribePreferences"),this.$vuetify.theme.dark="dark"===this.preferences.appearance.theme}},vi=hi,fi=Object(pr["a"])(vi,ui,di,!1,null,null,null),mi=fi.exports,gi=r("8c4f"),bi=r("31bd"),yi=r("2b88"),wi=r.n(yi);n["default"].config.productionTip=!1,n["default"].use(gi["a"]),n["default"].use(xr["a"]),n["default"].use(wi.a);var xi=new xr["a"].Store(ir());xi.dispatch("setupDataProvider"),xi.watch((function(e){return e.historyPosition}),(function(){xi.dispatch("save")}));var Si=new gi["a"]({mode:"history",routes:[{path:"/graph-editor/",redirect:"/graph-editor/graphs"},{path:"/graph-editor/graphs",component:mi,props:function(e){return{route:e}}},{path:"/graph-editor/*",component:pi,props:function(e){return{route:e}}}]});Object(bi["sync"])(xi,Si);t["default"]=new n["default"]({router:Si,vuetify:a,store:xi,render:function(e){return e(dr)}}).$mount("#app")},d17a:function(e,t,r){},e9fc:function(e,t,r){"use strict";var n=r("3997"),o=r.n(n);o.a},fc5a:function(e,t,r){}});
//# sourceMappingURL=app.2031ffff.js.map